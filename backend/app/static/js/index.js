var lf=Object.create;var _n=Object.defineProperty;var uf=Object.getOwnPropertyDescriptor;var df=Object.getOwnPropertyNames;var mf=Object.getPrototypeOf,ff=Object.prototype.hasOwnProperty;var kn=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Oa=(e,t)=>{for(var r in t)_n(e,r,{get:t[r],enumerable:!0})},pf=(e,t,r,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of df(t))!ff.call(e,n)&&n!==r&&_n(e,n,{get:()=>t[n],enumerable:!(o=uf(t,n))||o.enumerable});return e};var Dn=(e,t,r)=>(r=e!=null?lf(mf(e)):{},pf(t||!e||!e.__esModule?_n(r,"default",{value:e,enumerable:!0}):r,e));var Na=kn((Cr,Rn)=>{"use strict";(function(e,t){typeof Cr=="object"&&typeof Rn=="object"?Rn.exports=t():typeof Cr=="object"?Cr[0]=t():e[0]=t()})(Cr,function(){return t=[function(o,n,i){"use strict";i.r(n),i.d(n,"AWSMarketingClientSideDataServiceClient",function(){return Ne}),i.d(n,"AWSMarketingClientSideDataServiceClientConfig",function(){return Se}),i.d(n,"D2CBatchEventRequest",function(){return U}),i.d(n,"D2CEvent",function(){return _e}),i.d(n,"D2CEventType",function(){return ke}),i.d(n,"LogDataRequest",function(){return no}),i.d(n,"LogDataV2Request",function(){return io}),i.d(n,"Metric",function(){return Sr});var a="alpha",s="prod";function c(v){return(c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h})(v)}function u(v,h){for(var E=0;E<h.length;E++){var g=h[E];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(v,function(y){return y=function(S,L){if(c(S)!=="object"||S===null)return S;var T=S[Symbol.toPrimitive];if(T===void 0)return String(S);if(c(T=T.call(S,L))!=="object")return T;throw new TypeError("@@toPrimitive must return a primitive value.")}(y,"string"),c(y)==="symbol"?y:String(y)}(g.key),g)}}var l="https://",d=".d2c.marketing.aws.a2z.org.cn/",m=function(){function v(g){if(!(this instanceof v))throw new TypeError("Cannot call a class as a function");this.config=g}var h,E;return h=v,(E=[{key:"getEndpoint",value:function(){var g=this.config.getEnvironment()||a;if(this.config.getIsBJS())return this._getCNEndpoint(g);if(g===s)return l+"d2c.aws.amazon.com/";if(g==="dev"){var y=this.config.getDevEndpoint();if(y)return y;g=a}return l+g+".d2c.marketing.aws.dev/"}},{key:"_getCNEndpoint",value:function(g){switch(g){case"dev":return l+a+d;case s:return l+"d2c.amazonaws.cn/";default:return l+g+d}}}])&&u(h.prototype,E),Object.defineProperty(h,"prototype",{writable:!1}),v}();function f(v){return(f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h})(v)}function p(v,h){for(var E=0;E<h.length;E++){var g=h[E];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(v,function(y){return y=function(S,L){if(f(S)!=="object"||S===null)return S;var T=S[Symbol.toPrimitive];if(T===void 0)return String(S);if(f(T=T.call(S,L))!=="object")return T;throw new TypeError("@@toPrimitive must return a primitive value.")}(y,"string"),f(y)==="symbol"?y:String(y)}(g.key),g)}}var b="application/json",w=function(){function v(g,y){if(!(this instanceof v))throw new TypeError("Cannot call a class as a function");this.config=g,this.endpointProvider=y,this.baseUrl=this._getBaseURL(),this.headers={"Content-Type":"application/plain",Accept:b}}var h,E;return h=v,(E=[{key:"get",value:function(g){var y=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},S=Object.assign({},{headers:this.headers,credentials:"include"},2<arguments.length?arguments[2]:void 0),L=new URL(g,this.baseUrl);return Object.keys(y).forEach(function(T){return L.searchParams.append(T,y[T])}),fetch(L,S).then(function(T){return T.ok?T:Promise.reject({message:"Request failed with status code ".concat(T.status),response:T})}).then(function(T){return T.json().then(function(V){return{data:V,status:T.status}})})}},{key:"post",value:function(g,y,S){return g=new URL(g,this.baseUrl),y=Object.assign({},{method:"POST",headers:Object.assign({},this.headers,{"Content-Type":b}),body:JSON.stringify(y),credentials:"include"},S),fetch(g,y).then(function(L){return L.ok?L:Promise.reject({message:"Request failed with status code ".concat(L.status),response:L})}).then(function(L){return L.json().then(function(T){return{data:T,status:L.status}})})}},{key:"_getBaseURL",value:function(){var g=this.config.getEnvironment();return this.endpointProvider.getEndpoint(g)}}])&&p(h.prototype,E),Object.defineProperty(h,"prototype",{writable:!1}),v}();function C(v){return(C=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h})(v)}function I(v,h){for(var E=0;E<h.length;E++){var g=h[E];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(v,function(y){return y=function(S,L){if(C(S)!=="object"||S===null)return S;var T=S[Symbol.toPrimitive];if(T===void 0)return String(S);if(C(T=T.call(S,L))!=="object")return T;throw new TypeError("@@toPrimitive must return a primitive value.")}(y,"string"),C(y)==="symbol"?y:String(y)}(g.key),g)}}var _=function(){function v(){if(!(this instanceof v))throw new TypeError("Cannot call a class as a function")}var h,E;return h=v,E=[{key:"isValid",value:function(g){var y;return C(g)==="object"&&(y=g.getMetrics(),g=g.getDimensions(),y=Array.isArray(y)&&0<y.length,!Array.isArray(g))&&C(g)==="object"&&y}}],E&&I(h,E),Object.defineProperty(h,"prototype",{writable:!1}),v}();function P(v){return(P=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h})(v)}function z(v,h){for(var E=0;E<h.length;E++){var g=h[E];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(v,function(y){return y=function(S,L){if(P(S)!=="object"||S===null)return S;var T=S[Symbol.toPrimitive];if(T===void 0)return String(S);if(P(T=T.call(S,L))!=="object")return T;throw new TypeError("@@toPrimitive must return a primitive value.")}(y,"string"),P(y)==="symbol"?y:String(y)}(g.key),g)}}var H=function(){function v(){if(!(this instanceof v))throw new TypeError("Cannot call a class as a function")}var h,E;return h=v,E=[{key:"isValidRequest",value:function(g){return!(!g||typeof g.getData!="function")&&(g=g.getData())&&Array.isArray(g)&&0<g.length}},{key:"isValidData",value:function(g){return!!g&&!Array.isArray(g)&&0<Object.keys(g).length}}],E&&z(h,E),Object.defineProperty(h,"prototype",{writable:!1}),v}();function $(v){return($=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h})(v)}function J(v,h){for(var E=0;E<h.length;E++){var g=h[E];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(v,function(y){return y=function(S,L){if($(S)!=="object"||S===null)return S;var T=S[Symbol.toPrimitive];if(T===void 0)return String(S);if($(T=T.call(S,L))!=="object")return T;throw new TypeError("@@toPrimitive must return a primitive value.")}(y,"string"),$(y)==="symbol"?y:String(y)}(g.key),g)}}var se=function(){function v(){if(!(this instanceof v))throw new TypeError("Cannot call a class as a function")}var h,E;return h=v,E=[{key:"translate",value:function(g){var y=[];return g.forEach(function(S){S!==void 0&&y.push(S.toString())}),y.join("/")}}],E&&J(h,E),Object.defineProperty(h,"prototype",{writable:!1}),v}();function re(v){return(re=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h})(v)}function Oe(v,h){for(var E=0;E<h.length;E++){var g=h[E];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(v,function(y){return y=function(S,L){if(re(S)!=="object"||S===null)return S;var T=S[Symbol.toPrimitive];if(T===void 0)return String(S);if(re(T=T.call(S,L))!=="object")return T;throw new TypeError("@@toPrimitive must return a primitive value.")}(y,"string"),re(y)==="symbol"?y:String(y)}(g.key),g)}}var Ne=function(){function v(g){if(!(this instanceof v))throw new TypeError("Cannot call a class as a function");var y=new m(g);this.httpClient=new w(g,y)}var h,E;return h=v,(E=[{key:"logData",value:function(g){var y;_.isValid(g)&&(y=this._getRequestPath(g.getMetrics()),this.httpClient.get(y,g.getDimensions()).catch(function(){}))}},{key:"logDataV2",value:function(g){var y=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};H.isValidRequest(g)&&(g={input:{requestBody:g.getData()}},this.httpClient.post("/csds/v2/metrics",g,y).catch(function(){}))}},{key:"logD2CBatchEventV1",value:function(g,y){g&&!Array.isArray(g)&&Object.keys(g).length!=0&&this.httpClient.post("/csds/collector/v1/events/batch",g,y).catch(function(){})}},{key:"_getRequestPath",value:function(g){return"/csds/data/"+se.translate(g)}}])&&Oe(h.prototype,E),Object.defineProperty(h,"prototype",{writable:!1}),v}();function Ae(v){return(Ae=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h})(v)}function we(v,h){for(var E=0;E<h.length;E++){var g=h[E];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(v,function(y){return y=function(S,L){if(Ae(S)!=="object"||S===null)return S;var T=S[Symbol.toPrimitive];if(T===void 0)return String(S);if(Ae(T=T.call(S,L))!=="object")return T;throw new TypeError("@@toPrimitive must return a primitive value.")}(y,"string"),Ae(y)==="symbol"?y:String(y)}(g.key),g)}}var Se=function(){function v(g){var y=1<arguments.length&&arguments[1]!==void 0&&arguments[1],S=this,L=v;if(!(S instanceof L))throw new TypeError("Cannot call a class as a function");this.environment=g,this.isBJS=y,this.setTimeout(5e3)}var h,E;return h=v,(E=[{key:"getEnvironment",value:function(){return this.environment}},{key:"getTimeout",value:function(){return this.timeout}},{key:"setTimeout",value:function(g){this.timeout=g}},{key:"setDevEndpoint",value:function(g){this.devEndpoint=g}},{key:"getDevEndpoint",value:function(){return this.devEndpoint}},{key:"getIsBJS",value:function(){return this.isBJS}}])&&we(h.prototype,E),Object.defineProperty(h,"prototype",{writable:!1}),v}();function N(v){return(N=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h})(v)}function A(v,h){return function(E){if(Array.isArray(E))return E}(v)||function(E,g){var y=E==null?null:typeof Symbol<"u"&&E[Symbol.iterator]||E["@@iterator"];if(y!=null){var S,L,T,V,B=[],D=!0,Y=!1;try{if(T=(y=y.call(E)).next,g===0){if(Object(y)!==y)return;D=!1}else for(;!(D=(S=T.call(y)).done)&&(B.push(S.value),B.length!==g);D=!0);}catch(De){Y=!0,L=De}finally{try{if(!D&&y.return!=null&&(V=y.return(),Object(V)!==V))return}finally{if(Y)throw L}}return B}}(v,h)||function(E,g){var y;if(E)return typeof E=="string"?O(E,g):(y=(y=Object.prototype.toString.call(E).slice(8,-1))==="Object"&&E.constructor?E.constructor.name:y)==="Map"||y==="Set"?Array.from(E):y==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(y)?O(E,g):void 0}(v,h)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function O(v,h){(h==null||h>v.length)&&(h=v.length);for(var E=0,g=new Array(h);E<h;E++)g[E]=v[E];return g}function M(v,h){for(var E=0;E<h.length;E++){var g=h[E];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(v,function(y){return y=function(S,L){if(N(S)!=="object"||S===null)return S;var T=S[Symbol.toPrimitive];if(T===void 0)return String(S);if(N(T=T.call(S,L))!=="object")return T;throw new TypeError("@@toPrimitive must return a primitive value.")}(y,"string"),N(y)==="symbol"?y:String(y)}(g.key),g)}}var U=function(v,h,E){return h&&M(v.prototype,h),E&&M(v,E),Object.defineProperty(v,"prototype",{writable:!1}),v}(function v(h,E,g){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:{},S=this,L=v;if(!(S instanceof L))throw new TypeError("Cannot call a class as a function");for(var T=0,V=Object.entries(y);T<V.length;T++){var B=(D=A(V[T],2))[0],D=D[1];this[B]=D}this.batchId=h,this.schemaVersion=E,this.batchEvents=g});function R(v){return(R=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h})(v)}function Z(v,h){return function(E){if(Array.isArray(E))return E}(v)||function(E,g){var y=E==null?null:typeof Symbol<"u"&&E[Symbol.iterator]||E["@@iterator"];if(y!=null){var S,L,T,V,B=[],D=!0,Y=!1;try{if(T=(y=y.call(E)).next,g===0){if(Object(y)!==y)return;D=!1}else for(;!(D=(S=T.call(y)).done)&&(B.push(S.value),B.length!==g);D=!0);}catch(De){Y=!0,L=De}finally{try{if(!D&&y.return!=null&&(V=y.return(),Object(V)!==V))return}finally{if(Y)throw L}}return B}}(v,h)||function(E,g){var y;if(E)return typeof E=="string"?oe(E,g):(y=(y=Object.prototype.toString.call(E).slice(8,-1))==="Object"&&E.constructor?E.constructor.name:y)==="Map"||y==="Set"?Array.from(E):y==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(y)?oe(E,g):void 0}(v,h)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function oe(v,h){(h==null||h>v.length)&&(h=v.length);for(var E=0,g=new Array(h);E<h;E++)g[E]=v[E];return g}function ce(v,h){for(var E=0;E<h.length;E++){var g=h[E];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(v,function(y){return y=function(S,L){if(R(S)!=="object"||S===null)return S;var T=S[Symbol.toPrimitive];if(T===void 0)return String(S);if(R(T=T.call(S,L))!=="object")return T;throw new TypeError("@@toPrimitive must return a primitive value.")}(y,"string"),R(y)==="symbol"?y:String(y)}(g.key),g)}}var _e=function(v,h,E){return h&&ce(v.prototype,h),E&&ce(v,E),Object.defineProperty(v,"prototype",{writable:!1}),v}(function v(h,E,g){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:{},S=this,L=v;if(!(S instanceof L))throw new TypeError("Cannot call a class as a function");for(var T=0,V=Object.entries(y);T<V.length;T++){var B=(D=Z(V[T],2))[0],D=D[1];this[B]=D}this.pageURL=h,this.eventType=E,this.eventTimestamp=g}),ke={PAGEVIEW:"pageView",LINKCLICK:"linkClick",CLICK:"click",IMPRESSION:"impression",MEDIA:"media",TOOL:"tool",FORM:"form",SEARCH:"search",FILTER:"filter",SIGNUP:"signup",SCROLL:"scroll",LOGEVENT:"logEvent"};function Ie(v){return(Ie=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h})(v)}function oo(v,h){for(var E=0;E<h.length;E++){var g=h[E];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(v,function(y){return y=function(S,L){if(Ie(S)!=="object"||S===null)return S;var T=S[Symbol.toPrimitive];if(T===void 0)return String(S);if(Ie(T=T.call(S,L))!=="object")return T;throw new TypeError("@@toPrimitive must return a primitive value.")}(y,"string"),Ie(y)==="symbol"?y:String(y)}(g.key),g)}}var no=function(){function v(g){if(!(this instanceof v))throw new TypeError("Cannot call a class as a function");this.metrics=g,this.dimensions={}}var h,E;return h=v,(E=[{key:"setDimensions",value:function(g){this.dimensions=g}},{key:"getDimensions",value:function(){return this.dimensions}},{key:"getMetrics",value:function(){return this.metrics}}])&&oo(h.prototype,E),Object.defineProperty(h,"prototype",{writable:!1}),v}();function rr(v){return(rr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h})(v)}function or(v,h){for(var E=0;E<h.length;E++){var g=h[E];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(v,function(y){return y=function(S,L){if(rr(S)!=="object"||S===null)return S;var T=S[Symbol.toPrimitive];if(T===void 0)return String(S);if(rr(T=T.call(S,L))!=="object")return T;throw new TypeError("@@toPrimitive must return a primitive value.")}(y,"string"),rr(y)==="symbol"?y:String(y)}(g.key),g)}}var io=function(){function v(){if(!(this instanceof v))throw new TypeError("Cannot call a class as a function");this.data=[]}var h,E;return h=v,(E=[{key:"addData",value:function(g){g!==void 0&&Array.isArray(g)&&(g=g.filter(function(y){return H.isValidData(y)}),this.data=this.data.concat(g))}},{key:"getData",value:function(){return this.data}}])&&or(h.prototype,E),Object.defineProperty(h,"prototype",{writable:!1}),v}();function Ge(v){return(Ge=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h})(v)}function On(v,h){for(var E=0;E<h.length;E++){var g=h[E];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(v,function(y){return y=function(S,L){if(Ge(S)!=="object"||S===null)return S;var T=S[Symbol.toPrimitive];if(T===void 0)return String(S);if(Ge(T=T.call(S,L))!=="object")return T;throw new TypeError("@@toPrimitive must return a primitive value.")}(y,"string"),Ge(y)==="symbol"?y:String(y)}(g.key),g)}}var Sr=function(){function v(g,y,S){if(!(this instanceof v))throw new TypeError("Cannot call a class as a function");this.name=g,this.value=y,this.unit=S}var h,E;return h=v,(E=[{key:"getName",value:function(){return this.name}},{key:"getValue",value:function(){return this.value}},{key:"getUnit",value:function(){return this.unit}},{key:"toString",value:function(){return"".concat(this.name,"@v=").concat(this.value,":u=").concat(this.unit)}}])&&On(h.prototype,E),Object.defineProperty(h,"prototype",{writable:!1}),v}()}],r={},e.m=t,e.c=r,e.d=function(o,n,i){e.o(o,n)||Object.defineProperty(o,n,{enumerable:!0,get:i})},e.r=function(o){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},e.t=function(o,n){if(1&n&&(o=e(o)),8&n||4&n&&typeof o=="object"&&o&&o.__esModule)return o;var i=Object.create(null);if(e.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:o}),2&n&&typeof o!="string")for(var a in o)e.d(i,a,function(s){return o[s]}.bind(null,a));return i},e.n=function(o){var n=o&&o.__esModule?function(){return o.default}:function(){return o};return e.d(n,"a",n),n},e.o=function(o,n){return Object.prototype.hasOwnProperty.call(o,n)},e.p="",e(e.s=0);function e(o){var n;return(r[o]||(n=r[o]={i:o,l:!1,exports:{}},t[o].call(n.exports,n,n.exports,e),n.l=!0,n)).exports}var t,r})});var Ha=kn((Ir,co)=>{"use strict";(function(e,t){"use strict";var r="1.0.40",o="",n="?",i="function",a="undefined",s="object",c="string",u="major",l="model",d="name",m="type",f="vendor",p="version",b="architecture",w="console",C="mobile",I="tablet",_="smarttv",P="wearable",z="embedded",H=500,$="Amazon",J="Apple",se="ASUS",re="BlackBerry",Oe="Browser",Ne="Chrome",Ae="Edge",we="Firefox",Se="Google",N="Huawei",A="LG",O="Microsoft",M="Motorola",U="Opera",R="Samsung",Z="Sharp",oe="Sony",ce="Xiaomi",_e="Zebra",ke="Facebook",Ie="Chromium OS",oo="Mac OS",no=" Browser",rr=function(V,B){var D={};for(var Y in V)B[Y]&&B[Y].length%2===0?D[Y]=B[Y].concat(V[Y]):D[Y]=V[Y];return D},or=function(V){for(var B={},D=0;D<V.length;D++)B[V[D].toUpperCase()]=V[D];return B},io=function(V,B){return typeof V===c?Ge(B).indexOf(Ge(V))!==-1:!1},Ge=function(V){return V.toLowerCase()},On=function(V){return typeof V===c?V.replace(/[^\d\.]/g,o).split(".")[0]:t},Sr=function(V,B){if(typeof V===c)return V=V.replace(/^\s\s*/,o),typeof B===a?V:V.substring(0,H)},v=function(V,B){for(var D=0,Y,De,Ze,Q,j,et;D<B.length&&!j;){var Nn=B[D],xa=B[D+1];for(Y=De=0;Y<Nn.length&&!j&&Nn[Y];)if(j=Nn[Y++].exec(V),j)for(Ze=0;Ze<xa.length;Ze++)et=j[++De],Q=xa[Ze],typeof Q===s&&Q.length>0?Q.length===2?typeof Q[1]==i?this[Q[0]]=Q[1].call(this,et):this[Q[0]]=Q[1]:Q.length===3?typeof Q[1]===i&&!(Q[1].exec&&Q[1].test)?this[Q[0]]=et?Q[1].call(this,et,Q[2]):t:this[Q[0]]=et?et.replace(Q[1],Q[2]):t:Q.length===4&&(this[Q[0]]=et?Q[3].call(this,et.replace(Q[1],Q[2])):t):this[Q]=et||t;D+=2}},h=function(V,B){for(var D in B)if(typeof B[D]===s&&B[D].length>0){for(var Y=0;Y<B[D].length;Y++)if(io(B[D][Y],V))return D===n?t:D}else if(io(B[D],V))return D===n?t:D;return B.hasOwnProperty("*")?B["*"]:V},E={"1.0":"/8","1.2":"/1","1.3":"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"},g={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2","8.1":"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},y={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[p,[d,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[p,[d,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[d,p],[/opios[\/ ]+([\w\.]+)/i],[p,[d,U+" Mini"]],[/\bop(?:rg)?x\/([\w\.]+)/i],[p,[d,U+" GX"]],[/\bopr\/([\w\.]+)/i],[p,[d,U]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[p,[d,"Baidu"]],[/\b(?:mxbrowser|mxios|myie2)\/?([-\w\.]*)\b/i],[p,[d,"Maxthon"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer|sleipnir)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim(?:browser|boat|jet))[\/ ]?([\d\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|duckduckgo|klar|helio|(?=comodo_)?dragon)\/([-\w\.]+)/i,/(heytap|ovi|115)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[d,p],[/quark(?:pc)?\/([-\w\.]+)/i],[p,[d,"Quark"]],[/\bddg\/([\w\.]+)/i],[p,[d,"DuckDuckGo"]],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[p,[d,"UC"+Oe]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[p,[d,"WeChat"]],[/konqueror\/([\w\.]+)/i],[p,[d,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[p,[d,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[p,[d,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[p,[d,"Smart Lenovo "+Oe]],[/(avast|avg)\/([\w\.]+)/i],[[d,/(.+)/,"$1 Secure "+Oe],p],[/\bfocus\/([\w\.]+)/i],[p,[d,we+" Focus"]],[/\bopt\/([\w\.]+)/i],[p,[d,U+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[p,[d,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[p,[d,"Dolphin"]],[/coast\/([\w\.]+)/i],[p,[d,U+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[p,[d,"MIUI"+no]],[/fxios\/([\w\.-]+)/i],[p,[d,we]],[/\bqihoobrowser\/?([\w\.]*)/i],[p,[d,"360"]],[/\b(qq)\/([\w\.]+)/i],[[d,/(.+)/,"$1Browser"],p],[/(oculus|sailfish|huawei|vivo|pico)browser\/([\w\.]+)/i],[[d,/(.+)/,"$1"+no],p],[/samsungbrowser\/([\w\.]+)/i],[p,[d,R+" Internet"]],[/metasr[\/ ]?([\d\.]+)/i],[p,[d,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[d,"Sogou Mobile"],p],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345(?=browser|chrome|explorer))\w*[\/ ]?v?([\w\.]+)/i],[d,p],[/(lbbrowser|rekonq)/i,/\[(linkedin)app\]/i],[d],[/ome\/([\w\.]+) \w* ?(iron) saf/i,/ome\/([\w\.]+).+qihu (360)[es]e/i],[p,d],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[d,ke],p],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(twitter)(?:and| f.+e\/([\w\.]+))/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[d,p],[/\bgsa\/([\w\.]+) .*safari\//i],[p,[d,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[p,[d,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[p,[d,Ne+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[d,Ne+" WebView"],p],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[p,[d,"Android "+Oe]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[d,p],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[p,[d,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[p,d],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[d,[p,h,E]],[/(webkit|khtml)\/([\w\.]+)/i],[d,p],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[d,"Netscape"],p],[/(wolvic|librewolf)\/([\w\.]+)/i],[d,p],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[p,[d,we+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[d,[p,/_/g,"."]],[/(cobalt)\/([\w\.]+)/i],[d,[p,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[b,"amd64"]],[/(ia32(?=;))/i],[[b,Ge]],[/((?:i[346]|x)86)[;\)]/i],[[b,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[b,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[b,"armhf"]],[/windows (ce|mobile); ppc;/i],[[b,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[b,/ower/,o,Ge]],[/(sun4\w)[;\)]/i],[[b,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[b,Ge]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[l,[f,R],[m,I]],[/\b((?:s[cgp]h|gt|sm)-(?![lr])\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]((?!sm-[lr])[-\w]+)/i,/sec-(sgh\w+)/i],[l,[f,R],[m,C]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[l,[f,J],[m,C]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[l,[f,J],[m,I]],[/(macintosh);/i],[l,[f,J]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[l,[f,Z],[m,C]],[/(?:honor)([-\w ]+)[;\)]/i],[l,[f,"Honor"],[m,C]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[l,[f,N],[m,I]],[/(?:huawei)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[l,[f,N],[m,C]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite|pro)?)(?: bui|\))/i],[[l,/_/g," "],[f,ce],[m,C]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[l,/_/g," "],[f,ce],[m,I]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[l,[f,"OPPO"],[m,C]],[/\b(opd2\d{3}a?) bui/i],[l,[f,"OPPO"],[m,I]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[l,[f,"Vivo"],[m,C]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[l,[f,"Realme"],[m,C]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[l,[f,M],[m,C]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[l,[f,M],[m,I]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[l,[f,A],[m,I]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[l,[f,A],[m,C]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[l,[f,"Lenovo"],[m,I]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[l,/_/g," "],[f,"Nokia"],[m,C]],[/(pixel c)\b/i],[l,[f,Se],[m,I]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[l,[f,Se],[m,C]],[/droid.+; (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[l,[f,oe],[m,C]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[l,"Xperia Tablet"],[f,oe],[m,I]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[l,[f,"OnePlus"],[m,C]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo(?!bc)\w\w)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[l,[f,$],[m,I]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[l,/(.+)/g,"Fire Phone $1"],[f,$],[m,C]],[/(playbook);[-\w\),; ]+(rim)/i],[l,f,[m,I]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[l,[f,re],[m,C]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[l,[f,se],[m,I]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[l,[f,se],[m,C]],[/(nexus 9)/i],[l,[f,"HTC"],[m,I]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[f,[l,/_/g," "],[m,C]],[/droid [\w\.]+; ((?:8[14]9[16]|9(?:0(?:48|60|8[01])|1(?:3[27]|66)|2(?:6[69]|9[56])|466))[gqswx])\w*(\)| bui)/i],[l,[f,"TCL"],[m,I]],[/(itel) ((\w+))/i],[[f,Ge],l,[m,h,{tablet:["p10001l","w7001"],"*":"mobile"}]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[l,[f,"Acer"],[m,I]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[l,[f,"Meizu"],[m,C]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[l,[f,"Ulefone"],[m,C]],[/; (energy ?\w+)(?: bui|\))/i,/; energizer ([\w ]+)(?: bui|\))/i],[l,[f,"Energizer"],[m,C]],[/; cat (b35);/i,/; (b15q?|s22 flip|s48c|s62 pro)(?: bui|\))/i],[l,[f,"Cat"],[m,C]],[/((?:new )?andromax[\w- ]+)(?: bui|\))/i],[l,[f,"Smartfren"],[m,C]],[/droid.+; (a(?:015|06[35]|142p?))/i],[l,[f,"Nothing"],[m,C]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno|micromax|advan)[-_ ]?([-\w]*)/i,/; (imo) ((?!tab)[\w ]+?)(?: bui|\))/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[f,l,[m,C]],[/(imo) (tab \w+)/i,/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[f,l,[m,I]],[/(surface duo)/i],[l,[f,O],[m,I]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[l,[f,"Fairphone"],[m,C]],[/(u304aa)/i],[l,[f,"AT&T"],[m,C]],[/\bsie-(\w*)/i],[l,[f,"Siemens"],[m,C]],[/\b(rct\w+) b/i],[l,[f,"RCA"],[m,I]],[/\b(venue[\d ]{2,7}) b/i],[l,[f,"Dell"],[m,I]],[/\b(q(?:mv|ta)\w+) b/i],[l,[f,"Verizon"],[m,I]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[l,[f,"Barnes & Noble"],[m,I]],[/\b(tm\d{3}\w+) b/i],[l,[f,"NuVision"],[m,I]],[/\b(k88) b/i],[l,[f,"ZTE"],[m,I]],[/\b(nx\d{3}j) b/i],[l,[f,"ZTE"],[m,C]],[/\b(gen\d{3}) b.+49h/i],[l,[f,"Swiss"],[m,C]],[/\b(zur\d{3}) b/i],[l,[f,"Swiss"],[m,I]],[/\b((zeki)?tb.*\b) b/i],[l,[f,"Zeki"],[m,I]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[f,"Dragon Touch"],l,[m,I]],[/\b(ns-?\w{0,9}) b/i],[l,[f,"Insignia"],[m,I]],[/\b((nxa|next)-?\w{0,9}) b/i],[l,[f,"NextBook"],[m,I]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[f,"Voice"],l,[m,C]],[/\b(lvtel\-)?(v1[12]) b/i],[[f,"LvTel"],l,[m,C]],[/\b(ph-1) /i],[l,[f,"Essential"],[m,C]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[l,[f,"Envizen"],[m,I]],[/\b(trio[-\w\. ]+) b/i],[l,[f,"MachSpeed"],[m,I]],[/\btu_(1491) b/i],[l,[f,"Rotor"],[m,I]],[/(shield[\w ]+) b/i],[l,[f,"Nvidia"],[m,I]],[/(sprint) (\w+)/i],[f,l,[m,C]],[/(kin\.[onetw]{3})/i],[[l,/\./g," "],[f,O],[m,C]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[l,[f,_e],[m,I]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[l,[f,_e],[m,C]],[/smart-tv.+(samsung)/i],[f,[m,_]],[/hbbtv.+maple;(\d+)/i],[[l,/^/,"SmartTV"],[f,R],[m,_]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[f,A],[m,_]],[/(apple) ?tv/i],[f,[l,J+" TV"],[m,_]],[/crkey/i],[[l,Ne+"cast"],[f,Se],[m,_]],[/droid.+aft(\w+)( bui|\))/i],[l,[f,$],[m,_]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[l,[f,Z],[m,_]],[/(bravia[\w ]+)( bui|\))/i],[l,[f,oe],[m,_]],[/(mitv-\w{5}) bui/i],[l,[f,ce],[m,_]],[/Hbbtv.*(technisat) (.*);/i],[f,l,[m,_]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[f,Sr],[l,Sr],[m,_]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[m,_]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[f,l,[m,w]],[/droid.+; (shield) bui/i],[l,[f,"Nvidia"],[m,w]],[/(playstation [345portablevi]+)/i],[l,[f,oe],[m,w]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[l,[f,O],[m,w]],[/\b(sm-[lr]\d\d[05][fnuw]?s?)\b/i],[l,[f,R],[m,P]],[/((pebble))app/i],[f,l,[m,P]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[l,[f,J],[m,P]],[/droid.+; (glass) \d/i],[l,[f,Se],[m,P]],[/droid.+; (wt63?0{2,3})\)/i],[l,[f,_e],[m,P]],[/droid.+; (glass) \d/i],[l,[f,Se],[m,P]],[/(pico) (4|neo3(?: link|pro)?)/i],[f,l,[m,P]],[/; (quest( \d| pro)?)/i],[l,[f,ke],[m,P]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[f,[m,z]],[/(aeobc)\b/i],[l,[f,$],[m,z]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[l,[m,C]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[l,[m,I]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[m,I]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[m,C]],[/(android[-\w\. ]{0,9});.+buil/i],[l,[f,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[p,[d,Ae+"HTML"]],[/(arkweb)\/([\w\.]+)/i],[d,p],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[p,[d,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna|servo)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[d,p],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[p,d]],os:[[/microsoft (windows) (vista|xp)/i],[d,p],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[d,[p,h,g]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[p,h,g],[d,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[p,/_/g,"."],[d,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[d,oo],[p,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[p,d],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish|openharmony)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[d,p],[/\(bb(10);/i],[p,[d,re]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[p,[d,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[p,[d,we+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[p,[d,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[p,[d,"watchOS"]],[/crkey\/([\d\.]+)/i],[p,[d,Ne+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[d,Ie],p],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[d,p],[/(sunos) ?([\w\.\d]*)/i],[[d,"Solaris"],p],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[d,p]]},S=function(V,B){if(typeof V===s&&(B=V,V=t),!(this instanceof S))return new S(V,B).getResult();var D=typeof e!==a&&e.navigator?e.navigator:t,Y=V||(D&&D.userAgent?D.userAgent:o),De=D&&D.userAgentData?D.userAgentData:t,Ze=B?rr(y,B):y,Q=D&&D.userAgent==Y;return this.getBrowser=function(){var j={};return j[d]=t,j[p]=t,v.call(j,Y,Ze.browser),j[u]=On(j[p]),Q&&D&&D.brave&&typeof D.brave.isBrave==i&&(j[d]="Brave"),j},this.getCPU=function(){var j={};return j[b]=t,v.call(j,Y,Ze.cpu),j},this.getDevice=function(){var j={};return j[f]=t,j[l]=t,j[m]=t,v.call(j,Y,Ze.device),Q&&!j[m]&&De&&De.mobile&&(j[m]=C),Q&&j[l]=="Macintosh"&&D&&typeof D.standalone!==a&&D.maxTouchPoints&&D.maxTouchPoints>2&&(j[l]="iPad",j[m]=I),j},this.getEngine=function(){var j={};return j[d]=t,j[p]=t,v.call(j,Y,Ze.engine),j},this.getOS=function(){var j={};return j[d]=t,j[p]=t,v.call(j,Y,Ze.os),Q&&!j[d]&&De&&De.platform&&De.platform!="Unknown"&&(j[d]=De.platform.replace(/chrome os/i,Ie).replace(/macos/i,oo)),j},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return Y},this.setUA=function(j){return Y=typeof j===c&&j.length>H?Sr(j,H):j,this},this.setUA(Y),this};S.VERSION=r,S.BROWSER=or([d,p,u]),S.CPU=or([b]),S.DEVICE=or([l,f,m,w,C,_,I,P,z]),S.ENGINE=S.OS=or([d,p]),typeof Ir!==a?(typeof co!==a&&co.exports&&(Ir=co.exports=S),Ir.UAParser=S):i==="undefined"&&(void 0).amd?(void 0)(function(){return S}):typeof e!==a&&(e.UAParser=S);var L=typeof e!==a&&(e.jQuery||e.Zepto);if(L&&!L.ua){var T=new S;L.ua=T.getResult(),L.ua.get=function(){return T.getUA()},L.ua.set=function(V){T.setUA(V);var B=T.getResult();for(var D in B)L.ua[D]=B[D]}}})(typeof window=="object"?window:Ir)});var Rs=kn((sw,Ds)=>{"use strict";var ig=function(e){var t={};if(!e||typeof e!="string")return t;var r=e.trim().replace(/^[?#&]/,""),o=new URLSearchParams(r),n=o.keys();do{var i=n.next(),a=i.value;if(a){var s=o.getAll(a);s.length===1?t[a]=s[0]:t[a]=s}}while(i.done===!1);return t},ag=function(e){var t="{{space}}",r=new URLSearchParams;return Object.keys(e).forEach(function(o){var n=e[o];typeof e[o]=="string"?n=n.replace(/ /g,t):["object","undefined"].includes(typeof n)&&!Array.isArray(n)&&(n=""),Array.isArray(n)?n.forEach(function(i){r.append(o,i)}):r.append(o,n)}),r.toString().replace(new RegExp(encodeURIComponent(t),"g"),"%20")};Ds.exports={parse:function(e){return ig(e)},stringify:function(e){return ag(e)}}});var rt=Dn(Na());var gf={isLoggingEnabled:!0},ao=()=>{"use strict";let e;return typeof window.AWS=="object"&&typeof window.AWS.PageSettings=="object"&&(e=window.AWS.PageSettings),{...gf,...e}};var _a=e=>{document.addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&e()})};var ka=e=>{document.addEventListener("pagehide",()=>{e()})};function Da(e,t){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");let o=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(t);return o===null?"":decodeURIComponent(o[1].replace(/\+/g," "))}var Ra=e=>{let t=Da("debug_"+e,window.location.search);return t===""?null:t};var tt;(function(e){e.DEBUG="debug",e.INFO="info",e.LOG="log",e.WARN="warn",e.ERROR="error",e.ALL="all"})(tt||(tt={}));var Pa=e=>{let{namespace:t,logLevel:r}=e,o=Ra(t)?.toLowerCase();o&&(o===r||o===tt.ALL)&&console.log(`[${r}] ${t}; ${JSON.stringify(e)}`)};var Ma=e=>{let t={};return Object.keys(e).forEach(r=>{typeof e[r]=="string"?t[r]=e[r]:t[r]=JSON.stringify(e[r])}),t};var q;(function(e){e.AWSM_GF="awsm_gf",e.AWSM_CARE="awsm_care",e.AWSM_CX="awsm_care",e.AWSM_SCAR="awsm_scar",e.AWSM_CA="awsm_ca",e.AWSM_PRC="awsm_prc"})(q||(q={}));var hf={AjaxForm:q.AWSM_GF,PricingTable:q.AWSM_GF,CookieConsent:q.AWSM_GF,PageAlert:q.AWSM_GF,DirectoriesTable:q.AWSM_GF,LibraRequire:q.AWSM_GF,LazyLoad:q.AWSM_GF,EventHub:q.AWSM_GF,v3CoreWebVitals:q.AWSM_GF,v3Performance:q.AWSM_GF,v3PageError:q.AWSM_GF,v3PScriptError:q.AWSM_GF,v3SuspectedThirdPartyScriptError:q.AWSM_GF,v3CookieConsent:q.AWSM_GF},yf={Blog:q.AWSM_CARE},Ef={PageError:q.AWSM_CX,ScriptError:q.AWSM_CX,SuspectedThirdPartyScriptError:q.AWSM_CX,Performance:q.AWSM_CX,CoreWebVitals:q.AWSM_CX,Directories:q.AWSM_CX,Cards:q.AWSM_CX,MapPin:q.AWSM_CX,NewsTicker:q.AWSM_CX,LibraCarousel:q.AWSM_CX,LibraVideo:q.AWSM_CX,NavMobileV3:q.AWSM_CX,NavDesktopV3:q.AWSM_CX,Typeahead:q.AWSM_CX},bf={SiteSearch:q.AWSM_SCAR,ExperienceOrchestratorClient:q.AWSM_SCAR},vf={TargetMediator:q.AWSM_CA,AjaxForm:q.AWSM_CA},Sf={PricingLayerCake:q.AWSM_PRC},La={...yf,...Ef,...bf,...vf,...Sf,...hf};var Cf="LogMissingOrgId",Va=e=>{let{orgId:t,namespace:r}=e,o=t||La[r];return o?{customData:e,orgId:o}:{customData:{...e,namespaceMissingMapping:r,namespace:Cf,orgId:q.AWSM_GF},orgId:q.AWSM_GF}};var wf=200,Pn=class{constructor(){this.maxBatchSize=10,this.logQueue=[],this.flushQueue=()=>{this.logQueue.length&&this.sendBatchRequest(!0)};let{currentStage:t,logDataSet:r,isBJS:o}=ao();this.stage=t||r?.split(":")[1]||"";let n=new rt.AWSMarketingClientSideDataServiceClientConfig(this.stage.toLowerCase(),o);this.batchClient=new rt.AWSMarketingClientSideDataServiceClient(n),_a(this.flushQueue),ka(this.flushQueue)}createLog(t){Pa(t);let r=Ma(t);if(this.createLogEvent(r),this.logQueue.length===this.maxBatchSize)return this.sendBatchRequest();if(this.batchTimer!==void 0)return this.refreshBatchTimer();this.batchTimer=this.createBatchTimer()}createLogEvent(t){this.logQueue.push(new rt.D2CEvent(window.location.toString(),rt.D2CEventType.LOGEVENT,new Date().getTime(),{...Va(t)}))}createBatchTimer(){return setTimeout(()=>{this.sendBatchRequest()},wf)}refreshBatchTimer(){clearTimeout(this.batchTimer),this.batchTimer=this.createBatchTimer()}createBatchRequest(){return new rt.D2CBatchEventRequest("LibraLogger","1.0",this.logQueue)}sendBatchRequest(t=!1){this.batchClient.logD2CBatchEventV1(this.createBatchRequest(),{keepalive:t}),this.logQueue=[],clearTimeout(this.batchTimer)}},If=new Pn,nr=If;var Af=["Acrolinx-bot","AdsBot","ahrefs.com/robot","AmazonAutoTester","amazon-kendra","Arquivo-web-crawler","Baiduspider","Bytespider","BingBot","BingPreview","bitdiscovery","BrightEdge","botify","burbox bot","Caliperbot","CloudWatchSynthetics","cocolyze.com/bot","google.com/bot","Googlebot","GoogleImageProxy","HeadlessChrome","Mediapartners-Google","msnbot","Cypress","pagepeeker.com/robots","PetalBot","PTST","DatadogSynthetics","RuxitSynthetic","SECSSOBrowser","Pingdom","Chrome-Lighthouse","ThousandEyes","moatbot","HubSpot Crawler","SeekportBot","Slackbot","DareBoost","SiteScoreBot","CensysInspect","woorankreview","ev-crawler","proximic","DingTalkBot","seoclarity.net/bot","SiteAuditBot","Sogou web spider","openai.com/gptbot","yandex.com/bots","xforce-security.com/crawler","Canary","amazon-QBusiness"],Tf=new RegExp(Af.join("|"),"i"),Ua=()=>Tf.test(window.navigator.userAgent);var xf="marketplace",Of="console-",Mn=[{hostname:"console.aws.amazon.com",service:"console"},{hostname:"aws.amazon.com",service:"awsm"},{hostname:"amazonaws-china.com",service:"awsm"},{hostname:"www.amazonaws.cn",service:"cn"}],Nf=/console\.(aws\.amazon\.com|amazonaws\.cn)\/([a-z0-9]+)\//,ja=e=>{if(typeof window.location.pathname<"u"){if(e)return xf;let t=(window.location.hostname+window.location.pathname).match(Nf);if(t&&t.length===3)return Of+t[2]}for(let t=0,r=Mn.length;t<r;t++){let o=Mn[t].hostname,n=new RegExp(o+"\\/");if(n.test(window.location.hostname+"/")||n.test(window.location.pathname)||n.test(window.location.hash))return Mn[t].service}return"NA"};var wr={CMS:"CMS",DEFAULT:"DEFAULT"},_f={awsm:wr.CMS,cn:wr.CMS,console:wr.DEFAULT,marketplace:wr.CMS},Ba=(e,t)=>_f[e]!==wr.CMS||window.location.pathname.indexOf(".html")!==window.location.pathname.length-5?"LIVE":t||"NA";var $a=()=>new RegExp(/iPhone|iPod|iPad|Android|(?=.*\bAndroid\b)(?=.*\bMobile\b)|IEMobile|(?=.*\bWindows\b)(?=.*\bTouch\b)|Windows Phone|Opera Mini|(?=.*\bFirefox\b)(?=.*\bMobile\b)|BlackBerry|Nexus 7|BNTV250|Kindle Fire|Silk|webOS|GT-P1000/i).test(window.navigator.userAgent);var kf=["console.aws.amazon.com","console.amazonaws.cn"],Df={"aws.amazon.com":1,"amazonaws-china.com":1,"www.amazonaws.cn":1},qa=()=>{let e=window.location.hostname;if(Object.prototype.hasOwnProperty.call(Df,e))return e;let t=kf.find(r=>e.includes(r));return t||"NA"};var Fa=()=>{let e=window.document.documentElement.getAttribute("lang");return typeof e=="string"&&e.length?e.replace("-","_"):"NA"};var so=()=>window.navigator.userAgent?.substring(0,200)||"";var Ga=e=>{let t="unknown";return"framework"in e&&e.framework&&(t=e.framework),t};var za=Dn(Ha());var yt;(function(e){e.SUPPORTED="SUPPORTED",e.PARTIAL="PARTIAL",e.UNSUPPORTED="UNSUPPORTED"})(yt||(yt={}));var Et;(function(e){e.DESKTOP="DESKTOP",e.TABLET="TABLET",e.PHONE="PHONE",e.OTHER="OTHER",e.UNKNOWN="UNKNOWN"})(Et||(Et={}));var Wa={Chrome:{supported:113,partial:109},Safari:{supported:16.5,partial:16.3},Edge:{supported:112,partial:97},Firefox:{supported:113,partial:111},"Samsung Browser":{supported:21,partial:20},"Android Browser":{partial:4},Opera:{partial:95},Silk:{partial:108},UCBrowser:{partial:13.4},Yandex:{partial:23.11}};var Rf=768,Pf=(e,t)=>{if(!e||!t)return yt.UNSUPPORTED;let r=Wa[e];return r?r.supported&&t>=r.supported?yt.SUPPORTED:r.partial&&t>=r.partial?yt.PARTIAL:yt.UNSUPPORTED:yt.UNSUPPORTED},Mf=()=>window?.screen?.width>=Rf,Lf=e=>{switch(e){case"mobile":return Et.PHONE;case"tablet":return Et.TABLET;case"smarttv":case"wearable":case"embedded":return Et.OTHER;default:return Mf()?Et.DESKTOP:Et.UNKNOWN}},Ya=()=>{let e=new za.default(so()),t=e.getBrowser(),r=t?.name||"",o=parseFloat(t?.version||"0"),n=Lf(e.getDevice()?.type);return{browserName:r,browserVersion:o,browserFormFactor:n,browserSupportLevel:Pf(r,o)}};var Vf={CookieConsent:"NA"},Xa=e=>{let t=ao(),r=ja(t.isMarketplace);return{namespace:e,service:r,isBot:Ua(),instance:Ba(r,t.logInstance),isMobile:$a(),host:qa(),locale:Vf[e]||Fa(),userAgent:so(),framework:Ga(t),...Ya()}};var Qa=()=>"performance"in window&&"timing"in window.performance?new Date().getTime()-window.performance.timing.responseEnd:-1;var lo=class{constructor(t,r={}){this.baseMetaData=Xa(t),this.context=r}getRuntimeMetaData(){return{pageTime:Qa()}}getFullMetaData(){return{...this.baseMetaData,...this.getRuntimeMetaData(),...this.context}}aggregateData(t,r){return{...this.getFullMetaData(),...t,logLevel:r}}debug(t){nr.createLog(this.aggregateData(t,tt.DEBUG))}info(t){nr.createLog(this.aggregateData(t,tt.INFO))}log(t){nr.createLog(this.aggregateData(t,tt.LOG))}warn(t){nr.createLog(this.aggregateData(t,tt.WARN))}error(t){nr.createLog(this.aggregateData(t,tt.ERROR))}};var Uf={orgId:"awsm_analytics_and_personalization"},bt="AWSMAnalyticsClientSide";function jf(e){let t=new lo(e,Uf);return{logMetricCount:a=>{t.info({metricCount:1,metricName:a,namespace:bt})},logMetricCountWithMessage:(a,s)=>{t.info({metricCount:1,metricName:a,namespace:bt,metricMessage:s})},logMetricErrorCount:(a,s)=>{t.error({metricCount:1,metricName:a,errorMessage:s,namespace:bt})},logPerformanceMetric:a=>{let s=new Date().getTime(),c=`${a}-${s}`,u=performance.mark(`start-${c}`);return{send:()=>{let l=performance.mark(`end-${c}`),d=performance.measure(c,u?.name||`start-${c}`,l?.name||`end-${c}`);t.info({metricName:a,duration:d.duration,namespace:bt})}}},logger:t}}var uo=jf;var mo=["kndctr_7742037254C95E840A4C98A6_AdobeOrg_consent","AMCV_7742037254C95E840A4C98A6@AdobeOrg","kndctr_7742037254C95E840A4C98A6_AdobeOrg_cluster","kndctr_7742037254C95E840A4C98A6_AdobeOrg_identity"];var fo=["ad-id"],le={SET_CONSENT:"SetConsent",SEND_EVENT:"SendEvent",GET_IDENTITY:"GetIdentity",AUTHENTICATED_STATE:"AuthenticatedState",ALLOY_CLIENT_INIT:"AlloyClientInit",D2C_VISITOR_ID_CLIENT_INIT:"D2CVisitorIdClientInit",D2C_AD_ID_CLIENT_INIT:"D2CAdIdClientInit",UNKNOWN_ERROR:"UnknownError"},fe={SUCCESS:"Success",FAILURE:"Failures",LATENCY:"Latency",ERROR:"Error"};function Ut(e){"@babel/helpers - typeof";return Ut=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ut(e)}function Eo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ka(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function bo(e,t,r){return t&&Ka(e.prototype,t),r&&Ka(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function pe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Bf={expires:31536e3,path:"/",secure:!0,domain:window.location.hostname,samesite:"Lax"},$f="No params were passed",qf=/^(?:expires|max-age|path|domain|secure)$/i,Ff="Name cannot contain reserved cookie property names";function Re(e,t,r){if(!e)throw new Error($f);var o=Object.assign({},Bf,r);return t||t===""?Gf(e,t,o):Hf(e)}function Gf(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(qf.test(e))throw new Error(Ff);var o="";if(r.expires){var n=new Date;n.setTime(n.getTime()+r.expires*1e3),o=";expires="+n.toUTCString()}document.cookie="".concat(e,"=").concat(t).concat(o,";domain=").concat(r.domain,";path=").concat(r.path,";samesite:").concat(r.samesite,";").concat(r.secure?";secure":"")}function Hf(e){var t=/[.*+?^${}()|[\]\\]/g,r=document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+e.replace(t,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1")||null;return r}var Ue;(function(e){e.ALPHA="ALPHA",e.BETA="BETA",e.GAMMA="GAMMA",e.PROD="PROD",e.DEV="DEV",e.INT_TEST="INT_TEST"})(Ue||(Ue={}));var Ar;(function(e){e.VISITOR="VISITOR",e.ADVERTISEMENT="ADVERTISEMENT"})(Ar||(Ar={}));var Wf={ALPHA:"https://vs-alpha.aws.amazon.com/token",BETA:"https://vs-beta.aws.amazon.com/token",GAMMA:"https://vs-gamma.aws.amazon.com/token",PROD:"https://vs.aws.amazon.com/token",DEV:"https://vs-alpha.aws.amazon.com/token",INT_TEST:"https://vs-beta.aws.amazon.com/token"},zf={ALPHA:"https://vs-alpha.aws.amazon.com/vs/ad-token",BETA:"https://vs-beta.aws.amazon.com/vs/ad-token",GAMMA:"https://vs-gamma.aws.amazon.com/vs/ad-token",PROD:"https://vs.aws.amazon.com/vs/ad-token",DEV:"https://vs-alpha.aws.amazon.com/vs/ad-token",INT_TEST:"https://vs-beta.aws.amazon.com/vs/ad-token"},Yf={ALPHA:"https://alpha.d2c.marketing.aws.a2z.org.cn/vs/token",BETA:"https://beta.d2c.marketing.aws.a2z.org.cn/vs/token",GAMMA:"https://gamma.d2c.marketing.aws.a2z.org.cn/vs/token",PROD:"https://d2c.amazonaws.cn/vs/token",DEV:"https://alpha.d2c.marketing.aws.a2z.org.cn/vs/token",INT_TEST:"https://alpha.d2c.marketing.aws.a2z.org.cn/vs/token"},Ja={"aws-cn":Yf,aws:Wf};function Xf(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.domain||window.location.hostname,r=e.env||Ue.DEV;switch(e.tokenType){case Ar.ADVERTISEMENT:return zf[r];default:return t!=null&&t.endsWith(".cn")?Ja["aws-cn"][r]:Ja.aws[r]}}function ns(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.api||Xf(e),r={};e.token&&(r.token=e.token);var o=performance.now();return t?fetch(t,{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(r),credentials:"include"}).then(function(n){var i,a=performance.now(),s=a-o;(i=e.logger)===null||i===void 0||i.info({timeTakenToFetchVID:String(s)});var c=n;if(!c.ok){var u=new Error("VisitorID service responses with the error status.");throw u.name=c.status.toString(),u}return n.json()}).then(function(n){return n}):Promise.reject(new Error("URL is undefined"))}var is=["ai.awsplayer.com","aicallcenter.awsplayer.com","aipackagetracker.awsplayer.com","aistylist.awsplayer.com","allthingsdistributed.com","amazon.care","amazonaws.com","amazongames.com","amazonevents.com","apn-portal.com","atlas.aws","aws-experience.com","aws-floor11.es","aws-partner-directory.com","aws-portal.amazon.com","aws-startup-lofts.com","aws-startuploft-emea.com","aws.amazon.com","aws.training","awscloud.com","awseducate.com","awsevents.com","awslivestream.com","awsmediamagazine.com","awspartner.com","awssummit.kr","awsthinkbox.com","buildon.aws","calculator.aws","chime.aws","cloudendure.com","codecatalyst.aws","community.aws","constructs.dev","dohy8sp8i3s5p.cloudfront.net","elasticbeanstalk.com","freertos.org","gamedev.amazon.com","iotatlas.io","iotatlas.net","jam.aws.com","java.awsblog.com","learnsecurity.amazon.com","mobile.awsblog.com","newworld.com","opendistro.github.io","partnercentral.awspartner.com","phonetool.amazon.com","protectconnect.com","quicksight.aws","repost.aws","ruby.awsblog.com","sagemaker.readthedocs.io","sagemaker-examples.readthedocs.io","sagemaker-jumpstart-industry-pack.readthedocs.io","sesblog.amazon.com","skillbuilder.aws","smithy.io","startups.aws","thinkboxsoftware.com","amazonaws.cn","amazoncloud.cn","awsevents.cn","webchat-aws.clink.cn"],Ln="awsd2c-token-c",Vn="aws-token-a-c",po=["aws.amazon.com"],Za="awsd2c-token",es="aws-token-a",Qf="AMCV_7742037254C95E840A4C98A6%40AdobeOrg",go=100,Kf=100,as="awsccc",ho="It does not seem your site has onboarded to Shortbread. Onboarding to Shortbread is required for using Visitor ID Service.",ss="awsme_scode";function Tr(e){var t=Jf()||"";return!t||!e||e<=0?!1:parseInt(t,36)%100<e}function Jf(){var e=Re(Qf);if(e==null)return"";var t=decodeURIComponent(e).split("|");if(t.length<2)return"";for(var r=0;r<t.length-1;r++)if(t[r]==="MCMID")return t[r+1];return""}var Zf=function(){function e(){Eo(this,e),pe(this,"cookieValue",void 0),pe(this,"payload",void 0),pe(this,"tokenExpiry",void 0),pe(this,"vid",void 0),po.includes(window.location.hostname)&&Tr(go)?this.cookieValue=Re(Za)||"":this.cookieValue=Re(Ln)||"",this.payload=this.getPayload(),this.vid=this.payload.vid||"",this.tokenExpiry=this.payload.exp||0}return bo(e,[{key:"getValue",value:function(){return this.cookieValue}},{key:"getPayload",value:function(){return this.cookieValue?tp(this.cookieValue):{}}},{key:"hasValidValue",value:function(){return this.vid.length>0&&!rp(this.tokenExpiry)}},{key:"set",value:function(r,o){var n={domain:o||ep(window.location.hostname),expires:31536e3};po.includes(window.location.hostname)&&Tr(go)?this.cookieValue=Re(Za)||"":(Re(Ln,r,n),this.cookieValue=Re(Ln)||""),this.payload=this.getPayload(),this.vid=this.payload.vid||this.vid,this.tokenExpiry=this.payload.exp||this.tokenExpiry}}]),e}();function ep(e){var t=e.replace(/(^\w+:|^)\/\//,"").split(/[/?#]/)[0],r=is.filter(function(o){if(t===o)return!0;var n=new RegExp("(\\.?\\W|^)\\b".concat(o,"\\b$"),"gi");return n.test(t)});return r.length>0?r[0]:t}function tp(e){var t=e.split(".");if(t.length<3)return{};var r=e.split(".")[1];try{return JSON.parse(atob(r))}catch{return{}}}function rp(e){if(!e)return!0;var t=e*1e3;return Date.now()>=t}var cs={};Object.defineProperty(cs,"__esModule",{value:!0});function ts(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,o)}return r}function Vt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ts(Object(r),!0).forEach(function(o){np(e,o,r[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ts(Object(r)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(r,o))})}return e}function xr(){xr=function(){return t};var e,t={},r=Object.prototype,o=r.hasOwnProperty,n=Object.defineProperty||function(N,A,O){N[A]=O.value},i=typeof Symbol=="function"?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(N,A,O){return Object.defineProperty(N,A,{value:O,enumerable:!0,configurable:!0,writable:!0}),N[A]}try{u({},"")}catch{u=function(O,M,U){return O[M]=U}}function l(N,A,O,M){var U=A&&A.prototype instanceof C?A:C,R=Object.create(U.prototype),Z=new we(M||[]);return n(R,"_invoke",{value:re(N,O,Z)}),R}function d(N,A,O){try{return{type:"normal",arg:N.call(A,O)}}catch(M){return{type:"throw",arg:M}}}t.wrap=l;var m="suspendedStart",f="suspendedYield",p="executing",b="completed",w={};function C(){}function I(){}function _(){}var P={};u(P,a,function(){return this});var z=Object.getPrototypeOf,H=z&&z(z(Se([])));H&&H!==r&&o.call(H,a)&&(P=H);var $=_.prototype=C.prototype=Object.create(P);function J(N){["next","throw","return"].forEach(function(A){u(N,A,function(O){return this._invoke(A,O)})})}function se(N,A){function O(U,R,Z,oe){var ce=d(N[U],N,R);if(ce.type!=="throw"){var _e=ce.arg,ke=_e.value;return ke&&Ut(ke)=="object"&&o.call(ke,"__await")?A.resolve(ke.__await).then(function(Ie){O("next",Ie,Z,oe)},function(Ie){O("throw",Ie,Z,oe)}):A.resolve(ke).then(function(Ie){_e.value=Ie,Z(_e)},function(Ie){return O("throw",Ie,Z,oe)})}oe(ce.arg)}var M;n(this,"_invoke",{value:function(R,Z){function oe(){return new A(function(ce,_e){O(R,Z,ce,_e)})}return M=M?M.then(oe,oe):oe()}})}function re(N,A,O){var M=m;return function(U,R){if(M===p)throw Error("Generator is already running");if(M===b){if(U==="throw")throw R;return{value:e,done:!0}}for(O.method=U,O.arg=R;;){var Z=O.delegate;if(Z){var oe=Oe(Z,O);if(oe){if(oe===w)continue;return oe}}if(O.method==="next")O.sent=O._sent=O.arg;else if(O.method==="throw"){if(M===m)throw M=b,O.arg;O.dispatchException(O.arg)}else O.method==="return"&&O.abrupt("return",O.arg);M=p;var ce=d(N,A,O);if(ce.type==="normal"){if(M=O.done?b:f,ce.arg===w)continue;return{value:ce.arg,done:O.done}}ce.type==="throw"&&(M=b,O.method="throw",O.arg=ce.arg)}}}function Oe(N,A){var O=A.method,M=N.iterator[O];if(M===e)return A.delegate=null,O==="throw"&&N.iterator.return&&(A.method="return",A.arg=e,Oe(N,A),A.method==="throw")||O!=="return"&&(A.method="throw",A.arg=new TypeError("The iterator does not provide a '"+O+"' method")),w;var U=d(M,N.iterator,A.arg);if(U.type==="throw")return A.method="throw",A.arg=U.arg,A.delegate=null,w;var R=U.arg;return R?R.done?(A[N.resultName]=R.value,A.next=N.nextLoc,A.method!=="return"&&(A.method="next",A.arg=e),A.delegate=null,w):R:(A.method="throw",A.arg=new TypeError("iterator result is not an object"),A.delegate=null,w)}function Ne(N){var A={tryLoc:N[0]};1 in N&&(A.catchLoc=N[1]),2 in N&&(A.finallyLoc=N[2],A.afterLoc=N[3]),this.tryEntries.push(A)}function Ae(N){var A=N.completion||{};A.type="normal",delete A.arg,N.completion=A}function we(N){this.tryEntries=[{tryLoc:"root"}],N.forEach(Ne,this),this.reset(!0)}function Se(N){if(N||N===""){var A=N[a];if(A)return A.call(N);if(typeof N.next=="function")return N;if(!isNaN(N.length)){var O=-1,M=function U(){for(;++O<N.length;)if(o.call(N,O))return U.value=N[O],U.done=!1,U;return U.value=e,U.done=!0,U};return M.next=M}}throw new TypeError(Ut(N)+" is not iterable")}return I.prototype=_,n($,"constructor",{value:_,configurable:!0}),n(_,"constructor",{value:I,configurable:!0}),I.displayName=u(_,c,"GeneratorFunction"),t.isGeneratorFunction=function(N){var A=typeof N=="function"&&N.constructor;return!!A&&(A===I||(A.displayName||A.name)==="GeneratorFunction")},t.mark=function(N){return Object.setPrototypeOf?Object.setPrototypeOf(N,_):(N.__proto__=_,u(N,c,"GeneratorFunction")),N.prototype=Object.create($),N},t.awrap=function(N){return{__await:N}},J(se.prototype),u(se.prototype,s,function(){return this}),t.AsyncIterator=se,t.async=function(N,A,O,M,U){U===void 0&&(U=Promise);var R=new se(l(N,A,O,M),U);return t.isGeneratorFunction(A)?R:R.next().then(function(Z){return Z.done?Z.value:R.next()})},J($),u($,c,"Generator"),u($,a,function(){return this}),u($,"toString",function(){return"[object Generator]"}),t.keys=function(N){var A=Object(N),O=[];for(var M in A)O.push(M);return O.reverse(),function U(){for(;O.length;){var R=O.pop();if(R in A)return U.value=R,U.done=!1,U}return U.done=!0,U}},t.values=Se,we.prototype={constructor:we,reset:function(A){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(Ae),!A)for(var O in this)O.charAt(0)==="t"&&o.call(this,O)&&!isNaN(+O.slice(1))&&(this[O]=e)},stop:function(){this.done=!0;var A=this.tryEntries[0].completion;if(A.type==="throw")throw A.arg;return this.rval},dispatchException:function(A){if(this.done)throw A;var O=this;function M(_e,ke){return Z.type="throw",Z.arg=A,O.next=_e,ke&&(O.method="next",O.arg=e),!!ke}for(var U=this.tryEntries.length-1;U>=0;--U){var R=this.tryEntries[U],Z=R.completion;if(R.tryLoc==="root")return M("end");if(R.tryLoc<=this.prev){var oe=o.call(R,"catchLoc"),ce=o.call(R,"finallyLoc");if(oe&&ce){if(this.prev<R.catchLoc)return M(R.catchLoc,!0);if(this.prev<R.finallyLoc)return M(R.finallyLoc)}else if(oe){if(this.prev<R.catchLoc)return M(R.catchLoc,!0)}else{if(!ce)throw Error("try statement without catch or finally");if(this.prev<R.finallyLoc)return M(R.finallyLoc)}}}},abrupt:function(A,O){for(var M=this.tryEntries.length-1;M>=0;--M){var U=this.tryEntries[M];if(U.tryLoc<=this.prev&&o.call(U,"finallyLoc")&&this.prev<U.finallyLoc){var R=U;break}}R&&(A==="break"||A==="continue")&&R.tryLoc<=O&&O<=R.finallyLoc&&(R=null);var Z=R?R.completion:{};return Z.type=A,Z.arg=O,R?(this.method="next",this.next=R.finallyLoc,w):this.complete(Z)},complete:function(A,O){if(A.type==="throw")throw A.arg;return A.type==="break"||A.type==="continue"?this.next=A.arg:A.type==="return"?(this.rval=this.arg=A.arg,this.method="return",this.next="end"):A.type==="normal"&&O&&(this.next=O),w},finish:function(A){for(var O=this.tryEntries.length-1;O>=0;--O){var M=this.tryEntries[O];if(M.finallyLoc===A)return this.complete(M.completion,M.afterLoc),Ae(M),w}},catch:function(A){for(var O=this.tryEntries.length-1;O>=0;--O){var M=this.tryEntries[O];if(M.tryLoc===A){var U=M.completion;if(U.type==="throw"){var R=U.arg;Ae(M)}return R}}throw Error("illegal catch attempt")},delegateYield:function(A,O,M){return this.delegate={iterator:Se(A),resultName:O,nextLoc:M},this.method==="next"&&(this.arg=e),w}},t}function op(e,t){if(Ut(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var o=r.call(e,t||"default");if(Ut(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ls(e){var t=op(e,"string");return Ut(t)=="symbol"?t:t+""}function rs(e,t,r,o,n,i,a){try{var s=e[i](a),c=s.value}catch(u){r(u);return}s.done?t(c):Promise.resolve(c).then(o,n)}function us(e){return function(){var t=this,r=arguments;return new Promise(function(o,n){var i=e.apply(t,r);function a(c){rs(i,o,n,a,s,"next",c)}function s(c){rs(i,o,n,a,s,"throw",c)}a(void 0)})}}function vo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function os(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,ls(o.key),o)}}function So(e,t,r){return t&&os(e.prototype,t),r&&os(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function np(e,t,r){return t=ls(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ip="/csds/collector/v1/events/batch",ap="1.0.0",sp="D2CLogger",yo;(function(e){e.INFO="info",e.ERROR="error"})(yo||(yo={}));var cp="logEvent",lp={DEV:"https://aws-mktg-csds-alpha.integ.amazon.com",ALPHA:"https://aws-mktg-csds-alpha.integ.amazon.com",BETA:"https://aws-marketing.integ.amazon.com",GAMMA:"https://aws-marketing-gamma.amazon.com",PROD:"https://aws.amazon.com",INT_TEST:"https://aws.amazon.com"},up={DEV:"https://alpha.d2c.marketing.aws.a2z.org.cn",ALPHA:"https://alpha.d2c.marketing.aws.a2z.org.cn",BETA:"https://beta.d2c.marketing.aws.a2z.org.cn",GAMMA:"https://gamma.d2c.marketing.aws.a2z.org.cn",PROD:"https://d2c.amazonaws.cn",INT_TEST:"https://alpha.d2c.marketing.aws.a2z.org.cn"};function dp(e){return window.location.hostname.endsWith(".cn")?up[e]:lp[e]}var mp=So(function e(t,r,o){vo(this,e),this.batchId=t,this.schemaVersion=r,this.batchEvents=o}),fp=So(function e(t,r,o,n,i){vo(this,e),this.pageURL=t,this.eventType=r,this.eventTimestamp=o,this.customData=n,this.orgId=i});function pp(e,t){return fetch("".concat(e).concat(ip),Vt({method:"POST",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json"}},t)).catch(function(r){console.log(r)})}function gp(e,t){return Un.apply(this,arguments)}function Un(){return Un=us(xr().mark(function e(t,r){var o;return xr().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return o=JSON.stringify(r.batchEventRequest),i.next=3,pp(t,Vt(Vt({},r),{},{body:o}));case 3:return i.abrupt("return",i.sent);case 4:case"end":return i.stop()}},e)})),Un.apply(this,arguments)}var hp=200,yp=function(t){document.addEventListener("visibilitychange",function(){document.visibilityState==="hidden"&&t()})},Ep=function(){function e(t,r){var o=this;vo(this,e),this.logQueue=[],this.flushQueue=function(){o.logQueue.length&&o.sendBatchRequest(!0)},this.maxBatchSize=10,this.baseUrl=dp(t.toUpperCase()),this.orgId=r,yp(this.flushQueue)}return So(e,[{key:"createLog",value:function(r){if(Object.keys(r).length>0){var o=new fp(window.location.toString(),cp,new Date().getTime(),r,this.orgId);if(this.logQueue.push(o),this.logQueue.length===this.maxBatchSize)return this.sendBatchRequest();if(this.batchTimer!==void 0)return this.refreshBatchTimer();this.batchTimer=this.createBatchTimer()}}},{key:"createBatchRequest",value:function(){return new mp(sp,ap,this.logQueue)}},{key:"sendBatchRequest",value:function(){var t=us(xr().mark(function o(){var n,i,a=arguments;return xr().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return n=a.length>0&&a[0]!==void 0?a[0]:!1,i=this.createBatchRequest(),c.next=4,gp(this.baseUrl,{batchEventRequest:i,keepalive:n});case 4:this.logQueue=[],clearTimeout(this.batchTimer);case 6:case"end":return c.stop()}},o,this)}));function r(){return t.apply(this,arguments)}return r}()},{key:"createBatchTimer",value:function(){var r=this;return setTimeout(function(){r.sendBatchRequest()},hp)}},{key:"refreshBatchTimer",value:function(){clearTimeout(this.batchTimer),this.batchTimer=this.createBatchTimer()}}])}(),bp=function(){function e(t,r){vo(this,e),this.batchManager=new Ep(t,r)}return So(e,[{key:"error",value:function(r){r=Vt(Vt({},r),{},{logLevel:yo.ERROR}),this.batchManager.createLog(r)}},{key:"info",value:function(r){r=Vt(Vt({},r),{},{logLevel:yo.INFO}),this.batchManager.createLog(r)}}])}(),ds=cs.AWSD2CLogger=bp;window.AWSMA=window.AWSMA||{};var jn=[],Bn=[],vt;AWSMA.visitorIdReady=function(e){vt&&vt.hasValidValue()?e(vt.getPayload().vid||""):jn.push(e)};AWSMA.tokenReady=function(e){vt&&vt.hasValidValue()&&vt.getValue()?e(vt.getValue()||""):Bn.push(e)};var ms=function(){function e(t){var r;if(Eo(this,e),pe(this,"vidCookie",void 0),pe(this,"visitorId",void 0),pe(this,"visitorToken",void 0),pe(this,"options",void 0),pe(this,"logger",void 0),Re(as)===null)throw console.error(ho),new Error(ho);if(this.options=t,this.vidCookie=new Zf,vt=this.vidCookie,this.visitorId="",this.visitorToken={},!t.cookieAllowed){this.invokeVisitorIdReady(),this.invokeTokenReady();return}this.setVisitorId();var o=Ue[(r=t.env)!==null&&r!==void 0?r:"INT_TEST"];this.logger=new ds(o,ss)}return bo(e,[{key:"getVisitorId",value:function(r){var o=this;this.getVisitorToken({domain:r.domain,onError:r.onError,onSuccess:function(i){i.vid&&typeof r.onSuccess=="function"&&(r.onSuccess(i.vid),o.invokeVisitorIdReady())}})}},{key:"getVisitorToken",value:function(r){var o=this;if(this.vidCookie.getValue()&&this.hasValidVisitorId()){typeof r.onSuccess=="function"&&r.onSuccess(this.visitorToken);return}ns({token:this.vidCookie.getValue(),tokenType:Ar.VISITOR,env:this.options.env,domain:r.domain,logger:this.logger}).then(function(n){n.token&&(o.vidCookie.set(n.token,r.domain),o.setVisitorId(),o.invokeVisitorIdReady(),o.invokeTokenReady()),typeof r.onSuccess=="function"&&r.onSuccess(o.visitorToken)}).catch(function(n){o.invokeVisitorIdReady(),o.invokeTokenReady(),typeof r.onError=="function"&&r.onError(n)})}},{key:"setVisitorId",value:function(){var r=this.vidCookie.getPayload();this.visitorToken=r||{},this.visitorId=r.vid||""}},{key:"hasValidVisitorId",value:function(){return this.vidCookie.hasValidValue()}},{key:"getExistingVisitorId",value:function(){return this.visitorId}},{key:"getExistingVisitorToken",value:function(){return this.visitorToken}},{key:"getExistingToken",value:function(){return this.vidCookie.getValue()}},{key:"invokeVisitorIdReady",value:function(){for(;jn.length>0;){var r=jn.shift();typeof r=="function"&&r(this.visitorId)}}},{key:"invokeTokenReady",value:function(){for(;Bn.length>0;){var r=Bn.shift();typeof r=="function"&&r(this.vidCookie.getValue())}}}]),e}(),vp=function(){function e(){Eo(this,e),pe(this,"cookieValue",void 0),pe(this,"payload",void 0),pe(this,"tokenExpiry",void 0),pe(this,"advertisementId",void 0),po.includes(window.location.hostname)&&Tr(go)?this.cookieValue=Re(es)||"":this.cookieValue=Re(Vn)||"",this.payload=this.getPayload(),this.advertisementId=this.payload.aid||"",this.tokenExpiry=this.payload.exp||0}return bo(e,[{key:"getValue",value:function(){return this.cookieValue}},{key:"getPayload",value:function(){return this.cookieValue?Cp(this.cookieValue):{}}},{key:"hasValidValue",value:function(){return this.advertisementId.length>0&&!wp(this.tokenExpiry)}},{key:"set",value:function(r,o){var n={domain:o||Sp(window.location.hostname),expires:31536e3};po.includes(window.location.hostname)&&Tr(go)?this.cookieValue=Re(es)||"":(Re(Vn,r,n),this.cookieValue=Re(Vn)||""),this.payload=this.getPayload(),this.advertisementId=this.payload.aid||this.advertisementId,this.tokenExpiry=this.payload.exp||this.tokenExpiry}}]),e}();function Sp(e){var t=e.replace(/(^\w+:|^)\/\//,"").split(/[/?#]/)[0],r=is.filter(function(o){if(t===o)return!0;var n=new RegExp("(\\.?\\W|^)\\b".concat(o,"\\b$"),"gi");return n.test(t)});return r.length>0?r[0]:t}function Cp(e){var t=e.split(".");if(t.length<3)return{};var r=e.split(".")[1];try{return JSON.parse(atob(r))}catch{return{}}}function wp(e){if(!e)return!0;var t=e*1e3;return Date.now()>=t}window.AWSMA=window.AWSMA||{};var $n=[],qn=[],St;AWSMA.advertisementIdReady=function(e){St&&St.hasValidValue()?e(St.getPayload().aid||""):$n.push(e)};AWSMA.tokenReady=function(e){St&&St.hasValidValue()&&St.getValue()?e(St.getValue()||""):qn.push(e)};var fs=function(){function e(t){var r;if(Eo(this,e),pe(this,"adIdCookie",void 0),pe(this,"advertisementId",void 0),pe(this,"advertisementToken",void 0),pe(this,"options",void 0),pe(this,"logger",void 0),Re(as)===null)throw console.error(ho),new Error(ho);if(this.options=t,this.adIdCookie=new vp,St=this.adIdCookie,this.advertisementId="",this.advertisementToken={},!t.cookieAllowed){this.invokeAdvertisementIdReady(),this.invokeTokenReady();return}this.setAdvertisementId();var o=Ue[(r=t.env)!==null&&r!==void 0?r:"INT_TEST"];this.logger=new ds(o,ss)}return bo(e,[{key:"getAdvertisementId",value:function(r){var o=this;this.getAdvertisementToken({domain:r.domain,onError:r.onError,onSuccess:function(i){i.aid&&typeof r.onSuccess=="function"&&(r.onSuccess(i.aid),o.invokeAdvertisementIdReady())}})}},{key:"getAdvertisementToken",value:function(r){var o=this;if(Tr(Kf)){if(this.adIdCookie.getValue()&&this.hasValidAdvertisementId()){typeof r.onSuccess=="function"&&r.onSuccess(this.advertisementToken);return}ns({token:this.adIdCookie.getValue(),tokenType:Ar.ADVERTISEMENT,env:this.options.env,domain:r.domain,logger:this.logger}).then(function(n){n.token&&(o.adIdCookie.set(n.token,r.domain),o.setAdvertisementId(),o.invokeAdvertisementIdReady(),o.invokeTokenReady()),typeof r.onSuccess=="function"&&r.onSuccess(o.advertisementToken)}).catch(function(n){o.invokeAdvertisementIdReady(),o.invokeTokenReady(),typeof r.onError=="function"&&r.onError(n)})}}},{key:"setAdvertisementId",value:function(){var r=this.adIdCookie.getPayload();this.advertisementToken=r||{},this.advertisementId=r.aid||""}},{key:"hasValidAdvertisementId",value:function(){return this.adIdCookie.hasValidValue()}},{key:"getExistingAdvertisementId",value:function(){return this.advertisementId}},{key:"getExistingAdvertisementToken",value:function(){return this.advertisementToken}},{key:"getExistingToken",value:function(){return this.adIdCookie.getValue()}},{key:"invokeAdvertisementIdReady",value:function(){for(;$n.length>0;){var r=$n.shift();typeof r=="function"&&r(this.advertisementId)}}},{key:"invokeTokenReady",value:function(){for(;qn.length>0;){var r=qn.shift();typeof r=="function"&&r(this.adIdCookie.getValue())}}}]),e}();var Ip="7742037254C95E840A4C98A6@AdobeOrg",Ap="awsm-csa",Tp="alloy",xp="ee",Op="edge.adobedc.net",Np=new Set(["aws.amazon.com","aws.com"]),ps={Live:"391977e8-1cda-4370-9374-2ce9b691cf05",Staging:"4567b0b8-708f-4650-b494-709415c819d4"},$v={Live:"511c3b4c-5310-4af6-900c-09f1aed3c73d",Staging:"511c3b4c-5310-4af6-900c-09f1aed3c73d"},_p=e=>{let t=e.querySelector(`#${Ap}`),r={env:{stage:"dev"}};if(t===null||!t.dataset.awsmCsaMeta)return r;try{r=JSON.parse(t.dataset.awsmCsaMeta)}catch(o){console.error(o)}return r},kp=(e,t)=>{let{env:r}=t;return Fn(r.stage,e)},Fn=(e,t)=>e==="prod"&&Np.has(t),gs=(e,t,r,o)=>{let n=_p(t),i=kp(e,n)?r.Live:r.Staging;return{name:Tp,dataStreamId:i,organizationId:Ip,defaultConsent:o,edgeBasePath:xp,edgeDomain:Op,stage:n?.env.stage??"dev"}},Gn=e=>{switch(e){case"dev":return Ue.DEV;case"alpha":return Ue.ALPHA;case"beta":return Ue.BETA;case"gamma":return Ue.GAMMA;case"prod":return Ue.PROD;default:return Ue.DEV}};var Or="data-co-mbox",Hn="data-co-mbox-visited",Wn="true";function Dp(){let e=`[${Or}]:not([${Hn}="${Wn}"])`,t=new Set,r=document.body.querySelectorAll(e);return Array.from(r).forEach(n=>{let i=n.getAttribute(Or);i&&(t.add(i),n.setAttribute(Hn,Wn))}),[...t]}var hs=Dp;var Co=class{constructor({format:t,content:r,id:o,scope:n}){this.format=t,this.content=r,this.id=o,this.scope=n}process(){let t=document.querySelector(`[${Or}="${this.scope}"]`);switch(this.format){case"text/html":break;case"text/json":break;default:break}}};function ys(e){if(!e||e.length===0)return null;let t=[];for(let r of e){let{items:o,scope:n}=r;if(!(!o||o.length===0))for(let i of o){let{data:a}=i,{format:s,content:c,id:u}=a,l=new Co({format:s,content:c,id:u,scope:n});try{l.process(),t.push(l)}catch(d){console.error(d)}}}return t}var Te=e=>e==null;var K=e=>!Te(e)&&!Array.isArray(e)&&typeof e=="object";var zn=(...e)=>e.length<2?Object.assign(...e):e.reduce((t,r)=>(K(r)&&Object.keys(r).forEach(o=>{Array.isArray(r[o])?Array.isArray(t[o])?t[o].push(...r[o]):t[o]=[...r[o]]:t[o]=r[o]}),t));/*! js-cookie v3.0.5 | MIT */function wo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)e[o]=r[o]}return e}var Rp={read:function(e){return e[0]==='"'&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function Yn(e,t){function r(n,i,a){if(!(typeof document>"u")){a=wo({},t,a),typeof a.expires=="number"&&(a.expires=new Date(Date.now()+a.expires*864e5)),a.expires&&(a.expires=a.expires.toUTCString()),n=encodeURIComponent(n).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var s="";for(var c in a)a[c]&&(s+="; "+c,a[c]!==!0&&(s+="="+a[c].split(";")[0]));return document.cookie=n+"="+e.write(i,n)+s}}function o(n){if(!(typeof document>"u"||arguments.length&&!n)){for(var i=document.cookie?document.cookie.split("; "):[],a={},s=0;s<i.length;s++){var c=i[s].split("="),u=c.slice(1).join("=");try{var l=decodeURIComponent(c[0]);if(a[l]=e.read(u,l),n===l)break}catch{}}return n?a[n]:a}}return Object.create({set:r,get:o,remove:function(n,i){r(n,"",wo({},i,{expires:-1}))},withAttributes:function(n){return Yn(this.converter,wo({},this.attributes,n))},withConverter:function(n){return Yn(wo({},this.converter,n),this.attributes)}},{attributes:{value:Object.freeze(t)},converter:{value:Object.freeze(e)}})}var st=Yn(Rp,{path:"/"});var Pe={get:st.get.bind(st),set:st.set.bind(st),remove:st.remove.bind(st),withConverter:st.withConverter.bind(st)};var Es=(e,t)=>{Object.keys(t).forEach(r=>{if(K(e[r])&&K(t[r])){Es(e[r],t[r]);return}e[r]=t[r]})},ee=(e,...t)=>{if(Te(e))throw new TypeError('deepAssign "target" cannot be null or undefined');let r=Object(e);return t.forEach(o=>Es(r,Object(o))),r};var ir=(e,t)=>r=>{let n=t.split(".").reduce((i,a)=>(i[a]=i[a]||{},i[a]),e);ee(n,r)};var He=()=>{let e=[];return{add(t){e.push(t)},call(...t){return Promise.all(e.map(r=>r(...t)))}}};var jt=({logger:e,cookieJar:t})=>({...t,set(r,o,n){e.info("Setting cookie",{name:r,value:o,...n}),t.set(r,o,n)}});var Xn=()=>{let e=0,t=Promise.resolve();return{addTask(r){e+=1;let o=()=>r().finally(()=>{e-=1});return t=t.then(o,o),t},get length(){return e}}};var Pp=(()=>{let e=[];for(let t=0;t<256;t++){let r=t;for(let o=0;o<8;o++)r=r&1?3988292384^r>>>1:r>>>1;e.push(r)}return function(t,r){t=unescape(encodeURIComponent(t)),r||(r=0),r=r^-1;for(let o=0;o<t.length;o++){let n=(r^t.charCodeAt(o))&255;r=r>>>8^e[n]}return r=r^-1,r>>>0}})(),Qn=Pp;var ct=()=>{let e={};return e.promise=new Promise((t,r)=>{e.resolve=t,e.reject=r}),e};var Mp=(e,t)=>e===t,Lp=(e,t,r)=>{for(let o=0;o<e.length;o+=1)if(r(e[o],t))return o;return-1},Kn=(e,t=Mp)=>e.filter((r,o)=>Lp(e,r,t)===o);var je=(e,t)=>e.appendChild(t);var Vp=(e,t)=>{Object.keys(t).forEach(r=>{if(r==="style"&&K(t[r])){let o=t[r];Object.keys(o).forEach(n=>{e.style[n]=o[n]})}else e[r]=t[r]})},ge=(e,t={},r={},o=[],n=document)=>{let i=n.createElement(e);return Object.keys(t).forEach(a=>{i.setAttribute(a,t[a])}),Vp(i,r),o.forEach(a=>je(i,a)),i};var bs="BODY",vs="IFRAME",ar="IMG",Ss="DIV",sr="STYLE",cr="SCRIPT",Cs="HEAD";var Jn=({src:e,currentDocument:t=document})=>new Promise((r,o)=>{ge(ar,{src:e},{onload:r,onerror:o,onabort:o},[],t)});var xe=e=>typeof e=="function";var F=e=>Array.isArray(e)&&e.length>0;var Ct=e=>Array.isArray(e)?e:e==null?[]:[].slice.call(e);var Up=/^\s*>/,lr=(e,t)=>Up.test(t)?Ct(e.querySelectorAll(`:scope ${t}`)):Ct(e.querySelectorAll(t));var Io=":shadow";var jp=e=>e.split(Io),Bp=(e,t)=>{let r=t;return r.startsWith(">")?`${e instanceof Element||e instanceof Document?":scope":":host"} ${r}`:r},Zn=(e,t)=>{let r=jp(t);if(r.length<2)return lr(e,t);let o=e;for(let n=0;n<r.length;n+=1){let i=r[n].trim();if(i===""&&o.shadowRoot){o=o.shadowRoot;continue}let a=Bp(o,i),s=lr(o,a);if(s.length===0||!s[0]||!s[0].shadowRoot)return s;o=s[0].shadowRoot}};var ws=e=>e.indexOf(Io)!==-1;var Ee=(e,t=document)=>ws(e)?Zn(t,e):lr(t,e);var Is="MutationObserver",$p="requestAnimationFrame",qp={childList:!0,subtree:!0},Fp="visibilityState",Gp="visible",Hp=100,Wp=5e3,ei=e=>new Error(`Could not find: ${e}`),ti=e=>new Promise(e),zp=e=>xe(e[Is]),Yp=(e,t,r,o,n)=>ti((i,a)=>{let s,c=new e[Is](()=>{let u=n(r);F(u)&&(c.disconnect(),s&&clearTimeout(s),i(u))});s=setTimeout(()=>{c.disconnect(),a(ei(r))},o),c.observe(t,qp)}),Xp=e=>e[Fp]===Gp,Qp=(e,t,r,o)=>ti((n,i)=>{let a=()=>{let s=o(t);if(F(s)){n(s);return}e[$p](a)};a(),setTimeout(()=>{i(ei(t))},r)}),Kp=(e,t,r)=>ti((o,n)=>{let i=()=>{let a=r(e);if(F(a)){o(a);return}setTimeout(i,Hp)};i(),setTimeout(()=>{n(ei(e))},t)}),Nr=(e,t=Ee,r=Wp,o=window,n=document)=>{let i=t(e);return F(i)?Promise.resolve(i):zp(o)?Yp(o,n,e,r,t):Xp(n)?Qp(o,e,r,t):Kp(e,r,t)};var ri=(e,t)=>t.matches?t.matches(e):t.msMatchesSelector(e);var Be=e=>{let t=e.parentNode;return t?t.removeChild(e):null};var Jp={name:"Adobe Alloy"},Zp={style:{display:"none",width:0,height:0}},oi=({appendNode:e=je,awaitSelector:t=Nr,createNode:r=ge,fireImage:o=Jn}={})=>{let n=o,i,a=()=>t(bs).then(([c])=>i||(i=r(vs,Jp,Zp),e(c,i))),s=({src:c})=>a().then(u=>{let l=u.contentWindow.document;return o({src:c,currentDocument:l})});return c=>{let{hideReferrer:u,url:l}=c;return u?s({src:l}):n({src:l})}};var ue=e=>K(e)&&Object.keys(e).length===0;var As=(e,t)=>Te(e)||!K(e)?e:Object.keys(e).reduce((r,o)=>{let n=e[o];if(K(n)){let i=As(n,t);return ue(i)?r:{...r,[o]:i}}return t(n)?{...r,[o]:n}:r},{}),ni=As;var Ao="com.adobe.alloy.";var ii=(e,t)=>e.slice(-t);var To=`${Ao}getTld`,ai=(e,t)=>{let r="",o=e.location.hostname.toLowerCase().split("."),n=1;for(;n<o.length&&!t.get(To);)n+=1,r=ii(o,n).join("."),t.set(To,To,{domain:r});return t.remove(To,{domain:r}),r};var xo="kndctr";var lt=e=>e.replace("@","_");var ut=(e,t)=>`${xo}_${lt(e)}_${t}`;var Bt=(e,t)=>{let r={};return e.forEach(o=>{let n=t(o);r[n]||(r[n]=[]),r[n].push(o)}),r};var Oo="Chrome",No="Edge",_o="EdgeChromium",Ts="Firefox",ko="IE",xs="Safari",Do="Unknown";var Ro=e=>{let t=!1,r;return()=>(t||(t=!0,r=e()),r)};var eg=[Oo,No,_o,ko,Do],si=({getBrowser:e})=>Ro(()=>eg.includes(e()));var Os="identity",Ns="consent",_s="cluster";var _r=({orgId:e})=>{let t=ut(e,Os);return()=>!!Pe.get(t)};var tg=(e,t)=>{let r=Object.keys(e);for(let o=0;o<r.length;o+=1){let n=r[o];if(e[n].test(t))return n}return Do},ci=({userAgent:e})=>Ro(()=>tg({[No]:/Edge\/([0-9\._]+)/,[_o]:/Edg\/([0-9\.]+)/,[Oo]:/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/,[Ts]:/Firefox\/([0-9\.]+)(?:\s|$)/,[ko]:/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/,[xs]:/Version\/([0-9\._]+).*Safari/},e));var ks=(e,t,r)=>({getItem(o){try{return e[t].getItem(r+o)}catch{return null}},setItem(o,n){try{return e[t].setItem(r+o,n),!0}catch{return!1}},clear(){try{return Object.keys(e[t]).forEach(o=>{o.startsWith(r)&&e[t].removeItem(o)}),!0}catch{return!1}}}),$t=e=>t=>{let r=Ao+t;return{session:ks(e,"sessionStorage",r),persistent:ks(e,"localStorage",r)}};var li=(e,t)=>e.filter(r=>t.includes(r));var kr=e=>typeof e=="boolean";var We=e=>typeof e=="number"&&!Number.isNaN(e);var Dr=e=>{let t=parseInt(e,10);return We(t)&&e===t};var ui=(e,t)=>t.indexOf(`${xo}_${lt(e)}_`)===0;var Me=e=>typeof e=="string";var he=e=>Me(e)&&e.length>0;var W=()=>{};var rg=e=>{let t={},r=e.split(".");switch(r.length){case 1:t.subdomain="",t.domain=e,t.topLevelDomain="";break;case 2:t.subdomain="",t.domain=e,t.topLevelDomain=r[1];break;case 3:t.subdomain=r[0]==="www"?"":r[0],t.domain=e,t.topLevelDomain=r[2];break;case 4:t.subdomain=r[0]==="www"?"":r[0],t.domain=e,t.topLevelDomain=`${r[2]}.${r[3]}`;break;default:break}return t},og=e=>{try{let t=new URL(e),r=t.pathname;return!e.endsWith("/")&&r==="/"&&(r=""),{host:t.hostname,path:r,query:t.search.replace(/^\?/,""),anchor:t.hash.replace(/^#/,"")}}catch{return{}}},ng=(e,t=rg)=>{Me(e)||(e="");let r=og(e)||{},{host:o="",path:n="",query:i="",anchor:a=""}=r;return{path:n,query:i,fragment:a,...t(o)}},Po=ng;var di=e=>{if(Te(e)||typeof e!="object")return null;let t=ni(e,r=>Te(r)?!1:!!(kr(r)||We(r)||he(r)||F(r)));return ue(t)?null:t};var Ps=Dn(Rs(),1),ot=Ps.default;var Rr=e=>e instanceof Error?e:new Error(e);var Pr=({error:e,message:t})=>{try{e.message=t}catch{}};var wt=({error:e,message:t})=>{let r=Rr(e),o=`${t}
Caused by: ${r.message}`;return Pr({error:r,message:o}),r};var mi=e=>Me(e)&&e.toLowerCase()==="true";var Le=(e,t)=>{if(We(e)||Me(e)){let r=Math.round(Number(e));if(!Number.isNaN(r))return r}return t};var It=(e,t,r)=>`${e}`.padStart(t,r),fi=e=>{let t=e.getFullYear(),r=It(e.getMonth()+1,2,"0"),o=It(e.getDate(),2,"0"),n=It(e.getHours(),2,"0"),i=It(e.getMinutes(),2,"0"),a=It(e.getSeconds(),2,"0"),s=It(e.getMilliseconds(),3,"0"),c=Le(e.getTimezoneOffset(),0),u=c>0?"-":"+",l=It(Math.floor(Math.abs(c)/60),2,"0"),d=It(Math.abs(c)%60,2,"0");return`${t}-${r}-${o}T${n}:${i}:${a}.${s}${u}${l}:${d}`};var be=[];for(let e=0;e<256;++e)be.push((e+256).toString(16).slice(1));function Ms(e,t=0){return(be[e[t+0]]+be[e[t+1]]+be[e[t+2]]+be[e[t+3]]+"-"+be[e[t+4]]+be[e[t+5]]+"-"+be[e[t+6]]+be[e[t+7]]+"-"+be[e[t+8]]+be[e[t+9]]+"-"+be[e[t+10]]+be[e[t+11]]+be[e[t+12]]+be[e[t+13]]+be[e[t+14]]+be[e[t+15]]).toLowerCase()}var pi,sg=new Uint8Array(16);function gi(){if(!pi){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");pi=crypto.getRandomValues.bind(crypto)}return pi(sg)}var cg=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),hi={randomUUID:cg};function lg(e,t,r){if(hi.randomUUID&&!t&&!e)return hi.randomUUID();e=e||{};let o=e.random??e.rng?.()??gi();if(o.length<16)throw new Error("Random bytes length must be >= 16");if(o[6]=o[6]&15|64,o[8]=o[8]&63|128,t){if(r=r||0,r<0||r+16>t.length)throw new RangeError(`UUID byte range ${r}:${r+15} is out of buffer bounds`);for(let n=0;n<16;++n)t[r+n]=o[n];return t}return Ms(o)}var yi=lg;var dt=yi;var Ls=e=>function(r,o){return r==null?r:e.call(this,r,o)},Vs=(e,t)=>function(o,n){return t.call(this,e.call(this,o,n),n)},ug=(e,t)=>function(o,n){let i=[],a=[e,t].reduce((s,c)=>{try{return c.call(this,s,n)}catch(u){return i.push(u),s}},o);if(i.length)throw new Error(i.join(`
`));return a},Mr=(e,t,r)=>Object.assign(Vs(e,t),e,r),ne=(e,t,r)=>Object.assign(Vs(e,Ls(t)),e,r),Us=(e,t,r)=>Object.assign(ug(Ls(t),e),e,r),G=(e,t,r,o)=>{if(!e)throw new Error(`'${r}': Expected ${o}, but got ${JSON.stringify(t)}.`)};var js=(e,t)=>(G(kr(e),e,t,"true or false"),e);var Bs=(e,t)=>(G(xe(e),e,t,"a function"),e);var $s=(e,t)=>function(o,n){let i,a=e.find(s=>{try{return i=s.call(this,o,n),!0}catch{return!1}});return G(a,o,n,t),i};var qs=e=>function(r,o){G(Array.isArray(r),r,o,"an array");let n=[],i=r.map((a,s)=>{try{return e.call(this,a,`${o}[${s}]`,r)}catch(c){n.push(c.message);return}});if(n.length)throw new Error(n.join(`
`));return i};var Fs=e=>t=>t??e;var Gs=(e="This field has been deprecated")=>function(r,o){let n=e;return r!==void 0&&(o&&(n=`'${o}': ${n}`),this&&this.logger&&this.logger.warn(n)),r};var Hs=e=>(t,r)=>(G(t===e,t,r,`${e}`),t);var Ws=e=>function(r,o){G(K(r),r,o,"an object");let n=[],i={};if(Object.keys(r).forEach(a=>{let s=r[a],c=o?`${o}.${a}`:a;try{let u=e.call(this,s,c);u!==void 0&&(i[a]=u)}catch(u){n.push(u.message)}}),n.length)throw new Error(n.join(`
`));return i};var Ei=(e,t)=>(r,o)=>(G(r>=t,r,o,`${e} greater than or equal to ${t}`),r);var zs=(e,t)=>(r,o)=>(G(r<=t,r,o,`${e} less than or equal to ${t}`),r);var Ys=e=>(t,r)=>{let o=[];if(Object.keys(t).forEach(n=>{if(!e[n]){let i=r?`${r}.${n}`:n;o.push(`'${i}': Unknown field.`)}}),o.length)throw new Error(o.join(`
`));return t};var Mo=e=>(t,r)=>(K(t)?G(!ue(t),t,r,e):G(t.length>0,t,r,e),t);var Xs=e=>function(r,o){G(K(r),r,o,"an object");let n=[],i={};if(Object.keys(e).forEach(a=>{let s=r[a],c=e[a],u=o?`${o}.${a}`:a;try{let l=c.call(this,s,u);l!==void 0&&(i[a]=l)}catch(l){n.push(l.message)}}),Object.keys(r).forEach(a=>{Object.prototype.hasOwnProperty.call(i,a)||(i[a]=r[a])}),n.length)throw new Error(n.join(`
`));return i};var Qs=(e,t,r)=>function(n,i){G(K(n),n,i,"an object");let{[e]:a,[r]:s,...c}=n,u=t(a,i);if(u!==void 0){let l=`The field '${e}' is deprecated. Use '${r}' instead.`;if(i&&(l=`'${i}': ${l}`),s!==void 0&&s!==u)throw new Error(l);this&&this.logger&&this.logger.warn(l)}return{[r]:s||u,...c}};var Ks=()=>{let e=[];return(t,r)=>(G(e.indexOf(t)===-1,t,r,"a unique value across instances"),e.push(t),t)};var Js=e=>{let t=Object.create(null);for(let r=0;r<e.length;r+=1){let o=e[r];if(o in t)return!1;t[o]=!0}return!0};var Zs=()=>(e,t)=>(G(Js(e),e,t,"array values to be unique"),e);var dg=/^[a-z0-9.-]{1,}$/i,ec=(e,t)=>(G(dg.test(e),e,t,"a valid domain"),e);var tc=(e,t)=>(G(Dr(e),e,t,"an integer"),e);var rc=(e,t)=>(G(We(e),e,t,"a number"),e);var oc=e=>{try{return RegExp(e)!==null}catch{return!1}};var nc=(e,t)=>(G(oc(e),e,t,"a regular expression"),e);var ic=(e,t)=>{if(e==null)throw new Error(`'${t}' is a required option`);return e};var ac=(e,t)=>(G(Me(e),e,t,"a string"),e);var sc=e=>(t,r)=>(G(e.test(t),t,r,`does not match the ${e.toString()}`),t);var Ve=e=>e;Ve.default=function(t){return Mr(this,Fs(t))};Ve.required=function(){return Mr(this,ic)};Ve.deprecated=function(t){return Mr(this,Gs(t))};var mg=function(){return ne(this,ec)},fg=function(t){return ne(this,Ei("an integer",t))},pg=function(t){return ne(this,Ei("a number",t))},gg=function(t){return ne(this,zs("a number",t))},hg=function(){return ne(this,tc,{minimum:fg})},yg=function(){return ne(this,Mo("a non-empty string"))},Eg=function(){return ne(this,Mo("a non-empty array"))},cc=function(){return ne(this,Mo("a non-empty object"))},bg=function(){return ne(this,nc)},vg=function(t){return ne(this,sc(t))},lc=function(){return ne(this,Ks())},Sg=function(){return ne(this,Zs())},Cg=function(t,r){return Mr(this,$s(t,r))},wg=function(){return this},Ig=function(t){return ne(this,qs(t),{nonEmpty:Eg,uniqueItems:Sg})},Ag=function(){return ne(this,js)},Tg=function(){return ne(this,Bs)},xg=function(t){return ne(this,Hs(t))},Og=function(){return ne(this,rc,{minimum:pg,maximum:gg,integer:hg,unique:lc})},Ng=function(t){return ne(this,Ws(t),{nonEmpty:cc})},uc=e=>({noUnknownFields:function(){return ne(this,Ys(e))},nonEmpty:cc,concat:function(r){let o={...e,...r.schema};return ne(this,r,uc(o))},renamed:function(r,o,n){return Us(this,Qs(r,o,n))},schema:e}),_g=function(t){return ne(this,Xs(t),uc(t))},kg=function(){return ne(this,ac,{regexp:bg,domain:mg,nonEmpty:yg,unique:lc,matches:vg})},At=Cg.bind(Ve),$e=wg.bind(Ve),te=Ig.bind(Ve),X=Ag.bind(Ve),ze=Tg.bind(Ve),bi=xg.bind(Ve),me=Og.bind(Ve),Lo=Ng.bind(Ve),x=_g.bind(Ve),k=kg.bind(Ve),mt=function(...t){return At(t.map(bi),`one of these values: ${JSON.stringify(t)}`)};var dc="ambiguous",mc="authenticated",fc="loggedOut";var Lr=Lo(te(x({authenticatedState:mt(dc,mc,fc),id:k(),namespace:x({code:k()}).noUnknownFields(),primary:X(),xid:k()}).noUnknownFields()).required());var Ye=x({});var vi="alloy_debug";var Si=({console:e,locationSearch:t,createLogger:r,instanceName:o,createNamespacedStorage:n,getMonitors:i})=>{let a=ot.parse(t),s=n(`instance.${o}.`),c=s.session.getItem("debug"),u=c==="true",l=c===null,d=()=>u,m=(f,{fromConfig:p})=>{(!p||l)&&(u=f),p||(s.session.setItem("debug",f.toString()),l=!1)};return a[vi]!==void 0&&m(mi(a[vi]),{fromConfig:!1}),{setDebugEnabled:m,logger:r({getDebugEnabled:d,context:{instanceName:o},getMonitors:i,console:e}),createComponentLogger(f){return r({getDebugEnabled:d,context:{instanceName:o,componentName:f},getMonitors:i,console:e})}}};var Dg=["onComponentsRegistered","onBeforeEvent","onBeforeRequest","onResponse","onRequestFailure","onClick","onDecision"],Rg=(e,t)=>(...r)=>Promise.all(e.getLifecycleCallbacks(t).map(o=>new Promise(n=>{n(o(...r))}))),Pg=e=>(...t)=>Promise.resolve().then(()=>e(...t)),pc=e=>Dg.reduce((t,r)=>(t[r]=Pg(Rg(e,r)),t),{});var gc=(e,t)=>(...r)=>{let o;try{o=e(...r)}catch(n){throw wt({error:n,message:t})}return o instanceof Promise&&(o=o.catch(n=>{throw wt({error:n,message:t})})),o},hc=()=>{let e={},t={},r={},o=(i,a={})=>{let s=li(Object.keys(t),Object.keys(a));if(s.length)throw new Error(`[ComponentRegistry] Could not register ${i} because it has existing command(s): ${s.join(",")}`);Object.keys(a).forEach(c=>{let u=a[c];u.commandName=c,u.run=gc(u.run,`[${i}] An error occurred while executing the ${c} command.`),t[c]=u})},n=(i,a={})=>{Object.keys(a).forEach(s=>{r[s]=r[s]||[],r[s].push(gc(a[s],`[${i}] An error occurred while executing the ${s} lifecycle hook.`))})};return{register(i,a){let{commands:s,lifecycle:c}=a;o(i,s),n(i,c),e[i]=a},getCommand(i){return t[i]},getCommandNames(){return Object.keys(t)},getLifecycleCallbacks(i){return r[i]||[]},getComponentNames(){return Object.keys(e)}}};var yc=({logger:e,sendFetchRequest:t,sendBeaconRequest:r,isRequestRetryable:o,getRequestRetryDelay:n})=>({requestId:i,url:a,payload:s,useSendBeacon:c})=>{let u=JSON.stringify(s),l=JSON.parse(u);e.logOnBeforeNetworkRequest({url:a,requestId:i,payload:l});let d=(m=0)=>(c?r:t)(a,u).then(p=>{if(o({response:p,retriesAttempted:m})){let C=n({response:p,retriesAttempted:m});return new Promise(I=>{setTimeout(()=>{I(d(m+1))},C)})}let w;try{w=JSON.parse(p.body)}catch{}return e.logOnNetworkResponse({requestId:i,url:a,payload:l,...p,parsedBody:w,retriesAttempted:m}),{statusCode:p.statusCode,body:p.body,parsedBody:w,getHeader:p.getHeader}});return d().catch(m=>{throw e.logOnNetworkError({requestId:i,url:a,payload:l,error:m}),wt({error:m,message:"Network request failed."})})};var Ec=({logger:e})=>t=>{if(t){let r=t.split(";");if(r.length>=2&&r[1].length>0)try{let o=parseInt(r[1],10);if(!Number.isNaN(o))return{regionId:o}}catch{}e.warn(`Invalid adobe edge: "${t}"`)}return{}};var Vr="in",ur="out",Vo="pending";var Tt="general";var wi="declinedConsent",Ur="default",Uo="initial",jo="new",Ci=e=>{let t=new Error(e);return t.code=wi,t.message=e,t},bc=({logger:e})=>{let t=[],r=()=>{for(;t.length;)t.shift().resolve()},o=()=>{for(;t.length;)t.shift().reject(Ci("The user declined consent."))},n=()=>Promise.resolve(),i=()=>Promise.resolve(),a=()=>Promise.resolve(),s=()=>Promise.reject(Ci("No consent preferences have been set.")),c=()=>Promise.reject(Ci("The user declined consent.")),u=l=>{if(l)return Promise.reject(new Error("Consent is pending."));let d=ct();return t.push(d),d.promise};return{in(l){l===Ur?this.awaitConsent=i:(l===Uo?e.info("Loaded user consent preferences. The user previously consented."):l===jo&&this.awaitConsent!==a&&e.info("User consented."),r(),this.awaitConsent=a)},out(l){l===Ur?(e.warn("User consent preferences not found. Default consent of out will be used."),this.awaitConsent=s):(l===Uo?e.warn("Loaded user consent preferences. The user previously declined consent."):l===jo&&this.awaitConsent!==c&&e.warn("User declined consent."),o(),this.awaitConsent=c)},pending(l){l===Ur&&e.info("User consent preferences not found. Default consent of pending will be used. Some commands may be delayed."),this.awaitConsent=u},awaitConsent:n,withConsent(){return this.awaitConsent(!0)},current(){switch(this.awaitConsent){case i:return{state:"in",wasSet:!1};case a:return{state:"in",wasSet:!0};case s:return{state:"out",wasSet:!1};case c:return{state:"out",wasSet:!0};case u:return{state:"pending",wasSet:!1};default:return{state:"in",wasSet:!1}}}}};var vc=({generalConsentState:e,logger:t})=>{let r=(o,n)=>{switch(o[Tt]){case Vr:e.in(n);break;case ur:e.out(n);break;case Vo:e.pending(n);break;default:t.warn(`Unknown consent value: ${o[Tt]}`);break}};return{initializeConsent(o,n){n[Tt]?r(n,Uo):r(o,Ur)},setConsent(o){r(o,jo)},suspend(){e.pending()},awaitConsent(){return e.awaitConsent()},withConsent(){return e.withConsent()},current(){return e.current()}}};var Sc=e=>e&&e._experience&&e._experience.decisioning&&F(e._experience.decisioning.propositions)?e._experience.decisioning.propositions:[],Cc=()=>{let e={},t,r,o=!1,n=!1,i=!0,a=c=>{if(n)throw new Error(`${c} cannot be called after event is finalized.`)},s={hasQuery(){return Object.prototype.hasOwnProperty.call(this.getContent(),"query")},getContent(){let c=JSON.parse(JSON.stringify(e));return t&&ee(c,{xdm:t}),r&&ee(c,{data:r}),c},setUserXdm(c){a("setUserXdm"),t=c},setUserData(c){a("setUserData"),r=c},mergeXdm(c){a("mergeXdm"),c&&ee(e,{xdm:c})},mergeData(c){a("mergeData"),c&&ee(e,{data:c})},mergeMeta(c){a("mergeMeta"),c&&ee(e,{meta:c})},mergeQuery(c){a("mergeQuery"),c&&ee(e,{query:c})},documentMayUnload(){o=!0},finalize(c){if(n)return;let u=Kn([...Sc(t),...Sc(e.xdm)],(l,d)=>l===d||l.id&&d.id&&l.id===d.id&&l.scope&&d.scope&&l.scope===d.scope);if(t&&this.mergeXdm(t),u.length>0&&(e.xdm._experience.decisioning.propositions=u),r&&s.mergeData(r),n=!0,c){i=!1;let l={xdm:e.xdm||{},data:e.data||{}};i=c(l)!==!1,e.xdm=l.xdm||{},e.data=l.data||{},ue(e.xdm)&&delete e.xdm,ue(e.data)&&delete e.data}},getDocumentMayUnload(){return o},isEmpty(){return ue(e)&&(!t||ue(t))&&(!r||ue(r))},shouldSend(){return i},getViewName(){if(!(!t||!t.web||!t.web.webPageDetails))return t.web.webPageDetails.viewName},toJSON(){if(!n)throw new Error("toJSON called before finalize");return e}};return s};var wc="Retry-After",Ic="x-adobe-edge";var Ac=({extractEdgeInfo:e})=>({content:t={},getHeader:r})=>{let{handle:o=[],errors:n=[],warnings:i=[]}=t;return{getPayloadsByType(a){return o.filter(s=>s.type===a).flatMap(s=>s.payload)},getErrors(){return n},getWarnings(){return i},getEdge(){return e(r(Ic))},toJSON(){return t}}};var jr="configure",dr="setDebug";var Tc=({logger:e,configureCommand:t,setDebugCommand:r,handleError:o,validateCommandOptions:n})=>{let i,a=(s,c)=>{let u;if(s===jr){if(i)throw new Error("The library has already been configured and may only be configured once.");u=()=>(i=t(c),i.then(()=>{}))}else{if(!i)throw new Error("The library must be configured first. Please do so by executing the configure command.");s===dr?u=()=>{let l=x({enabled:X().required()}).noUnknownFields(),d=n({command:{commandName:dr,optionsValidator:l},options:c});r(d)}:u=()=>i.then(l=>{let d=l.getCommand(s);if(!d||!xe(d.run)){let f=[jr,dr].concat(l.getCommandNames()).join(", ");throw new Error(`The ${s} command does not exist. List of available commands: ${f}.`)}let m=n({command:d,options:c});return d.run(m)},()=>(e.warn(`An error during configuration is preventing the ${s} command from executing.`),new Promise(()=>{})))}return u};return(s,c={})=>new Promise(u=>{let l=a(s,c);e.logOnBeforeCommand({commandName:s,options:c}),u(l())}).catch(u=>o(u,`${s} command`)).catch(u=>{throw e.logOnCommandRejected({commandName:s,options:c,error:u}),u}).then(u=>{let l=K(u)?u:{};return e.logOnCommandResolved({commandName:s,options:c,result:l}),l})};var Mg="https://adobe.ly/3sHgQHb",xc=({command:e,options:t})=>{let{commandName:r,documentationUri:o=Mg,optionsValidator:n}=e,i=t;if(n)try{i=n(t)}catch(a){let s=`Invalid ${r} command options:
	 - ${a} For command documentation see: ${o}`;throw new Error(s)}return i};var Lg="https://adobe.ly/3sHh553",Vg=({combinedConfigValidator:e,options:t,logger:r})=>{try{return e.noUnknownFields().required().call({logger:r},t)}catch(o){throw new Error(`Resolve these configuration problems:
	 - ${o.message.split(`
`).join(`
	 - `)}
For configuration documentation see: ${Lg}`)}},Ug=(e,t,r)=>r.reduce((o,{buildOnInstanceConfiguredExtraParams:n})=>(n&&(o={...o,...n({config:e,logger:t})}),o),{}),jg=e=>{let t=[],r={get enabled(){return e.enabled},flush(){t.forEach(({method:o,args:n})=>e[o](...n))}};return Object.keys(e).filter(o=>typeof e[o]=="function").forEach(o=>{r[o]=(...n)=>{t.push({method:o,args:n})}}),r},Oc=({options:e,componentCreators:t,coreConfigValidators:r,createConfig:o,logger:n,setDebugEnabled:i})=>{let a=jg(n),s=t.map(({configValidators:l})=>l).filter(l=>l).reduce((l,d)=>l.concat(d),r),c=o(Vg({combinedConfigValidator:s,options:e,logger:a}));i(c.debugEnabled,{fromConfig:!0}),a.flush();let u=Ug(c,n,t);return n.logOnInstanceConfigured({...u,config:c}),c};var Nc=({componentCreators:e,lifecycle:t,componentRegistry:r,getImmediatelyAvailableTools:o})=>(e.forEach(n=>{let{namespace:i}=n,a=o(i),s;try{s=n(a)}catch(c){throw wt({error:c,message:`[${i}] An error occurred during component creation.`})}r.register(i,s)}),t.onComponentsRegistered({lifecycle:t}).then(()=>r));var Bg=e=>({...e}),_c=Bg;var kc="edge.adobedc.net",Dc="adobedc.demdex.net";var Rc="ee";var Pc=()=>x({debugEnabled:X().default(!1),datastreamId:k().unique().required(),edgeDomain:k().domain().default(kc),edgeBasePath:k().nonEmpty().default(Rc),orgId:k().unique().required(),onBeforeEventSend:ze().default(W),edgeConfigOverrides:Ye}).renamed("edgeConfigId",k().unique(),"datastreamId");var Ii=({errorPrefix:e,logger:t})=>(r,o)=>{let n=Rr(r);if(n.code===wi)return t.warn(`The ${o} could not fully complete. ${n.message}`),{};throw Pr({error:n,message:`${e} ${n.message}`}),n};var Mc=({fetch:e})=>(t,r)=>e(t,{method:"POST",cache:"no-cache",credentials:"include",headers:{"Content-Type":"text/plain; charset=UTF-8"},referrerPolicy:"no-referrer-when-downgrade",body:r}).then(o=>o.text().then(n=>({statusCode:o.status,getHeader(i){return o.headers.get(i)},body:n})));var Lc=({sendBeacon:e,sendFetchRequest:t,logger:r})=>(o,n)=>{let i=new Blob([n],{type:"text/plain; charset=UTF-8"});return e(o,i)?Promise.resolve({statusCode:204,getHeader(){return null},body:""}):(r.info("Unable to use `sendBeacon`; falling back to `fetch`."),t(o,n))};var Ai=({getDebugEnabled:e,console:t,getMonitors:r,context:o})=>{let n=`[${o.instanceName}]`;o.componentName&&(n+=` [${o.componentName}]`);let i=(s,c)=>{let u=r();if(u.length>0){let l={...o,...c};u.forEach(d=>{d[s]&&d[s](l)})}},a=(s,...c)=>{i("onBeforeLog",{level:s,arguments:c}),e()&&t[s](n,...c)};return{get enabled(){return r().length>0||e()},logOnInstanceCreated(s){i("onInstanceCreated",s),a("info","Instance initialized.")},logOnInstanceConfigured(s){i("onInstanceConfigured",s),a("info","Instance configured. Computed configuration:",s.config)},logOnBeforeCommand(s){i("onBeforeCommand",s),a("info",`Executing ${s.commandName} command. Options:`,s.options)},logOnCommandResolved(s){i("onCommandResolved",s),a("info",`${s.commandName} command resolved. Result:`,s.result)},logOnCommandRejected(s){i("onCommandRejected",s),a("error",`${s.commandName} command was rejected. Error:`,s.error)},logOnBeforeNetworkRequest(s){i("onBeforeNetworkRequest",s),a("info",`Request ${s.requestId}: Sending request.`,s.payload)},logOnNetworkResponse(s){i("onNetworkResponse",s);let c=s.parsedBody||s.body?"response body:":"no response body.";a("info",`Request ${s.requestId}: Received response with status code ${s.statusCode} and ${c}`,s.parsedBody||s.body)},logOnNetworkError(s){i("onNetworkError",s),a("error",`Request ${s.requestId}: Network request failed.`,s.error)},logOnContentHiding(s){i("onContentHiding",{status:s.status}),a(s.logLevel,s.message)},logOnContentRendering(s){i("onContentRendering",{status:s.status,payload:s.detail}),a(s.logLevel,s.message)},info:a.bind(null,"info"),warn:a.bind(null,"warn"),error:a.bind(null,"error")}};var qe="__view__";var Br=e=>(t,r)=>{e.xdm=e.xdm||{},e.xdm.identityMap=e.xdm.identityMap||{},e.xdm.identityMap[t]=e.xdm.identityMap[t]||[],e.xdm.identityMap[t].push(r)};var ft=e=>{let{payload:t,getAction:r,getUseSendBeacon:o,datastreamIdOverride:n,edgeSubPath:i}=e,a=dt(),s=!1,c=!1;return{getId(){return a},getPayload(){return t},getAction(){return r({isIdentityEstablished:c})},getDatastreamIdOverride(){return n},getUseSendBeacon(){return o({isIdentityEstablished:c})},getEdgeSubPath(){return i||""},getUseIdThirdPartyDomain(){return s},setUseIdThirdPartyDomain(){s=!0},setIsIdentityEstablished(){c=!0}}};var Ti=({payload:e,datastreamIdOverride:t})=>{let r=({isIdentityEstablished:o})=>e.getDocumentMayUnload()&&o;return ft({payload:e,getAction({isIdentityEstablished:o}){return r({isIdentityEstablished:o})?"collect":"interact"},getUseSendBeacon:r,datastreamIdOverride:t})};var qt=e=>{let{content:t,addIdentity:r,hasIdentity:o}=e,n=ir(t,"meta.configOverrides");return{mergeMeta:ir(t,"meta"),mergeState:ir(t,"meta.state"),mergeQuery:ir(t,"query"),mergeConfigOverride:i=>n(di(i)),addIdentity:r,hasIdentity:o,toJSON(){return t}}};var $r=e=>t=>(e.xdm&&e.xdm.identityMap&&e.xdm.identityMap[t])!==void 0;var qr=()=>{let e={},t=qt({content:e,addIdentity:Br(e),hasIdentity:$r(e)});return t.addEvent=r=>{e.events=e.events||[],e.events.push(r)},t.getDocumentMayUnload=()=>(e.events||[]).some(r=>r.getDocumentMayUnload()),t};var Ft=({localConfigOverrides:e,globalConfigOverrides:t,payload:r})=>{let o={payload:r},{datastreamId:n,...i}=e||{};return n&&(o.datastreamIdOverride=n),t&&!ue(t)&&r.mergeConfigOverride(t),i&&!ue(i)&&r.mergeConfigOverride(i),o};var $g="adb_validation_sessionid",qg="validation.",Vc="clientId",Fg=e=>{let t=e.persistent.getItem(Vc);return t||(t=dt(),e.persistent.setItem(Vc,t)),t},xi=({window:e,createNamespacedStorage:t})=>{let r=t(qg);return()=>{let n=ot.parse(e.location.search)[$g];if(!n)return"";let i=Fg(r),a=`${n}|${i}`;return`&${ot.stringify({adobeAepValidationToken:a})}`}};var Uc="Event was canceled because the onBeforeEventSend callback returned false.",jc=({config:e,logger:t,lifecycle:r,consent:o,createEvent:n,createDataCollectionRequestPayload:i,createDataCollectionRequest:a,sendEdgeNetworkRequest:s,applyResponse:c})=>{let{onBeforeEventSend:u,edgeConfigOverrides:l}=e;return{createEvent:n,sendEvent(d,m={}){let{edgeConfigOverrides:f,...p}=m,b=Ft({payload:i(),localConfigOverrides:f,globalConfigOverrides:l}),w=a(b),C=He(),I=He();return r.onBeforeEvent({...p,event:d,onResponse:C.add,onRequestFailure:I.add}).then(()=>(b.payload.addEvent(d),o.awaitConsent())).then(()=>{try{d.finalize(u)}catch(_){let P=()=>{throw _};return I.add(r.onRequestFailure),I.call({error:_}).then(P,P)}if(!d.shouldSend()){I.add(r.onRequestFailure),t.info(Uc);let _=new Error(Uc);return I.call({error:_}).then(()=>{})}return s({request:w,runOnResponseCallbacks:C.call,runOnRequestFailureCallbacks:I.call})})},applyResponse(d,m={}){let{renderDecisions:f=!1,decisionContext:p={},responseHeaders:b={},responseBody:w={handle:[]},personalization:C}=m,I=i(),_=a({payload:I}),P=He();return r.onBeforeEvent({event:d,renderDecisions:f,decisionContext:p,decisionScopes:[qe],personalization:C,onResponse:P.add,onRequestFailure:W}).then(()=>(I.addEvent(d),c({request:_,responseHeaders:b,responseBody:w,runOnResponseCallbacks:P.call})))}}};var Gg="state:store",Bc=({cookieJar:e,shouldTransferCookie:t,apexDomain:r,dateProvider:o})=>({cookiesToPayload(n,i){let a=r!==""&&i.endsWith(r),s={domain:r,cookiesEnabled:!0};if(!a){let c=e.get(),u=Object.keys(c).filter(t).map(l=>({key:l,value:c[l]}));u.length&&(s.entries=u)}n.mergeState(s)},responseToCookies(n){n.getPayloadsByType(Gg).forEach(i=>{let a={domain:r},s=i.attrs&&i.attrs.SameSite&&i.attrs.SameSite.toLowerCase();i.maxAge!==void 0&&(a.expires=new Date(o().getTime()+i.maxAge*1e3)),s!==void 0&&(a.sameSite=s),s==="none"&&(a.secure=!0),e.set(i.key,i.value,a)})}});var $c="mboxEdgeCluster",qc="at_qa_mode",Fc="mbox";var Gc=({orgId:e,targetMigrationEnabled:t})=>r=>ui(e,r)||r===qc||t&&r===Fc;var Hc="v1";var Hg="TypeError",Wg="NetworkError",Wc=e=>e.name===Hg||e.name===Wg||e.status===0;var Bo=e=>{let t=e.shift()||[],r=e.shift()||[],o=e;return zn({},...t,...r,...o)};var $o=e=>t=>{let r=()=>{throw t};return e.call({error:t}).then(r,r)};var zg=(e,t)=>t.getUseIdThirdPartyDomain()&&Wc(e),zc=({config:e,lifecycle:t,cookieTransfer:r,sendNetworkRequest:o,createResponse:n,processWarningsAndErrors:i,getLocationHint:a,getAssuranceValidationTokenParams:s})=>{let{edgeDomain:c,edgeBasePath:u,datastreamId:l}=e,d=!1,m=(f,p)=>{let b=a(),w=b?`${u}/${b}${p.getEdgeSubPath()}`:`${u}${p.getEdgeSubPath()}`,C=p.getDatastreamIdOverride()||l;return C!==l&&p.getPayload().mergeMeta({sdkConfig:{datastream:{original:l}}}),`https://${f}/${w}/${Hc}/${p.getAction()}?configId=${C}&requestId=${p.getId()}${s()}`};return({request:f,runOnResponseCallbacks:p=W,runOnRequestFailureCallbacks:b=W})=>{let w=He();w.add(t.onResponse),w.add(p);let C=He();return C.add(t.onRequestFailure),C.add(b),t.onBeforeRequest({request:f,onResponse:w.add,onRequestFailure:C.add}).then(()=>{let I=d||!f.getUseIdThirdPartyDomain()?c:Dc,_=m(I,f),P=f.getPayload();return r.cookiesToPayload(P,I),o({requestId:f.getId(),url:_,payload:P,useSendBeacon:f.getUseSendBeacon()})}).then(I=>(i(I),I)).catch(I=>{if(zg(I,f)){d=!0,f.setUseIdThirdPartyDomain(!1);let _=m(c,f),P=f.getPayload();return r.cookiesToPayload(P,c),o({requestId:f.getId(),url:_,payload:P,useSendBeacon:f.getUseSendBeacon()})}return $o(C)(I)}).then(({parsedBody:I,getHeader:_})=>{let P=n({content:I,getHeader:_});return r.responseToCookies(P),w.call({response:P}).then(Bo)})}};var Oi="The server responded with a",Yc=({logger:e})=>t=>{let{statusCode:r,body:o,parsedBody:n}=t;if(r<200||r>=300||!n&&r!==204||n&&!Array.isArray(n.handle)){let i=n?JSON.stringify(n,null,2):o,a=i?`response body:
${i}`:"no response body.";throw new Error(`${Oi} status code ${r} and ${a}`)}if(n){let{warnings:i=[],errors:a=[]}=n;i.forEach(s=>{e.warn(`${Oi} warning:`,s)}),a.forEach(s=>{e.error(`${Oi} non-fatal error:`,s)})}};var Xc=({orgId:e,cookieJar:t})=>{let r=ut(e,_s),o=()=>t.get(r),n=()=>{let i=t.get($c);if(i)return`t${i}`};return()=>o()||n()};var Zg=3,eh=[429,503,502,504],Qc=({response:e,retriesAttempted:t})=>t<Zg&&eh.includes(e.statusCode);var th=1e3,rh=1e3,oh=.3,nh=e=>{let t=th+e*rh,r=t*oh,o=t-r,n=t+r;return Math.round(o+Math.random()*(n-o))},ih=e=>{let t=e.getHeader(wc),r;if(t){let o=parseInt(t,10);Dr(o)?r=o*1e3:r=Math.max(0,new Date(t).getTime()-new Date().getTime())}return r},Kc=({response:e,retriesAttempted:t})=>{let r=ih(e);return r===void 0&&(r=nh(t)),r};var ah=200,Jc=({cookieTransfer:e,lifecycle:t,createResponse:r,processWarningsAndErrors:o})=>({request:n,responseHeaders:i,responseBody:a,runOnResponseCallbacks:s=W,runOnRequestFailureCallbacks:c=W})=>{let u=He();u.add(t.onResponse),u.add(s);let l=He();l.add(t.onRequestFailure),l.add(c);let d=m=>i[m];return t.onBeforeRequest({request:n,onResponse:u.add,onRequestFailure:l.add}).then(()=>o({statusCode:ah,getHeader:d,body:JSON.stringify(a),parsedBody:a})).catch($o(l)).then(()=>{let m=r({content:a,getHeader:d});return e.responseToCookies(m),u.call({response:m}).then(Bo)})};var Di={};Oa(Di,{context:()=>cl,dataCollector:()=>ml,identity:()=>Ul,libraryInfo:()=>Bl});var Zc=e=>t=>{let r={webPageDetails:{URL:e.location.href||e.location},webReferrer:{URL:e.document.referrer}};ee(t,{web:r})};var sh=e=>{let{screen:{orientation:t}}=e;if(t==null||t.type==null)return null;let r=t.type.split("-");return r.length===0||r[0]!=="portrait"&&r[0]!=="landscape"?null:r[0]},ch=e=>{if(xe(e.matchMedia)){if(e.matchMedia("(orientation: portrait)").matches)return"portrait";if(e.matchMedia("(orientation: landscape)").matches)return"landscape"}return null},el=e=>t=>{let{screen:{width:r,height:o}}=e,n={},i=Le(o);i>=0&&(n.screenHeight=i);let a=Le(r);a>=0&&(n.screenWidth=a);let s=sh(e)||ch(e);s&&(n.screenOrientation=s),Object.keys(n).length>0&&ee(t,{device:n})};var tl=e=>t=>{let{document:{documentElement:{clientWidth:r,clientHeight:o}={}}}=e,n={type:"browser"},i=Le(r);i>=0&&(n.browserDetails={viewportWidth:i});let a=Le(o);a>=0&&(n.browserDetails=n.browserDetails||{},n.browserDetails.viewportHeight=a),ee(t,{environment:n})};var rl=e=>t=>{let r=e(),o={},n=Le(r.getTimezoneOffset());n!==void 0&&(o.localTimezoneOffset=n),(n===void 0||Math.abs(n)<6e3)&&(o.localTime=fi(r)),ee(t,{placeContext:o})};var mr=e=>t=>{let r=e().toISOString();ee(t,{timestamp:r})};var ol="https://ns.adobe.com/experience/alloy";var fr="2.26.0";var nl=e=>{ee(e,{implementationDetails:{name:ol,version:fr,environment:"browser"}})};var il=(e,t,r,o)=>{let i=e.context.flatMap((a,s)=>r[a]?[r[a]]:(t.warn(`Invalid context[${s}]: '${a}' is not available.`),[])).concat(o);return{namespace:"Context",lifecycle:{onBeforeEvent({event:a}){let s={};return Promise.all(i.map(c=>Promise.resolve(c(s,t)))).then(()=>a.mergeXdm(s))}}}};var Ni=[["architecture","string"],["bitness","string"],["model","string"],["platformVersion","string"],["wow64","boolean"]];var lh=e=>typeof e.userAgentData<"u",al=e=>lh(e)?(t,r)=>{try{return e.userAgentData.getHighEntropyValues(Ni.map(o=>o[0])).then(o=>{let n={};Ni.forEach(([i,a])=>{Object.prototype.hasOwnProperty.call(o,i)&&typeof o[i]===a&&(n[i]=o[i])}),ee(t,{environment:{browserDetails:{userAgentClientHints:n}}})})}catch(o){return r.warn(`Unable to collect user-agent client hints. ${o.message}`),W}}:W;var uh=Zc(window),dh=el(window),mh=tl(window),fh=rl(()=>new Date),ph=mr(()=>new Date),gh=al(navigator),sl={web:uh,device:dh,environment:mh,placeContext:fh},hh={highEntropyUserAgentHints:gh},yh={...sl,...hh},Eh=[ph,nl],_i=({config:e,logger:t})=>il(e,t,yh,Eh);_i.namespace="Context";_i.configValidators=x({context:te(k()).default(Object.keys(sl))});var cl=_i;var ll=({options:e})=>x({type:k(),xdm:x({eventType:k(),identityMap:Lr}),data:x({}),documentUnloading:X(),renderDecisions:X(),decisionScopes:te(k()).uniqueItems(),personalization:x({decisionScopes:te(k()).uniqueItems(),surfaces:te(k()).uniqueItems(),sendDisplayEvent:X().default(!0),includeRenderedPropositions:X().default(!1),defaultPersonalizationEnabled:X(),decisionContext:x({})}).default({sendDisplayEvent:!0}),datasetId:k(),mergeId:k(),edgeConfigOverrides:Ye,initializePersonalization:X()}).required().noUnknownFields()(e);var ul=({options:e})=>x({renderDecisions:X(),responseHeaders:Lo(k().required()),responseBody:x({handle:te(x({type:k().required(),payload:$e().required()})).required()}).required(),personalization:x({sendDisplayEvent:X().default(!0),decisionContext:x({})}).default({sendDisplayEvent:!0})}).noUnknownFields()(e);var dl=({eventManager:e,logger:t})=>({commands:{sendEvent:{documentationUri:"https://adobe.ly/3GQ3Q7t",optionsValidator:r=>ll({options:r}),run:r=>{let{xdm:o,data:n,documentUnloading:i,type:a,mergeId:s,datasetId:c,edgeConfigOverrides:u,...l}=r,d=e.createEvent();return i&&d.documentMayUnload(),d.setUserXdm(o),d.setUserData(n),a&&d.mergeXdm({eventType:a}),s&&d.mergeXdm({eventMergeId:s}),u&&(l.edgeConfigOverrides=u),c&&(t.warn("The 'datasetId' option has been deprecated. Please use 'edgeConfigOverrides.com_adobe_experience_platform.datasets.event.datasetId' instead."),l.edgeConfigOverrides=u||{},ee(l.edgeConfigOverrides,{com_adobe_experience_platform:{datasets:{event:{datasetId:c}}}})),e.sendEvent(d,l)}},applyResponse:{documentationUri:"",optionsValidator:r=>ul({options:r}),run:r=>{let{renderDecisions:o=!1,decisionContext:n={},responseHeaders:i={},responseBody:a={handle:[]},personalization:s}=r,c=e.createEvent();return e.applyResponse(c,{renderDecisions:o,decisionContext:n,responseHeaders:i,responseBody:a,personalization:s})}}}});dl.namespace="DataCollector";var ml=dl;var fl=(e,t)=>`ID sync ${t?"succeeded":"failed"}: ${e.spec.url}`,pl=({fireReferrerHideableImage:e,logger:t})=>r=>{let o=r.filter(n=>n.type==="url");return o.length?Promise.all(o.map(n=>e(n.spec).then(()=>{t.info(fl(n,!0))}).catch(()=>{t.error(fl(n,!1))}))).then(W):Promise.resolve()};var bh=x({thirdPartyCookiesEnabled:X().default(!0),idMigrationEnabled:X().default(!0)}),gl=bh;var hl=x({url:k().required().nonEmpty(),edgeConfigOverrides:Ye}).required().noUnknownFields();var de="ECID";var yl=({addEcidQueryToPayload:e,addQueryStringIdentityToPayload:t,ensureSingleIdentity:r,setLegacyEcid:o,handleResponseForIdSyncs:n,getNamespacesFromResponse:i,getIdentity:a,consent:s,appendIdentityToUrl:c,logger:u,getIdentityOptionsValidator:l,decodeKndctrCookie:d})=>{let m,f={};return{lifecycle:{onBeforeRequest({request:p,onResponse:b,onRequestFailure:w}){return e(p.getPayload()),t(p.getPayload()),r({request:p,onResponse:b,onRequestFailure:w})},onResponse({response:p}){let b=i(p);return(!m||!m[de])&&b&&b[de]&&o(b[de]),b&&Object.keys(b).length>0&&(m={...m,...b}),f={...f,...p.getEdge()},n(p)}},commands:{getIdentity:{optionsValidator:l,run:p=>{let{namespaces:b}=p;return s.awaitConsent().then(()=>{if(m)return;let w=d();if(!(w&&b.includes(de)&&(m||(m={}),m[de]=w,b.length===1)))return a(p)}).then(()=>({identity:b.reduce((w,C)=>(w[C]=m[C]||null,w),{}),edge:f}))}},appendIdentityToUrl:{optionsValidator:hl,run:p=>s.withConsent().then(()=>{if(m)return;let b=d();if(b){m||(m={}),m[de]=b;return}return a(p)}).then(()=>({url:c(m[de],p.url)})).catch(b=>(u.warn(`Unable to append identity to url. ${b.message}`),p))}}}};var El=({config:e,getEcidFromVisitor:t,apexDomain:r,isPageSsl:o,cookieJar:n})=>{let{idMigrationEnabled:i,orgId:a}=e,s=`AMCV_${a}`,c=()=>{let u=null,d=n.get("s_ecid")||n.get(s);if(d){let m=/(^|\|)MCMID\|(\d+)($|\|)/,f=d.match(m);f&&(u=f[2])}return u};return{getEcid(){if(i){let u=c();return u?Promise.resolve(u):t()}return Promise.resolve()},setEcid(u){if(i&&c()!==u){let l=o?{sameSite:"none",secure:!0}:{};n.set(s,`MCMID|${u}`,{domain:r,expires:390,...l})}}}};var bl=({logger:e})=>new Promise((t,r)=>{if(K(window.adobe)&&K(window.adobe.optIn)){let o=window.adobe.optIn;e.info("Delaying request while waiting for legacy opt-in to let Visitor retrieve ECID from server."),o.fetchPermissions(()=>{o.isApproved([o.Categories.ECID])?(e.info("Received legacy opt-in approval to let Visitor retrieve ECID from server."),t()):r(new Error("Legacy opt-in was declined."))},!0)}else t()});var vl=e=>{let t=e.Visitor;return xe(t)&&xe(t.getInstance)&&t};var Sl=({logger:e,orgId:t,awaitVisitorOptIn:r})=>()=>{let o=vl(window);return o?r({logger:e}).then(()=>(e.info("Delaying request while using Visitor to retrieve ECID from server."),new Promise(n=>{o.getInstance(t,{}).getMarketingCloudVisitorID(a=>{e.info("Resuming previously delayed request that was waiting for ECID from Visitor."),n(a)},!0)}))).catch(n=>{n?e.info(`${n.message}, retrieving ECID from experience edge`):e.info("An error occurred while obtaining the ECID from Visitor.")}):Promise.resolve()};var Cl=({processIdSyncs:e})=>t=>e(t.getPayloadsByType("identity:exchange"));var wl=({doesIdentityCookieExist:e,setDomainForInitialIdentityPayload:t,addLegacyEcidToPayload:r,awaitIdentityCookie:o,logger:n})=>{let i,a=s=>(t(s),r(s.getPayload()));return({request:s,onResponse:c,onRequestFailure:u})=>{if(e())return s.setIsIdentityEstablished(),Promise.resolve();if(i){n.info("Delaying request while retrieving ECID from server.");let l=i;return i=l.catch(()=>o({onResponse:c,onRequestFailure:u})),l.then(()=>{n.info("Resuming previously delayed request."),s.setIsIdentityEstablished()}).catch(()=>a(s))}return i=o({onResponse:c,onRequestFailure:u}),i.catch(()=>{}),a(s)}};var pr="CORE";var Il=({thirdPartyCookiesEnabled:e,areThirdPartyCookiesSupportedByDefault:t})=>{let r={identity:{fetch:[de]}};return e&&t()&&r.identity.fetch.push(pr),o=>{o.mergeQuery(r)}};var Al=({thirdPartyCookiesEnabled:e,areThirdPartyCookiesSupportedByDefault:t})=>r=>{e&&t()&&r.setUseIdThirdPartyDomain()};var Tl=({getLegacyEcid:e,addEcidToPayload:t})=>r=>r.hasIdentity(de)?Promise.resolve():e().then(o=>{o&&t(r,o)});var xl="adobe_mc";var Fr=e=>{try{return decodeURIComponent(e)}catch{return""}};var vh=300,Ol=({locationSearch:e,dateProvider:t,orgId:r,logger:o})=>n=>{if(n.hasIdentity(de))return;let a=ot.parse(e)[xl];if(a===void 0)return;Array.isArray(a)&&(o.warn("Found multiple adobe_mc query string paramters, only using the last one."),a=a[a.length-1]);let s=a.split("|").reduce((d,m)=>{let[f,p]=m.split("=");return d[f]=Fr(p),d[f]=d[f].replace(/[^a-zA-Z0-9@.]/g,""),d},{}),c=parseInt(s.TS,10),u=s.MCMID,l=Fr(s.MCORGID);t().getTime()/1e3<=c+vh&&l===r&&u?(o.info(`Found valid ECID identity ${u} from the adobe_mc query string parameter.`),n.addIdentity(de,{id:u})):o.info("Detected invalid or expired adobe_mc query string parameter.")};var Nl=(e,t)=>{e.addIdentity(de,{id:t})};var _l=({doesIdentityCookieExist:e,orgId:t,logger:r})=>({onResponse:o,onRequestFailure:n})=>new Promise((i,a)=>{o(()=>{e()?i():(r.warn(`Identity cookie not found. This could be caused by any of the following issues:
	* The org ID ${t} configured in Alloy doesn't match the org ID specified in the edge configuration.
	* Experience edge was not able to set the identity cookie due to domain or cookie restrictions.
	* The request was canceled by the browser and not fully processed.`),a(new Error("Identity cookie not found.")))}),n(()=>{e()?i():a(new Error("Identity cookie not found."))})});var kl=e=>e.getPayloadsByType("identity:result").reduce((r,o)=>(o.namespace&&o.namespace.code&&(r[o.namespace.code]=o.id),r),{});var Dl=({sendEdgeNetworkRequest:e,createIdentityRequestPayload:t,createIdentityRequest:r,globalConfigOverrides:o})=>({namespaces:n,edgeConfigOverrides:i}={})=>{let a=Ft({payload:t(n),globalConfigOverrides:o,localConfigOverrides:i}),s=r(a);return e({request:s})};var Rl=({payload:e,datastreamIdOverride:t})=>ft({payload:e,datastreamIdOverride:t,getAction(){return"identity/acquire"},getUseSendBeacon(){return!1}});var Pl=e=>{let t={query:{identity:{fetch:e}}};return qt({content:t,addIdentity:Br(t),hasIdentity:$r(t)})};var Sh=/^([^?#]*)(\??[^#]*)(#?.*)$/,Ch=e=>e===""?"?":e==="?"?"":"&",Ml=({dateProvider:e,orgId:t})=>(r,o)=>{let n=Math.round(e().getTime()/1e3),i=encodeURIComponent(`TS=${n}|MCMID=${r}|MCORGID=${encodeURIComponent(t)}`),[,a,s,c]=o.match(Sh),u=Ch(s);return`${a}${s}${u}adobe_mc=${i}${c}`};var wh=x({namespaces:te(mt(de,pr)).nonEmpty().uniqueItems().default([de]),edgeConfigOverrides:Ye}).noUnknownFields().default({namespaces:[de]}),Ll=({thirdPartyCookiesEnabled:e})=>t=>{let r=wh(t);if(!e&&r.namespaces.includes(pr))throw new Error(`namespaces: The ${pr} namespace cannot be requested when third-party cookies are disabled.`);return r};var Ih=1,qo=(e,t)=>{let r=0,o=0,n;do{if(t<0||t+o>=e.length)throw new Error("Invalid varint: buffer ended unexpectedly");if(n=e[t+o],r|=(n&127)<<7*o,o+=1,o>10)throw new Error("Invalid varint: too long")}while(n&128);return{value:r,length:o}},Gt=Object.freeze({VARINT:0,I64:1,LEN:2,SGROUP:3,EGROUP:4,I32:5}),Ah=e=>{let t=0,r=null;for(;t<e.length&&!r;){let{value:o,length:n}=qo(e,t);t+=n;let i=o&7;if(o>>3===Ih){if(i===Gt.LEN){let s=qo(e,t);return t+=s.length,r=new TextDecoder().decode(e.slice(t,t+s.value)),t+=s.value,r}}else switch(i){case Gt.VARINT:t+=qo(e,t).length;break;case Gt.I64:t+=8;break;case Gt.LEN:{let s=qo(e,t);t+=s.length+s.value;break}case Gt.SGROUP:break;case Gt.EGROUP:break;case Gt.I32:t+=4;break;default:throw new Error(`Malformed kndctr cookie. Unknown wire type: ${i}`)}}throw new Error("No ECID found in cookie.")},Th=e=>{let t=atob(e);return Uint8Array.from(t,r=>r.codePointAt(0))},Vl=({orgId:e,cookieJar:t,logger:r})=>{let o=ut(e,"identity");return()=>{let n=t.get(o);if(!n)return null;try{let i=decodeURIComponent(n).replace(/_/g,"/").replace(/-/g,"+"),a=Th(i);return Ah(a)}catch(i){return r.warn(`Unable to decode ECID from ${o} cookie`,i),null}}};var ki=({config:e,logger:t,consent:r,fireReferrerHideableImage:o,sendEdgeNetworkRequest:n,apexDomain:i,getBrowser:a})=>{let{orgId:s,thirdPartyCookiesEnabled:c,edgeConfigOverrides:u}=e,l=Sl({logger:t,orgId:s,awaitVisitorOptIn:bl}),d=jt({logger:t,cookieJar:Pe}),m=El({config:e,getEcidFromVisitor:l,apexDomain:i,cookieJar:d,isPageSsl:window.location.protocol==="https:"}),f=_r({orgId:s}),p=Dl({sendEdgeNetworkRequest:n,createIdentityRequestPayload:Pl,createIdentityRequest:Rl,globalConfigOverrides:u}),b=si({getBrowser:a}),w=Al({thirdPartyCookiesEnabled:c,areThirdPartyCookiesSupportedByDefault:b}),C=Tl({getLegacyEcid:m.getEcid,addEcidToPayload:Nl}),I=Ol({locationSearch:window.document.location.search,dateProvider:()=>new Date,orgId:s,logger:t}),_=_l({doesIdentityCookieExist:f,orgId:s,logger:t}),P=wl({doesIdentityCookieExist:f,setDomainForInitialIdentityPayload:w,addLegacyEcidToPayload:C,awaitIdentityCookie:_,logger:t}),z=pl({fireReferrerHideableImage:o,logger:t}),H=Cl({processIdSyncs:z}),$=Ml({dateProvider:()=>new Date,orgId:s,globalConfigOverrides:u}),J=Ll({thirdPartyCookiesEnabled:c}),se=Il({thirdPartyCookiesEnabled:c,areThirdPartyCookiesSupportedByDefault:b}),re=Vl({orgId:s,cookieJar:d,logger:t});return yl({addEcidQueryToPayload:se,addQueryStringIdentityToPayload:I,ensureSingleIdentity:P,setLegacyEcid:m.setEcid,handleResponseForIdSyncs:H,getNamespacesFromResponse:kl,getIdentity:p,consent:r,appendIdentityToUrl:$,logger:t,config:e,getIdentityOptionsValidator:J,decodeKndctrCookie:re})};ki.namespace="Identity";ki.configValidators=gl;var Ul=ki;var xh=({config:e,componentRegistry:t})=>{let r=[...t.getCommandNames(),jr,dr].sort(),o={...e};Object.keys(e).forEach(i=>{let a=e[i];typeof a=="function"&&(o[i]=a.toString())});let n=t.getComponentNames();return{version:fr,configs:o,commands:r,components:n}},jl=({config:e,componentRegistry:t})=>({commands:{getLibraryInfo:{run:()=>({libraryInfo:xh({config:e,componentRegistry:t})})}}});jl.namespace="LibraryInfo";var Bl=jl;var ql=$t(window),{console:rk,fetch:Oh,navigator:Ri}=window;var Nh=Pc(),$l=ai(window,Pe),Pi=Mc({fetch:Oh}),_h=oi(),kh=xi({window,createNamespacedStorage:ql}),Dh=ci({userAgent:window.navigator.userAgent}),Fl=({instanceName:e,logController:{setDebugEnabled:t,logger:r,createComponentLogger:o},components:n})=>{let i=hc(),a=pc(i),s=n.concat(Object.values(Di)),c=f=>{t(f.enabled,{fromConfig:!1})},u=jt({logger:r,cookieJar:Pe}),l=f=>{let p=Oc({options:f,componentCreators:s,coreConfigValidators:Nh,createConfig:_c,logger:r,setDebugEnabled:t}),{orgId:b,targetMigrationEnabled:w}=p,C=Gc({orgId:b,targetMigrationEnabled:w}),I=Bc({cookieJar:u,shouldTransferCookie:C,apexDomain:$l,dateProvider:()=>new Date}),_=xe(Ri.sendBeacon)?Lc({sendBeacon:Ri.sendBeacon.bind(Ri),sendFetchRequest:Pi,logger:r}):Pi,P=yc({logger:r,sendFetchRequest:Pi,sendBeaconRequest:_,isRequestRetryable:Qc,getRequestRetryDelay:Kc}),z=Yc({logger:r}),H=Ec({logger:r}),$=Ac({extractEdgeInfo:H}),J=Xc({orgId:b,cookieJar:Pe}),se=zc({config:p,lifecycle:a,cookieTransfer:I,sendNetworkRequest:P,createResponse:$,processWarningsAndErrors:z,getLocationHint:J,getAssuranceValidationTokenParams:kh}),re=Jc({lifecycle:a,cookieTransfer:I,createResponse:$,processWarningsAndErrors:z}),Oe=bc({logger:r}),Ne=vc({generalConsentState:Oe,logger:r}),Ae=jc({config:p,logger:r,lifecycle:a,consent:Ne,createEvent:Cc,createDataCollectionRequestPayload:qr,createDataCollectionRequest:Ti,sendEdgeNetworkRequest:se,applyResponse:re});return Nc({componentCreators:s,lifecycle:a,componentRegistry:i,getImmediatelyAvailableTools(we){let Se=o(we);return{config:p,componentRegistry:i,consent:Ne,eventManager:Ae,fireReferrerHideableImage:_h,logger:Se,lifecycle:a,sendEdgeNetworkRequest:se,handleError:Ii({errorPrefix:`[${e}] [${we}]`,logger:Se}),createNamespacedStorage:ql,apexDomain:$l,getBrowser:Dh}}})},d=Ii({errorPrefix:`[${e}]`,logger:r});return Tc({logger:r,configureCommand:l,setDebugCommand:c,handleError:d,validateCommandOptions:xc})};var Ia={};Oa(Ia,{activityCollector:()=>Eu,audiences:()=>Cu,consent:()=>Ru,eventMerge:()=>Vu,mediaAnalyticsBridge:()=>Qu,personalization:()=>am,rulesEngine:()=>Wm,streamingMedia:()=>Km});var Rh=({eventManager:e,lifecycle:t,handleError:r})=>o=>{if(o.s_fe)return Promise.resolve();let n=o.target,i=e.createEvent();return i.documentMayUnload(),t.onClick({event:i,clickedElement:n}).then(()=>i.isEmpty()?Promise.resolve():e.sendEvent(i)).then(W).catch(a=>{r(a,"click collection")})},Gl=({eventManager:e,lifecycle:t,handleError:r})=>{let o=Rh({eventManager:e,lifecycle:t,handleError:r});document.addEventListener("click",o,!0)};var Mi="\\.(exe|zip|wav|mp3|mov|mpg|avi|wmv|pdf|doc|docx|xls|xlsx|ppt|pptx)$",Ph=k().regexp().default(Mi),Mh=x({clickCollectionEnabled:X().default(!0),clickCollection:x({internalLinkEnabled:X().default(!0),externalLinkEnabled:X().default(!0),downloadLinkEnabled:X().default(!0),sessionStorageEnabled:X().default(!1),eventGroupingEnabled:X().default(!1),filterClickProperties:ze()}).default({internalLinkEnabled:!0,externalLinkEnabled:!0,downloadLinkEnabled:!0,sessionStorageEnabled:!1,eventGroupingEnabled:!1}),downloadLinkQualifier:Ph,onBeforeLinkClickSend:ze().deprecated('The field "onBeforeLinkClickSend" has been deprecated. Use "clickCollection.filterClickDetails" instead.')});var Hl=Mh;var Lh="cppXYctnr",Fo=(e=document)=>e.getElementById(Lh)!==null;var Li=e=>{let t=e;return/^https?:\/\//i.test(t)||(t=`${window.location.protocol}//${e}`),new URL(t).hostname};var Wl=(e,t)=>{let r=Li(e),o=Li(t);return r!==o};var Vh=(e,t)=>t&&(t==="download"&&!e.downloadLinkEnabled||t==="exit"&&!e.externalLinkEnabled||t==="other"&&!e.internalLinkEnabled),zl=({config:e,logger:t,getClickedElementProperties:r,clickActivityStorage:o})=>{let{clickCollectionEnabled:n,clickCollection:i}=e;return n?({event:a,clickedElement:s})=>{let c=r({clickActivityStorage:o,clickedElement:s,config:e,logger:t}),u=c.linkType;Fo()||(c.isValidLink()&&Vh(i,u)?t.info(`Cancelling link click event due to clickCollection.${u}LinkEnabled = false.`):c.isInternalLink()&&i.eventGroupingEnabled&&(!e.onBeforeLinkClickSend||i.filterClickDetails)&&!Wl(window.location.hostname,c.linkUrl)?o.save(c.properties):c.isValidLink()?(a.mergeXdm(c.xdm),a.mergeData(c.data),o.save({pageName:c.pageName,pageIDType:c.pageIDType})):c.isValidActivityMapData()&&o.save(c.properties))}:()=>{}};var Uh=e=>({eventType:"web.webinteraction.linkClicks",web:{webInteraction:{name:e.linkName,region:e.linkRegion,type:e.linkType,URL:e.linkUrl,linkClicks:{value:1}}}}),jh=e=>({__adobe:{analytics:{contextData:{a:{activitymap:{page:e.pageName,link:e.linkName,region:e.linkRegion,pageIDType:e.pageIDType}}}}}}),Bh=(e,t)=>{let{xdm:r,data:o,clickedElement:n}=e;if(t.clickedElement=n,r&&r.web&&r.web.webInteraction){let{name:i,region:a,type:s,URL:c}=r.web.webInteraction;t.linkName=i,t.linkRegion=a,t.linkType=s,t.linkUrl=c}if(o&&o.__adobe&&o.__adobe.analytics){let{contextData:i}=o.__adobe.analytics;if(i&&i.a&&i.a.activitymap){let{page:a,link:s,region:c,pageIDType:u}=i.a.activitymap;t.pageName=a||t.pageName,t.linkName=s||t.linkName,t.linkRegion=c||t.linkRegion,u!==void 0&&(t.pageIDType=u)}}},Go=({properties:e,logger:t}={})=>{let r=e||{};return{get pageName(){return r.pageName},set pageName(n){r.pageName=n},get linkName(){return r.linkName},set linkName(n){r.linkName=n},get linkRegion(){return r.linkRegion},set linkRegion(n){r.linkRegion=n},get linkType(){return r.linkType},set linkType(n){r.linkType=n},get linkUrl(){return r.linkUrl},set linkUrl(n){r.linkUrl=n},get pageIDType(){return r.pageIDType},set pageIDType(n){r.pageIDType=n},get clickedElement(){return r.clickedElement},set clickedElement(n){r.clickedElement=n},get properties(){return{pageName:r.pageName,linkName:r.linkName,linkRegion:r.linkRegion,linkType:r.linkType,linkUrl:r.linkUrl,pageIDType:r.pageIDType}},isValidLink(){return!!r.linkUrl&&!!r.linkType&&!!r.linkName&&!!r.linkRegion},isInternalLink(){return this.isValidLink()&&r.linkType==="other"},isValidActivityMapData(){return!!r.pageName&&!!r.linkName&&!!r.linkRegion&&r.pageIDType!==void 0},get xdm(){return r.filteredXdm?r.filteredXdm:Uh(this)},get data(){return r.filteredData?r.filteredData:jh(this)},applyPropertyFilter(n){n&&n(r)===!1&&(t&&t.info(`Clicked element properties were rejected by filter function: ${JSON.stringify(this.properties,null,2)}`),r={})},applyOptionsFilter(n){let i=this.options;if(i&&i.clickedElement&&(i.xdm||i.data)){if(n&&n(i)===!1){t&&t.info(`Clicked element properties were rejected by filter function: ${JSON.stringify(this.properties,null,2)}`),this.options=void 0;return}this.options=i,r.filteredXdm=i.xdm,r.filteredData=i.data}},get options(){let n={};if(this.isValidLink()&&(n.xdm=this.xdm),this.isValidActivityMapData()&&(n.data=this.data),this.clickedElement&&(n.clickedElement=this.clickedElement),!(!n.xdm&&!n.data))return n},set options(n){r={},n&&Bh(n,r)}}};var Yl=({clickActivityStorage:e})=>t=>{if(Fo())return;let r=e.load(),o=Go({properties:r});if(o.isValidLink()||o.isValidActivityMapData()){if(o.isValidLink()){let n=o.xdm;delete n.eventType,t.mergeXdm(n)}o.isValidActivityMapData()&&t.mergeData(o.data),e.save({pageName:o.pageName,pageIDType:o.pageIDType})}};var Xl=({window:e,getLinkName:t,getLinkRegion:r,getAbsoluteUrlFromAnchorElement:o,findClickableElement:n,determineLinkType:i})=>({clickedElement:a,config:s,logger:c,clickActivityStorage:u})=>{let{onBeforeLinkClickSend:l,clickCollection:d}=s,{filterClickDetails:m}=d,f=Go({logger:c});if(a){let p=n(a);if(p){f.clickedElement=a,f.linkUrl=o(e,p),f.linkType=i(e,s,f.linkUrl,p),f.linkRegion=r(p),f.linkName=t(p),f.pageIDType=0,f.pageName=e.location.href;let b=u.load();b&&b.pageName&&(f.pageName=b.pageName,f.pageIDType=1),m?f.applyPropertyFilter(m):l&&f.applyOptionsFilter(l)}}return f};var Ho="clickData";var Ql=({storage:e})=>({save:t=>{let r=JSON.stringify(t);e.setItem(Ho,r)},load:()=>{let t=null,r=e.getItem(Ho);return r&&(t=JSON.parse(r)),t},remove:()=>{e.removeItem(Ho)}});var Kl=({clickActivityStorage:e})=>t=>{e.save({pageName:t.getContent().xdm.web.webPageDetails.name,pageIDType:1})};var Jl=(e,t)=>{let{clickCollectionEnabled:r,onBeforeLinkClickSend:o,downloadLinkQualifier:n}=e;r===!1&&(o&&t.warn("The 'onBeforeLinkClickSend' configuration was provided but will be ignored because clickCollectionEnabled is false."),n&&n!==Mi&&t.warn("The 'downloadLinkQualifier' configuration was provided but will be ignored because clickCollectionEnabled is false."))};var pt=e=>e&&e.replace(/\s+/g," ").trim();var $h=/^(SCRIPT|STYLE|LINK|CANVAS|NOSCRIPT|#COMMENT)$/i,Zl=e=>!(e&&e.nodeName&&e.nodeName.match($h));var tu=e=>{let t=[],r=!1;return Zl(e)?(t.push(e),e.childNodes&&Array.prototype.slice.call(e.childNodes).forEach(n=>{let i=tu(n);t=t.concat(i.supportedNodes),r=r||i.includesUnsupportedNodes})):r=!0,{supportedNodes:t,includesUnsupportedNodes:r}},eu=(e,t,r)=>{let o;return(!r||r===e.nodeName.toUpperCase())&&(o=e.getAttribute(t)),o},qh=e=>{let t={texts:[]};return e.supportedNodes.forEach(r=>{r.getAttribute&&(t.alt||(t.alt=pt(r.getAttribute("alt"))),t.title||(t.title=pt(r.getAttribute("title"))),t.inputValue||(t.inputValue=pt(eu(r,"value","INPUT"))),t.imgSrc||(t.imgSrc=pt(eu(r,"src","IMG")))),r.nodeValue&&t.texts.push(r.nodeValue)}),t},ru=e=>{let t=pt(e.innerText||e.textContent),r=tu(e);if(!t||r.includesUnsupportedNodes){let o=qh(r);t=pt(o.texts.join("")),t||(t=o.alt||o.title||o.inputValue||o.imgSrc)}return t||""};var Fh=/^(HEADER|MAIN|FOOTER|NAV)$/i,Gh=e=>{let t;return e.role==="region"&&he(e["aria-label"])&&(t=e["aria-label"]),t},Hh=e=>{let t;return e&&e.nodeName&&e.nodeName.match(Fh)&&(t=e.nodeName),t},ou=e=>{let t=e.parentNode,r;for(;t;){if(r=pt(t.id||Gh(t)||Hh(t)),r)return r;t=t.parentNode}return"BODY"};var nu=e=>e?/^[a-z0-9]+:\/\//i.test(e):!1;var iu=(e,t)=>{let r=e.location,o=t.href||"";typeof o!="string"&&(o="");let{protocol:n,host:i}=t;if(o&&!nu(o)){n||(n=r.protocol?r.protocol:""),n=n?`${n}//`:"",i||(i=r.host?r.host:"");let a="";if(o.substring(0,1)!=="/"){let s=r.pathname.lastIndexOf("/");s=s<0?0:s,a=r.pathname.substring(0,s)}o=`${n}${i}${a}/${o}`}return o};var au=e=>!!(e.href&&(e.tagName==="A"||e.tagName==="AREA")&&(!e.onclick||!e.protocol||e.protocol.toLowerCase().indexOf("javascript")<0));var su=e=>e?!!e.onclick:!1;var cu=e=>{if(e.tagName==="INPUT"){let t=e.getAttribute("type");if(t==="submit"||t==="image"&&e.src)return!0}return!1};var lu=e=>e.tagName==="BUTTON"&&e.type==="submit";var uu=e=>{let t=e;for(;t;){if(au(t)||su(t)||cu(t)||lu(t))return t;t=t.parentNode}return null};var Wo=e=>{let t=e.indexOf("?"),r=e.indexOf("#");return t>=0&&(t<r||r<0)?e.substring(0,t):r>=0?e.substring(0,r):e};var du=(e,t,r)=>{let o=!1;if(t){if(r&&r.download)o=!0;else if(e){let n=new RegExp(e),i=Wo(t).toLowerCase();o=n.test(i)}}return o};var mu=(e,t)=>{let r=!1;if(t&&e.location.hostname){let o=e.location.hostname.toLowerCase();r=Wo(t).toLowerCase().indexOf(o)<0}return r};var fu=(e,t,r,o)=>{let n="other";return he(r)&&(du(t.downloadLinkQualifier,r,o)?n="download":mu(e,r)&&(n="exit")),n};var pu=e=>{let t=e.getContent();return t.xdm!==void 0&&t.xdm.web!==void 0&&t.xdm.web.webPageDetails!==void 0&&t.xdm.web.webPageDetails.name!==void 0};var gu=()=>{let e={};return{getItem:t=>e[t],setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}};var hu=Xl({window,getLinkName:ru,getLinkRegion:ou,getAbsoluteUrlFromAnchorElement:iu,findClickableElement:uu,determineLinkType:fu}),gt,yu=e=>{if(!gt){let r=$t(window)(e.orgId||""),o=gu(),n=e.clickCollection.sessionStorageEnabled?r.session:o;gt=Ql({storage:n})}},zo=({config:e,eventManager:t,handleError:r,logger:o})=>{Jl(e,o);let n=e.clickCollection;gt||yu(e);let i=zl({config:e,logger:o,clickActivityStorage:gt,getClickedElementProperties:hu}),a=Yl({clickActivityStorage:gt}),s=Kl({clickActivityStorage:gt});return{lifecycle:{onComponentsRegistered(c){let{lifecycle:u}=c;Gl({eventManager:t,lifecycle:u,handleError:r})},onClick({event:c,clickedElement:u}){i({event:c,clickedElement:u})},onBeforeEvent({event:c}){pu(c)&&(n.eventGroupingEnabled&&a(c),s(c,o,gt))}}}};zo.namespace="ActivityCollector";zo.configValidators=Hl;zo.buildOnInstanceConfiguredExtraParams=({config:e,logger:t})=>(gt||yu(e),{getLinkDetails:r=>hu({clickActivityStorage:gt,clickedElement:r,config:e,logger:t}).properties});var Eu=zo;var Wh=(e,t)=>`URL destination ${t?"succeeded":"failed"}: ${e.spec.url}`,bu=({fireReferrerHideableImage:e,logger:t,cookieJar:r,isPageSsl:o})=>{let n=o?{sameSite:"none",secure:!0}:{},i=s=>{s.filter(u=>u.type==="cookie").forEach(u=>{let{name:l,value:d,domain:m,ttlDays:f}=u.spec;r.set(l,d||"",{domain:m||"",expires:f||10,...n})})},a=s=>{let c=s.filter(u=>u.type==="url");return Promise.all(c.map(u=>e(u.spec).then(()=>{t.info(Wh(u,!0))}).catch(()=>{}))).then(W)};return s=>(i(s),a(s))};var vu=({processDestinations:e})=>{let t=({response:o})=>{let n=o.getPayloadsByType("activation:push");return e(n)},r=({response:o})=>({destinations:o.getPayloadsByType("activation:pull")});return({response:o})=>t({response:o}).then(()=>r({response:o}))};var Su=({logger:e,fireReferrerHideableImage:t})=>{let r=Pe.withConverter({write:a=>encodeURIComponent(a)}),o=jt({logger:e,cookieJar:r}),n=bu({fireReferrerHideableImage:t,logger:e,cookieJar:o,isPageSsl:window.location.protocol==="https:"});return{lifecycle:{onResponse:vu({processDestinations:n})},commands:{}}};Su.namespace="Audiences";var Cu=Su;var wu=({storedConsent:e,taskQueue:t,defaultConsent:r,consent:o,sendSetConsentRequest:n,validateSetConsentOptions:i,consentHashStore:a,doesIdentityCookieExist:s})=>{let c={[Tt]:r},u=e.read(),l=s(),d=u[Tt]!==void 0;(!l||!d)&&a.clear(),l||(e.clear(),u={}),o.initializeConsent(c,u);let m=()=>{if(t.length===0){let f=e.read();f[Tt]!==void 0&&o.setConsent(f)}};return{commands:{setConsent:{optionsValidator:i,run:({consent:f,identityMap:p,edgeConfigOverrides:b})=>{o.suspend();let w=a.lookup(f);return t.addTask(()=>w.isNew()?n({consentOptions:f,identityMap:p,edgeConfigOverrides:b}):Promise.resolve()).then(()=>w.save()).finally(m)}}},lifecycle:{onResponse:m,onRequestFailure:m}}};var Vi=e=>Array.isArray(e)?e.map(t=>Vi(t)):typeof e=="object"&&e!==null?Object.keys(e).sort().reduce((t,r)=>(t[r]=Vi(e[r]),t),{}):e,Iu=e=>Qn(JSON.stringify(Vi(e)));var Ui=({standard:e,version:t})=>`${e}.${t}`,Au=({storage:e})=>({clear(){e.clear()},lookup(t){let r={},o=n=>{let i=Ui(n),{standard:a,version:s,...c}=n;return r[i]||(r[i]=Iu(c).toString()),r[i]};return{isNew(){return t.some(n=>{let i=Ui(n),a=e.getItem(i);return a===null||a!==o(n)})},save(){t.forEach(n=>{let i=Ui(n);e.setItem(i,o(n))})}}}});var Tu=()=>{let e={},t=qt({content:e,addIdentity:(r,o)=>{e.identityMap=e.identityMap||{},e.identityMap[r]=e.identityMap[r]||[],e.identityMap[r].push(o)},hasIdentity:r=>(e.identityMap&&e.identityMap[r])!==void 0});return t.setConsent=r=>{e.consent=r},t};var xu=({payload:e,datastreamIdOverride:t})=>ft({payload:e,datastreamIdOverride:t,getAction(){return"privacy/set-consent"},getUseSendBeacon(){return!1}});var Ou=({parseConsentCookie:e,orgId:t,cookieJar:r})=>{let o=ut(t,Ns);return{read(){let n=r.get(o);return n?e(n):{}},clear(){r.remove(o)}}};var Nu=({createConsentRequestPayload:e,createConsentRequest:t,sendEdgeNetworkRequest:r,edgeConfigOverrides:o})=>({consentOptions:n,identityMap:i,edgeConfigOverrides:a})=>{let s=Ft({payload:e(),globalConfigOverrides:o,localConfigOverrides:a});s.payload.setConsent(n),K(i)&&Object.keys(i).forEach(u=>{i[u].forEach(l=>{s.payload.addIdentity(u,l)})});let c=t(s);return r({request:c}).then(()=>{})};var _u=e=>e.split(";").reduce((r,o)=>{let[n,i]=o.split("=");return r[n]=i,r},{});var ku=x({consent:te($e()).required().nonEmpty(),identityMap:Lr,edgeConfigOverrides:Ye}).noUnknownFields().required();var Du=x({defaultConsent:mt(Vr,ur,Vo).default(Vr)});var ji=({config:e,consent:t,sendEdgeNetworkRequest:r,createNamespacedStorage:o})=>{let{orgId:n,defaultConsent:i}=e,a=Ou({parseConsentCookie:_u,orgId:n,cookieJar:Pe}),s=Xn(),c=Nu({createConsentRequestPayload:Tu,createConsentRequest:xu,sendEdgeNetworkRequest:r,edgeConfigOverrides:e.edgeConfigOverrides}),u=o(`${lt(n)}.consentHashes.`),l=Au({storage:u.persistent}),d=_r({orgId:n});return wu({storedConsent:a,taskQueue:s,defaultConsent:i,consent:t,sendSetConsentRequest:c,validateSetConsentOptions:ku,consentHashStore:l,doesIdentityCookieExist:d})};ji.namespace="Consent";ji.configValidators=Du;var Ru=ji;var Pu=()=>({eventMergeId:dt()});var Mu=({createEventMergeId:e})=>({commands:{createEventMergeId:{run:e}}});var Lu=()=>Mu({createEventMergeId:Pu});Lu.namespace="EventMerge";var Vu=Lu;var ie={PAUSE:"media.pauseStart",PLAY:"media.play",BUFFER_START:"media.bufferStart",AD_START:"media.adStart",Ad_BREAK_START:"media.adBreakStart",SESSION_END:"media.sessionEnd",SESSION_START:"media.sessionStart",SESSION_COMPLETE:"media.sessionComplete",PING:"media.ping",AD_BREAK_COMPLETE:"media.adBreakComplete",AD_COMPLETE:"media.adComplete",AD_SKIP:"media.adSkip",BITRATE_CHANGE:"media.bitrateChange",CHAPTER_COMPLETE:"media.chapterComplete",CHAPTER_SKIP:"media.chapterSkip",CHAPTER_START:"media.chapterStart",ERROR:"media.error",STATES_UPDATE:"media.statesUpdate"};var Uu=({mediaRequestPayload:e,action:t})=>ft({payload:e,edgeSubPath:"/va",getAction(){return t},getUseSendBeacon(){return!1}});var Yo=({config:e,eventManager:t,consent:r,sendEdgeNetworkRequest:o,setTimestamp:n})=>({createMediaEvent({options:i}){let a=t.createEvent(),{xdm:s}=i;if(n(s),a.setUserXdm(s),s.eventType===ie.AD_START){let{advertisingDetails:c}=i.xdm.mediaCollection;a.mergeXdm({mediaCollection:{advertisingDetails:{playerName:c.playerName||e.streamingMedia.playerName}}})}return a},createMediaSession(i){let{playerName:a,channel:s,appVersion:c}=e.streamingMedia,u=t.createEvent(),{sessionDetails:l}=i.xdm.mediaCollection;return u.setUserXdm(i.xdm),u.mergeXdm({eventType:ie.SESSION_START,mediaCollection:{sessionDetails:{playerName:l.playerName||a,channel:l.channel||s,appVersion:l.appVersion||c}}}),u},augmentMediaEvent({event:i,playerId:a,getPlayerDetails:s,sessionID:c}){if(!a||!s)return i;let{playhead:u,qoeDataDetails:l}=s({playerId:a});return i.mergeXdm({mediaCollection:{playhead:Le(u),qoeDataDetails:l,sessionID:c}}),i},trackMediaSession({event:i,mediaOptions:a,edgeConfigOverrides:s}){let c={mediaOptions:a,edgeConfigOverrides:s};return t.sendEvent(i,c)},trackMediaEvent({event:i,action:a}){let s=qr(),c=Uu({mediaRequestPayload:s,action:a});return s.addEvent(i),i.finalize(),r.awaitConsent().then(()=>o({request:c}).then(()=>({})))}});var gr={MAIN:"main",AD:"ad",COMPLETED:"completed"};var Xo=()=>{let e;return{getSession:i=>e[i]||{},storeSession:({playerId:i,sessionDetails:a})=>{e===void 0&&(e={}),e[i]=a},stopPing:({playerId:i})=>{let a=e[i];a&&(clearTimeout(a.pingId),a.pingId=null,a.playbackState=gr.COMPLETED)},savePing:({playerId:i,pingId:a,playbackState:s})=>{e[i]&&(e[i].pingId&&clearTimeout(e[i].pingId),e[i].pingId=a,e[i].playbackState=s)}}};var zh=(e,t)=>e===ie.AD_START||e===ie.Ad_BREAK_START||e===ie.AD_SKIP||e===ie.AD_COMPLETE?"ad":e===ie.AD_BREAK_COMPLETE||e===ie.CHAPTER_COMPLETE||e===ie.CHAPTER_START||e===ie.CHAPTER_SKIP||e===ie.SESSION_START?"main":e===ie.SESSION_END||e===ie.SESSION_COMPLETE?"completed":t,Qo=({mediaEventManager:e,mediaSessionCacheManager:t,config:r})=>{let o=n=>{let i=e.createMediaEvent({options:n}),{playerId:a,xdm:s}=n,{eventType:c}=s,u=c.split(".")[1],{getPlayerDetails:l,sessionPromise:d,playbackState:m}=t.getSession(a);return d.then(f=>f.sessionId?(e.augmentMediaEvent({event:i,eventType:c,playerId:a,getPlayerDetails:l,sessionID:f.sessionId}),e.trackMediaEvent({event:i,action:u}).then(()=>{if(a)if(c===ie.SESSION_COMPLETE||c===ie.SESSION_END)t.stopPing({playerId:a});else{let p=zh(c,m);if(p==="completed")return;let b=p==="ad"?r.streamingMedia.adPingInterval:r.streamingMedia.mainPingInterval,w=setTimeout(()=>{let C={playerId:a,xdm:{eventType:ie.PING}};o(C)},b*1e3);t.savePing({playerId:a,pingId:w,playbackState:p})}})):Promise.reject(new Error(`Failed to trigger media event: ${c}. Session ID is not available for playerId: ${a}.`)))};return n=>o(n)};var Ko=({config:e,mediaEventManager:t,mediaSessionCacheManager:r,legacy:o=!1})=>n=>{if(!e.streamingMedia)return Promise.reject(new Error("Streaming media is not configured."));let{playerId:i,getPlayerDetails:a,edgeConfigOverrides:s}=n,c=t.createMediaSession(n);t.augmentMediaEvent({event:c,playerId:i,getPlayerDetails:a});let u=t.trackMediaSession({event:c,mediaOptions:{playerId:i,getPlayerDetails:a,legacy:o},edgeConfigOverrides:s});return r.storeSession({playerId:i,sessionDetails:{sessionPromise:u,getPlayerDetails:a,playbackState:gr.MAIN}}),u};var Jo=e=>Me(e)?!e.trim():!0;var Zo=({mediaSessionCacheManager:e,config:t,trackMediaEvent:r})=>({response:o,playerId:n,getPlayerDetails:i})=>{let a=o.getPayloadsByType("media-analytics:new-session");if(F(a)){let{sessionId:s}=a[0];if(Jo(s))return{};if(!n||!i)return{sessionId:s};let c=setTimeout(()=>{r({playerId:n,xdm:{eventType:ie.PING}})},t.streamingMedia.mainPingInterval*1e3);return e.savePing({playerId:n,pingId:c,playbackState:gr.MAIN}),{sessionId:s}}return{}};var ju={Video:"video",Audio:"audio"},Bu={VOD:"vod",Live:"live",Linear:"linear",Podcast:"podcast",Audiobook:"audiobook",AOD:"aod"},$u={FullScreen:"fullScreen",ClosedCaption:"closedCaptioning",Mute:"mute",PictureInPicture:"pictureInPicture",InFocus:"inFocus"},Xe={AdBreakStart:"adBreakStart",AdBreakComplete:"adBreakComplete",AdStart:"adStart",AdComplete:"adComplete",AdSkip:"adSkip",ChapterStart:"chapterStart",ChapterComplete:"chapterComplete",ChapterSkip:"chapterSkip",SeekStart:"seekStart",SeekComplete:"seekComplete",BufferStart:"bufferStart",BufferComplete:"bufferComplete",BitrateChange:"bitrateChange",StateStart:"stateStart",StateEnd:"stateEnd"},nt={SessionStart:"sessionStart",SessionEnd:"sessionEnd",SessionComplete:"sessionComplete",Play:"play",Pause:"pauseStart",Error:"error",StateUpdate:"statesUpdate"},qu={MediaResumed:"media.resumed",GranularAdTracking:"media.granularadtracking"},Fu={Show:"a.media.show",Season:"a.media.season",Episode:"a.media.episode",AssetId:"a.media.asset",Genre:"a.media.genre",FirstAirDate:"a.media.airDate",FirstDigitalDate:"a.media.digitalDate",Rating:"a.media.rating",Originator:"a.media.originator",Network:"a.media.network",ShowType:"a.media.type",AdLoad:"a.media.adLoad",MVPD:"a.media.pass.mvpd",Authorized:"a.media.pass.auth",DayPart:"a.media.dayPart",Feed:"a.media.feed",StreamFormat:"a.media.format"},Gu={Artist:"a.media.artist",Album:"a.media.album",Label:"a.media.label",Author:"a.media.author",Station:"a.media.station",Publisher:"a.media.publisher"},Hu={Advertiser:"a.media.ad.advertiser",CampaignId:"a.media.ad.campaign",CreativeId:"a.media.ad.creative",PlacementId:"a.media.ad.placement",SiteId:"a.media.ad.site",CreativeUrl:"a.media.ad.creativeURL"};var Wu=({trackMediaEvent:e,trackMediaSession:t,mediaResponseHandler:r,logger:o,createMediaHelper:n,createGetInstance:i,config:a})=>({lifecycle:{onBeforeEvent({mediaOptions:s,onResponse:c=W}){if(!s)return;let{legacy:u,playerId:l,getPlayerDetails:d}=s;u&&c(({response:m})=>r({playerId:l,getPlayerDetails:d,response:m}))}},commands:{getMediaAnalyticsTracker:{run:()=>{if(!a.streamingMedia)return Promise.reject(new Error("Streaming media is not configured."));o.info("Streaming media is configured in legacy mode.");let s=n({logger:o});return Promise.resolve({getInstance:()=>i({logger:o,trackMediaEvent:e,trackMediaSession:t,uuid:dt}),Event:Xe,MediaType:ju,PlayerState:$u,StreamType:Bu,MediaObjectKey:qu,VideoMetadataKeys:Fu,AudioMetadataKeys:Gu,AdMetadataKeys:Hu,...s})}}}});var zu=({logger:e})=>({createMediaObject:(s,c,u,l,d)=>{let m={friendlyName:s,name:c,length:u,streamType:d,contentType:l},f=x({friendlyName:k().nonEmpty(),name:k().nonEmpty(),length:me().required(),streamType:k().nonEmpty(),contentType:k().nonEmpty()});try{let p=f(m);return{sessionDetails:{name:p.name,friendlyName:p.friendlyName,length:p.length,streamType:p.streamType,contentType:p.contentType}}}catch(p){return e.warn("An error occurred while creating the Media Object.",p),{}}},createAdBreakObject:(s,c,u)=>{let l={friendlyName:s,offset:c,index:u},d=x({friendlyName:k().nonEmpty(),offset:me(),index:me()});try{let m=d(l);return{advertisingPodDetails:{friendlyName:m.friendlyName,offset:m.offset,index:m.index}}}catch(m){return e.warn("An error occurred while creating the Ad Break Object.",m),{}}},createAdObject:(s,c,u,l)=>{let d={friendlyName:s,name:c,podPosition:u,length:l},m=x({friendlyName:k().nonEmpty(),name:k().nonEmpty(),podPosition:me(),length:me()});try{let f=m(d);return{advertisingDetails:{friendlyName:f.friendlyName,name:f.name,podPosition:f.podPosition,length:f.length}}}catch(f){return e.warn("An error occurred while creating the Advertising Object.",f),{}}},createChapterObject:(s,c,u,l)=>{let d={friendlyName:s,offset:c,length:u,index:l},m=x({friendlyName:k().nonEmpty(),offset:me(),length:me(),index:me()});try{let f=m(d);return{chapterDetails:{friendlyName:f.friendlyName,offset:f.offset,index:f.index,length:f.length}}}catch(f){return e.warn("An error occurred while creating the Chapter Object.",f),{}}},createStateObject:s=>{let c=/^[a-zA-Z0-9_]{1,64}$/,u=k().matches(c,"This is not a valid state name.");try{return{name:u(s)}}catch(l){return e.warn("An error occurred while creating the State Object.",l),{}}},createQoEObject:(s,c,u,l)=>{let d={bitrate:s,droppedFrames:c,fps:u,startupTime:l},m=x({bitrate:me(),droppedFrames:me(),fps:me(),startupTime:me()});try{let f=m(d);return{bitrate:f.bitrate,droppedFrames:f.droppedFrames,framesPerSecond:f.fps,timeToStart:f.startupTime}}catch(f){return e.warn("An error occurred while creating the QOE Object.",f),{}}}});var Bi={"a.media.show":"show","a.media.season":"season","a.media.episode":"episode","a.media.asset":"assetID","a.media.genre":"genre","a.media.airDate":"firstAirDate","a.media.digitalDate":"firstDigitalDate","a.media.rating":"rating","a.media.originator":"originator","a.media.network":"network","a.media.type":"showType","a.media.adLoad":"adLoad","a.media.pass.mvpd":"mvpd","a.media.pass.auth":"authorized","a.media.dayPart":"dayPart","a.media.feed":"feed","a.media.format":"streamFormat","a.media.artist":"artist","a.media.album":"album","a.media.label":"label","a.media.author":"author","a.media.station":"station","a.media.publisher":"publisher","media.resumed":"hasResume"},$i={"a.media.ad.advertiser":"advertiser","a.media.ad.campaign":"campaignID","a.media.ad.creative":"creativeID","a.media.ad.placement":"placementID","a.media.ad.site":"siteID","a.media.ad.creativeURL":"creativeURL"};var Yu=({logger:e,trackMediaSession:t,trackMediaEvent:r,uuid:o})=>{let n=null,i=()=>{n={qoe:null,lastPlayhead:0,playerId:o()}},a=({eventType:c})=>c===Xe.BufferComplete||c===Xe.SeekComplete?nt.Play:c===Xe.StateStart||c===Xe.StateEnd?nt.StateUpdate:c===Xe.SeekStart?nt.Pause:c,s=({eventType:c,mediaDetails:u={},contextData:l=[]})=>{let d=a({eventType:c});if(c===Xe.StateStart)return{eventType:`media.${d}`,mediaCollection:{statesStart:[u]}};if(c===Xe.StateEnd)return{eventType:`media.${d}`,mediaCollection:{statesEnd:[u]}};let m={eventType:`media.${d}`,mediaCollection:{...u}},f=[];return Object.keys(l).forEach(p=>{Bi[p]?m.mediaCollection.sessionDetails[Bi[p]]=l[p]:$i[p]?m.mediaCollection.advertisingDetails[$i[p]]=l[p]:f.push({name:p,value:l[p]})}),F(f)&&(m.mediaCollection.customMetadata=f),m};return{trackSessionStart:(c,u={})=>{if(Te(c)||ue(c))return e.warn("Invalid media object"),{};n===null&&(e.warn("The Media Session was completed. Restarting a new session."),i());let l=s({eventType:nt.SessionStart,mediaDetails:c,contextData:u});return t({playerId:n.playerId,getPlayerDetails:()=>({playhead:n.lastPlayhead,qoeDataDetails:n.qoe}),xdm:l})},trackPlay:()=>{if(n===null)return e.warn("The Media Session was completed."),{};let c=s({eventType:nt.Play});return r({playerId:n.playerId,xdm:c})},trackPause:()=>{if(n===null)return e.warn("The Media Session was completed."),{};let c=s({eventType:nt.Pause});return r({playerId:n.playerId,xdm:c})},trackSessionEnd:()=>{if(n===null)return e.warn("The Media Session was completed."),{};let c=s({eventType:nt.SessionEnd});return r({playerId:n.playerId,xdm:c})},trackComplete:()=>{if(n===null)return e.warn("The Media Session was completed."),{};let c=s({eventType:nt.SessionComplete});return r({playerId:n.playerId,xdm:c})},trackError:c=>{if(e.warn(`trackError(${c})`),n===null)return e.warn("The Media Session was completed."),{};let u={name:c,source:"player"},l=s({eventType:nt.Error,mediaDetails:{errorDetails:u}});return r({playerId:n.playerId,xdm:l})},trackEvent:(c,u,l)=>{if(ue(u))return e.warn("Invalid media object."),{};if(n===null)return e.warn("The Media Session was completed."),{};if(!Object.values(Xe).includes(c))return e.warn("Invalid event type"),{};let d=s({eventType:c,mediaDetails:u,contextData:l});return r({playerId:n.playerId,xdm:d})},updatePlayhead:c=>{if(n===null){e.warn("The Media Session was completed.");return}We(c)&&(n.lastPlayhead=parseInt(c,10))},updateQoEObject:c=>{if(n===null){e.warn("The Media Session was completed.");return}c&&(n.qoe=c)},destroy:()=>{e.warn("Destroy called, destroying the tracker."),n=null}}};var Xu=({eventManager:e,sendEdgeNetworkRequest:t,config:r,logger:o,consent:n})=>{let i=Xo({config:r}),a=Yo({sendEdgeNetworkRequest:t,config:r,consent:n,eventManager:e,setTimestamp:mr(()=>new Date)}),s=Qo({mediaSessionCacheManager:i,mediaEventManager:a,config:r}),c=Ko({config:r,mediaEventManager:a,mediaSessionCacheManager:i,legacy:!0}),u=Zo({mediaSessionCacheManager:i,config:r,trackMediaEvent:s});return Wu({mediaResponseHandler:u,trackMediaSession:c,trackMediaEvent:s,createMediaHelper:zu,createGetInstance:Yu,logger:o,config:r})};Xu.namespace="Legacy Media Analytics";var Qu=Xu;var en="web",Ku="webapp",tn="://",qi="#";var Yh=/^(\w+):\/\/([^/#]+)(\/[^#]*)?(#.*)?$/,Xh=/^(?:.*@)?(?:[a-z\d\u00a1-\uffff.-]+|\[[a-f\d:]+])(?::\d+)?$/,Qh=/^\/(?:[/\w\u00a1-\uffff-.~]|%[a-fA-F\d]{2})*$/,Kh=/^#(?:[/\w\u00a1-\uffff-.~]|%[a-fA-F\d]{2})+$/,Ju=(e="/")=>{let t=e.length;for(;t>0&&"/".indexOf(e.charAt(t-1))!==-1;)t-=1;return e.substring(0,t)||"/"},Jh=e=>he(e)?e.toLowerCase():"",Zh=e=>he(e)?e.toLowerCase():"",ey=e=>he(e)?Ju(e):"/",ty=e=>{let t=e.match(Yh);return t?{surfaceType:Jh(t[1]),authority:Zh(t[2]),path:ey(t[3]),fragment:t[4]}:null},ry=e=>`${e.surfaceType}${tn}${e.authority}${e.path||""}${e.fragment||""}`,Fi=e=>{let t=e(),r=t.host.toLowerCase(),o=t.pathname;return en+tn+r+Ju(o)},oy=(e,t)=>e.startsWith(qi)?Fi(t)+e:e,ny=(e,t,r)=>{let o=a=>(r.warn(a),null);if(!he(e))return o(`Invalid surface: ${e}`);let n=oy(e,t),i=ty(n);return i===null?o(`Invalid surface: ${e}`):[en,Ku].includes(i.surfaceType)?!i.authority||!Xh.test(i.authority)?o(`Invalid authority ${i.authority} in surface: ${e}`):i.path&&!Qh.test(i.path)?o(`Invalid path ${i.path} in surface: ${e}`):i.fragment&&!Kh.test(i.fragment)?o(`Invalid fragment ${i.fragment} in surface: ${e}`):i:o(`Unsupported surface type ${i.surfaceType} in surface: ${e}`)},Zu=e=>!!e&&e.indexOf(en+tn)===0&&e.indexOf(qi)===-1,ed=(e=[],t,r)=>e.map(o=>ny(o,t,r)).filter(o=>!Te(o)).map(ry);var xt="https://ns.adobe.com/personalization/default-content-item",Ht="https://ns.adobe.com/personalization/dom-action",Wt="https://ns.adobe.com/personalization/html-content-item",zt="https://ns.adobe.com/personalization/json-content-item",Gr="https://ns.adobe.com/personalization/ruleset-item",rn="https://ns.adobe.com/personalization/redirect-item",it="https://ns.adobe.com/personalization/message/in-app",td="https://ns.adobe.com/personalization/message/content-card";var ay=e=>{e.includes(qe)||e.push(qe)},sy=(e,t)=>{let r=Fi(t);e.includes(r)||e.push(r)},rd=e=>e.filter((t,r)=>e.indexOf(t)===r),od=({getPageLocation:e,renderDecisions:t,decisionScopes:r,personalization:o,event:n,isCacheInitialized:i,logger:a})=>{let s=n.getViewName();return{isRenderDecisions(){return t},isSendDisplayEvent(){return!!o.sendDisplayEvent},shouldIncludeRenderedPropositions(){return!!o.includeRenderedPropositions},getViewName(){return s},hasScopes(){return r.length>0||F(o.decisionScopes)},hasSurfaces(){return F(o.surfaces)},hasViewName(){return he(s)},createQueryDetails(){let c=[...r];F(o.decisionScopes)&&c.push(...o.decisionScopes);let u=ed(o.surfaces,e,a);this.shouldRequestDefaultPersonalization()&&(ay(c),sy(u,e));let l=[xt,Wt,zt,rn,Gr,it,td];return c.includes(qe)&&l.push(Ht),{schemas:l,decisionScopes:rd(c),surfaces:rd(u)}},isCacheInitialized(){return i},shouldFetchData(){return this.hasScopes()||this.hasSurfaces()||this.shouldRequestDefaultPersonalization()},shouldUseCachedData(){return this.hasViewName()&&!this.shouldFetchData()},shouldRequestDefaultPersonalization(){return o.defaultPersonalizationEnabled||!this.isCacheInitialized()&&o.defaultPersonalizationEnabled!==!1}}};var nd="Rendering is disabled for authoring mode.";var Yt="decisioning.propositionDisplay",Xt="decisioning.propositionInteract",Gi="decisioning.propositionTrigger",Hi="decisioning.propositionDismiss",Hr="decisioning.propositionSuppressDisplay";var ae={DISPLAY:"display",INTERACT:"interact",TRIGGER:"trigger",DISMISS:"dismiss",SUPPRESS:"suppressDisplay"},cy={[Yt]:ae.DISPLAY,[Xt]:ae.INTERACT,[Gi]:ae.TRIGGER,[Hi]:ae.DISMISS,[Hr]:ae.SUPPRESS},ly={[ae.DISPLAY]:Yt,[ae.INTERACT]:Xt,[ae.TRIGGER]:Gi,[ae.DISMISS]:Hi,[ae.SUPPRESS]:Hr},id=e=>cy[e],ad=e=>ly[e];var uy={propositions:[]},sd=({logger:e,options:t})=>{let r=x({propositions:te(x({id:k().required(),scope:k().required(),scopeDetails:x({decisionProvider:k().required()}).required(),items:te(x({id:k().required(),schema:k().required(),data:x($e())})).nonEmpty().required()}).required()).nonEmpty().required(),metadata:x($e()),viewName:k()}).required();try{return r(t)}catch(o){return e.warn("Invalid options for applyPropositions. No propositions will be applied.",o),uy}};var cd=({getPageLocation:e,logger:t,fetchDataHandler:r,viewChangeHandler:o,onClickHandler:n,isAuthoringModeEnabled:i,mergeQuery:a,viewCache:s,showContainers:c,applyPropositions:u,setTargetMigration:l,mergeDecisionsMeta:d,renderedPropositions:m,onDecisionHandler:f,handleConsentFlicker:p})=>({lifecycle:{onComponentsRegistered(){p()},onDecision:f,onBeforeRequest({request:b}){return l(b),Promise.resolve()},onBeforeEvent({event:b,renderDecisions:w,decisionScopes:C=[],personalization:I={},onResponse:_=W,onRequestFailure:P=W}){if(_(()=>({propositions:[]})),P(()=>c()),i())return t.warn(nd),a(b,{enabled:!1}),Promise.resolve();let z=od({getPageLocation:e,renderDecisions:w,decisionScopes:C,personalization:I,event:b,isCacheInitialized:s.isInitialized(),logger:t}),H=[];if(z.shouldIncludeRenderedPropositions()&&H.push(m.clear()),z.shouldFetchData()){let $=s.createCacheUpdate(z.getViewName());P(()=>$.cancel()),r({cacheUpdate:$,personalizationDetails:z,event:b,onResponse:_})}else z.shouldUseCachedData()&&H.push(o({personalizationDetails:z,event:b,onResponse:_,onRequestFailure:P}));return Promise.all(H).then($=>{let J=$.flatMap(se=>se);F(J)&&d(b,J,[ae.DISPLAY])})},onClick({event:b,clickedElement:w}){n({event:b,clickedElement:w})}},commands:{applyPropositions:{optionsValidator:b=>sd({logger:t,options:b}),run:u}}});var Qe=(e="undefined")=>ge(Ss,{},{innerHTML:e});var dy=":eq(",my=/:eq\((\d+)\)/g,on=e=>e.indexOf(dy)===-1,ld=e=>e.split(my).filter(he);var fy=/(#|\.)(-?\w+)/g,py=(e,t,r)=>`${t}${CSS.escape(r)}`,gy=e=>e.replace(fy,py),hy=e=>{let t=[],r=gy(e.trim()),o=ld(r),{length:n}=o,i=0;for(;i<n;){let a=o[i],s=o[i+1];s?t.push({sel:a,eq:Number(s)}):t.push({sel:a}),i+=2}return t},Qt=e=>{let t=document;if(on(e))return Ee(e,t);let r=hy(e),{length:o}=r,n=[],i=t,a=0;for(;a<o;){let{sel:s,eq:c}=r[a],u=Ee(s,i),{length:l}=u;if(l===0||c!=null&&c>l-1)break;a<o-1&&(c==null?[i]=u:i=u[c]),a===o-1&&(c==null?n=u:n=[u[c]]),a+=1}return n};var nn=(e,t=document)=>t.getElementById(e);var Ot=(e,t,r)=>{e.setAttribute(t,r)};var Ce=(e,t)=>e.getAttribute(t);var Wi=(e,t)=>{e.removeAttribute(t)};var Kt=(e,t,r,o)=>{let n;o?n=`${t}:${r} !${o};`:n=`${t}:${r};`,e.style.cssText+=`;${n}`};var an=e=>e.parentNode;var zi=e=>e.nextElementSibling;var Wr=(e,t)=>{if(!e)return;let r=an(e);r&&r.insertBefore(t,zi(e))};var Jt=(e,t)=>{if(!e)return;let r=an(e);r&&r.insertBefore(t,e)};var Yi=e=>{let{children:t}=e;return t?Ct(t):[]};var Ke=e=>{let{childNodes:t}=e;return t?Ct(t):[]};var Xi=e=>e.firstElementChild;var Qi,at=(e=document)=>{if(Qi===void 0){let t=e.querySelector("[nonce]");Qi=t&&(t.nonce||t.getAttribute("nonce"))}return Qi};var Je="src";var ud=e=>e.tagName===ar,Ki=e=>ge(ar,{src:e}),Nt=e=>{Ee(ar,e).forEach(r=>{let o=Ce(r,Je);o&&Ki(o)})};var yy=(e,t)=>e.tagName===t,Ey=e=>yy(e,sr)&&!Ce(e,Je),_t=e=>{let t=Ee(sr,e),{length:r}=t,o=at();if(o)for(let n=0;n<r;n+=1){let i=t[n];Ey(i)&&(i.nonce=o)}};var by=(e,t)=>new Promise((r,o)=>{t.onload=()=>{r(t)},t.onerror=()=>{o(new Error(`Failed to load script: ${e}`))}}),vy=e=>{let t=document.createElement("script");t.src=e,t.async=!0;let r=by(e,t);return document.head.appendChild(t),r},sn=(e,t)=>!!e&&e.tagName===t,Sy=e=>sn(e,cr)&&!Ce(e,Je),Cy=e=>sn(e,cr)&&Ce(e,Je),kt=e=>{let t=Ee(cr,e),r=[],{length:o}=t,n=at(),i={...n&&{nonce:n}};for(let a=0;a<o;a+=1){let s=t[a];if(!Sy(s))continue;let{textContent:c}=s;c&&r.push(ge(cr,i,{textContent:c}))}return r},Dt=e=>{let t=Ee(cr,e),r=[],{length:o}=t;for(let n=0;n<o;n+=1){let i=t[n];if(!Cy(i))continue;let a=Ce(i,Je);a&&r.push(a)}return r},Rt=(e,t)=>{t.forEach(r=>{e.appendChild(r),e.removeChild(r)})},Pt=e=>Promise.all(e.map(vy));var zr=(e,t,r)=>{let o=Qe(t);_t(o);let n=Ke(o),i=kt(o),a=Dt(o);return Nt(o),n.forEach(s=>{je(e,s)}),r(e),Rt(e,i),Pt(a)};var wy=e=>{Ke(e).forEach(Be)},Ji=(e,t,r)=>(wy(e),zr(e,t,r));var cn=(e,t,r)=>{let o=Qe(t);_t(o);let n=Ke(o),i=kt(o),a=Dt(o),{length:s}=n,c=s-1;for(Nt(o);c>=0;){let u=n[c];r(u);let l=Xi(e);l?Jt(l,u):je(e,u),c-=1}return Rt(e,i),Pt(a)};var Zi="alloy-prehiding",Iy="{ visibility: hidden }",ln={},un=e=>{if(ln[e])return;let t=at(),r={...t&&{nonce:t}},o={textContent:`${e} ${Iy}`},n=ge(sr,r,o);je(document.head,n),ln[e]=n},Yr=e=>{let t=ln[e];t&&(Be(t),delete ln[e])},dd=e=>t=>{if(!t||nn(Zi))return;let o=at(),n={id:Zi,...o&&{nonce:o}},a=ge(sr,n,{textContent:t});e.logOnContentHiding({status:"hide-containers",message:"Prehiding style applied to hide containers.",logLevel:"info"}),je(document.head,a)},md=e=>()=>{let t=nn(Zi);t&&(e.logOnContentHiding({status:"show-containers",message:"Prehiding style removed to show containers.",logLevel:"info"}),Be(t))};var ea=(e,t,r)=>{r(e),e.textContent=t};var Xr=(e,t,r)=>{let o=Qe(t);_t(o);let n=Ke(o),i=kt(o),a=Dt(o);return Nt(o),n.forEach(s=>{r(s),Jt(e,s)}),Rt(e,i),Pt(a)};var ta=(e,t,r)=>Xr(e,t,r).then(()=>{Be(e)});var ra=(e,t,r)=>{let o=Qe(t);_t(o);let n=Ke(o),i=kt(o),a=Dt(o);Nt(o);let s=e;return n.forEach(c=>{r(c),Wr(s,c),s=c}),Rt(e,i),Pt(a)};var oa=(e,t,r)=>{let{priority:o,...n}=t;Object.keys(n).forEach(i=>{Kt(e,i,n[i],o)}),r(e)};var na=(e,t,r)=>{Object.keys(t).forEach(o=>{Ot(e,o,t[o])}),r(e)};var ia=(e,t,r)=>{ud(e)&&(Ki(t),r(e),Wi(e,Je),Ot(e,Je,t))};var aa=(e,{from:t,to:r},o)=>{let n=Yi(e),i=n[t],a=n[r];!i||!a||(t<r?Wr(a,i):Jt(a,i),o(a),o(i))};var Ay=(e,t,r,o)=>{let n=e.map(i=>o(i,t,r));return Promise.all(n)},ve=e=>(t,r)=>{let{selector:o,prehidingSelector:n,content:i}=t;return un(n),Nr(o,Qt).then(a=>Ay(a,i,r,e)).then(()=>{Yr(n)},a=>{throw Yr(n),a})};var dn=e=>`${e}`.endsWith("px")?e:`${e}px`;var fd=(e,t,r)=>{let{priority:o,...n}=t;Object.keys(n).forEach(i=>{let a=n[i];(i==="left"||i==="top")&&(a=dn(a)),Kt(e,i,a,o)}),r(e)};var pd=(e,t,r)=>{r(e)};var gd=(e,t,r)=>{let{priority:o,...n}=t;Object.keys(n).forEach(i=>{let a=n[i];(i==="width"||i==="height")&&(a=dn(a)),Kt(e,i,a,o)}),r(e)};var Ty="setHtml",sa="customCode",xy="setText",Oy="setAttribute",Ny="setImageSource",_y="setStyle",ky="move",Dy="resize",Ry="rearrange",Py="remove",My="insertAfter",Ly="insertBefore",Vy="replaceHtml",Uy="prependHtml",ca="appendHtml",mn="click",la="collectInteractions",ua=()=>({[Ty]:ve(Ji),[sa]:ve(cn),[xy]:ve(ea),[Oy]:ve(na),[Ny]:ve(ia),[_y]:ve(oa),[ky]:ve(fd),[Dy]:ve(gd),[Ry]:ve(aa),[Py]:ve(Be),[My]:ve(ra),[Ly]:ve(Xr),[Vy]:ve(ta),[Uy]:ve(cn),[ca]:ve(zr),[la]:ve(pd)});var fn=({eventManager:e,mergeDecisionsMeta:t})=>({decisionsMeta:r=[],propositionAction:o,documentMayUnload:n=!1,eventType:i=Yt,propositionEventTypes:a=[id(i)],viewName:s})=>{let c=e.createEvent(),u={eventType:i};return s&&(u.web={webPageDetails:{viewName:s}}),F(r)&&t(c,r,a,o),c.mergeXdm(u),n&&c.documentMayUnload(),e.sendEvent(c)};var jy="personalization:decisions",hd=({logger:e,prehidingStyle:t,showContainers:r,hideContainers:o,mergeQuery:n,processPropositions:i,createProposition:a,notificationHandler:s,consent:c})=>({cacheUpdate:u,personalizationDetails:l,event:d,onResponse:m})=>{let{state:f,wasSet:p}=c.current();f==="out"&&p||(l.isRenderDecisions()?o(t):r()),n(d,l.createQueryDetails());let b=s(l.isRenderDecisions(),l.isSendDisplayEvent(),l.getViewName());m(({response:w})=>{let C=w.getPayloadsByType(jy);F(C)||e.logOnContentRendering({status:"no-offers",message:"No offers were returned.",logLevel:"info",detail:{query:l.createQueryDetails()}});let I=C.map(re=>a(re)),{page:_=[],view:P=[],proposition:z=[]}=Bt(I,re=>re.getScopeType()),H=u.update(P),$,J,se;return l.isRenderDecisions()?({render:$,returnedPropositions:J,returnedDecisions:se}=i([..._,...H],z),F(_)&&e.logOnContentRendering({status:"rendering-started",message:"Started rendering propositions for page-wide scope.",logLevel:"info",detail:{scope:qe,propositions:_.map(re=>re.toJSON())}}),F(H)&&e.logOnContentRendering({status:"rendering-started",message:`Rendering propositions started for view scope - ${l.getViewName()}.`,logLevel:"info",detail:{scope:l.getViewName(),propositions:H.map(re=>re.toJSON())}}),$().then(b),r()):{returnedPropositions:J,returnedDecisions:se}=i([],[..._,...H,...z]),{propositions:J,decisions:se}})};var yd=(e,t)=>{if(on(e))return ri(e,t);let r=Qt(e),o=!1;for(let n=0;n<r.length;n+=1)if(r[n]===t){o=!0;break}return o};var ht="view",Ed="page",bd="proposition";var pn=e=>e.map(t=>{let{trackingLabel:r,scopeType:o,...n}=t;return n}),vd=e=>e.filter((t,r)=>{let o=JSON.stringify(t);return r===e.findIndex(n=>JSON.stringify(n)===o)});var By=(e,t,r)=>{let{documentElement:o}=document,n=e,i=0;for(;n&&n!==o;){if(yd(t,n)){let a=r(t),s={metas:a},c=a.find(l=>l.trackingLabel);c&&(s.label=c.trackingLabel,s.weight=i);let u=a.find(l=>l.scopeType===ht);return u&&(s.viewName=u.scope,s.weight=i),s}n=n.parentNode,i+=1}return{metas:null}},Sd=(e,t,r)=>{let o=[],n="",i=Number.MAX_SAFE_INTEGER,a,s=Number.MAX_SAFE_INTEGER;for(let c=0;c<t.length;c+=1){let{metas:u,label:l,weight:d,viewName:m}=By(e,t[c],r);u&&(l&&d<=i&&(n=l,i=d),m&&d<=s&&(a=m,s=d),o.push(...pn(u)))}return{decisionsMeta:vd(o),propositionActionLabel:n,propositionActionToken:void 0,viewName:a}};var Cd=(e=document)=>e.location.href.indexOf("adobe_authoring_enabled")!==-1;var yr=(e,t,r,o)=>{if(t.length===0)return;let n={};r.forEach(a=>{n[a]=1});let i={_experience:{decisioning:{propositions:t,propositionEventType:n}}};o&&(i._experience.decisioning.propositionAction=o),e.mergeXdm(i)},da=(e,t)=>{e.mergeQuery({personalization:{...t}})};var $y=(e,t)=>{if(!t&&!e)return;let r={};return e&&(r.label=e),t&&(r.tokens=[t]),r},wd=({mergeDecisionsMeta:e,collectInteractions:t,collectClicks:r,getInteractionMetas:o,getClickMetas:n,getClickSelectors:i,autoCollectPropositionInteractions:a})=>({event:s,clickedElement:c})=>{let u=[],l,d,m;if([t(c,o,a),r(c,i(),n)].forEach(({decisionsMeta:f,propositionActionLabel:p,propositionActionToken:b,viewName:w})=>{Array.prototype.push.apply(u,f),!l&&p&&(l=p),!d&&b&&(d=b),!m&&w&&(m=w)}),F(u)){let f={eventType:Xt};m&&(f.web={webPageDetails:{viewName:m}}),s.mergeXdm(f),e(s,u,[ae.INTERACT],$y(l,d))}};var Id=({createProposition:e})=>{let t=!1,r=Promise.resolve({}),o=(s,c)=>{let u=s[c.toLowerCase()];return u&&u.length>0?u:[e({scope:c,scopeDetails:{characteristics:{scopeType:ht}},items:[{schema:xt}]},!1)]};return{createCacheUpdate:s=>{let c=ct();return t=!0,r=r.then(u=>c.promise.then(l=>({...u,...l})).catch(()=>u)),{update(u){let l=u.filter(m=>m.getScope()),d=Bt(l,m=>m.getScope().toLowerCase());return c.resolve(d),s?o(d,s):[]},cancel(){c.reject()}}},getView:s=>r.then(c=>o(c,s)),isInitialized:()=>t}};var Ad=({processPropositions:e,viewCache:t,logger:r})=>({personalizationDetails:o,onResponse:n})=>{let i,a,s=o.getViewName();return n(()=>({propositions:i,decisions:a})),t.getView(s).then(c=>{let u;return o.isRenderDecisions()?({render:u,returnedPropositions:i,returnedDecisions:a}=e(c),r.logOnContentRendering({status:"rendering-started",message:`Started rendering propositions for view scope - ${s}.`,logLevel:"info",detail:{scope:s,propositions:c.map(l=>l.toJSON())}}),u()):({returnedPropositions:i,returnedDecisions:a}=e([],c),[])})};var qy=e=>Object.keys(e).map(t=>({id:t,...e[t]})),Td=()=>{let e={};return{storeClickMeta:({selector:n,meta:{id:i,scope:a,scopeDetails:s,trackingLabel:c,scopeType:u}})=>{e[n]||(e[n]={}),e[n][i]={scope:a,scopeDetails:s,trackingLabel:c,scopeType:u}},getClickSelectors:()=>Object.keys(e),getClickMetas:n=>e[n]?qy(e[n]):{}}};var xd=()=>{let e={},t={};return{storeInteractionMeta:(n,i,a,s,c)=>{c=parseInt(c,10),e[c]||(e[c]={},t[c]={}),t[c][n]||(t[c][n]=new Set),t[c][n].add(i),e[c][n]={...s,scopeType:a}},getInteractionMetas:n=>!Array.isArray(n)||n.length===0?[]:Object.values(n.map(i=>parseInt(i,10)).reduce((i,a)=>(Object.keys(e[a]||{}).forEach(s=>{i[s]||(i[s]={proposition:e[a][s],items:new Set}),i[s].items=new Set([...i[s].items,...t[a][s]])}),i),{})).map(({proposition:i,items:a})=>({...i,items:Array.from(a).map(s=>({id:s}))}))}};var ma=(e,t)=>e===zt&&t===la,Od={[Ht]:()=>!0,[Wt]:()=>!0,[zt]:ma,[it]:()=>!0,[xt]:()=>!0},Fy=(e,t)=>typeof Od[e]=="function"&&Od[e](e,t),Nd=({processPropositions:e,createProposition:t,renderedPropositions:r,viewCache:o})=>{let n=({items:s,metadataForScope:c={}})=>{let{actionType:u,selector:l}=c;return s.filter(d=>Fy(d.schema,u)).map(d=>{let{schema:m}=d;if(m!==Wt&&!ma(m,u))return{...d};if(!ue(c))return{...d,schema:ma(m,u)?Ht:m,data:{...d.data,selector:l,type:u}}}).filter(d=>d)},i=s=>!(s.scope===qe&&s.renderAttempted),a=({propositions:s,metadata:c})=>s.filter(i).map(u=>{if(F(u.items)){let{id:l,scope:d,scopeDetails:m}=u;return{id:l,scope:d,scopeDetails:m,items:n({items:u.items,metadataForScope:c[u.scope]})}}return u}).filter(u=>F(u.items));return({propositions:s=[],metadata:c={},viewName:u})=>{let l=ct();r.concat(l.promise);let d=a({propositions:s,metadata:c}).map(m=>t(m));return Promise.resolve().then(()=>u?o.getView(u):[]).then(m=>{let{render:f,returnedPropositions:p}=e([...d,...m]);return f().then(l.resolve),{propositions:p}})}};var _d=({window:e})=>()=>e.location;var kd=({targetMigrationEnabled:e})=>e?t=>{t.getPayload().mergeMeta({target:{migration:!0}})}:W;var Gy="BODY > *:eq(0)",Dd=e=>{let{selector:t,type:r}=e;return r!==sa||t!==Gy?e:{...e,selector:"BODY"}};var Hy="SCRIPT,LINK,STYLE",Wy=e=>{let t=Qe(e);return Ee(Hy,t).map(o=>o.outerHTML).join("")},Rd=e=>{let t={...e},{content:r,selector:o}=t;if(Jo(r)||o==null)return t;let n=Qt(o);return sn(n[0],Cs)&&(t.type=ca,t.content=Wy(r)),t};var Pd=e=>t=>t&&e.reduce((r,o)=>({...r,...o(r)}),t);var Md=({preprocess:e,isPageWideSurface:t})=>{let r=(o,n)=>{let{id:i,schema:a,data:s,characteristics:{trackingLabel:c}={}}=o,u=s?s.type:void 0,l=e(s);return{getId(){return i},getSchema(){return a},getSchemaType(){return u},getData(){return l},getProposition(){return n},getTrackingLabel(){return c},getOriginalItem(){return o},toString(){return JSON.stringify(o)},toJSON(){return o}}};return(o,n=!0,i=!1)=>{let{id:a,scope:s,scopeDetails:c,items:u=[]}=o,{characteristics:{scopeType:l}={}}=c||{};return{getScope(){return s},getScopeType(){return s===qe||t(s)?Ed:l===ht?ht:bd},getItems(){return u.map(d=>r(d,this))},getNotification(){return{id:a,scope:s,scopeDetails:c}},getId(){return a},toJSON(){return o},shouldSuppressDisplay(){return i},addToReturnValues(d,m,f,p){n&&(d.push({...o,items:f.map(b=>b.getOriginalItem()),renderAttempted:p}),p||m.push({...o,items:f.map(b=>b.getOriginalItem())}))}}}};var Ld=()=>{let e=Promise.resolve([]);return{concat(t){e=e.then(r=>t.then(o=>r.concat(o)).catch(()=>r))},clear(){let t=e;return e=Promise.resolve([]),t}}};var Vd=()=>({render:W,setRenderAttempted:!0,includeInNotification:!0});var Mt="always",gn="never",Qr="decoratedElementsOnly",Ud=[Mt,gn,Qr];var hn="data-aep-interact-id",yn="data-aep-click-label",jd="data-aep-click-token",zy=0,Yy=(e,t)=>t?parseInt(t,10):++zy,Xy=(e,t)=>!e||!e[t]?!1:[Mt,Qr].includes(e[t]),Qy=(e,t,r,o,n,i,a,s)=>{let{scopeDetails:c={}}=a,{decisionProvider:u}=c;return!Xy(e,u)&&t!==mn?W:l=>{if(!l.tagName)return;let d=Yy(r,Ce(l,hn));s(r,o,i,a,d),Ot(l,hn,d),n&&!Ce(l,yn)&&Ot(l,yn,n)}},En=Qy;var Bd=({modules:e,logger:t,storeInteractionMeta:r,storeClickMeta:o,autoCollectPropositionInteractions:n})=>i=>{let{type:a,selector:s}=i.getData()||{};if(!a)return t.warn("Invalid DOM action data: missing type.",i.getData()),{setRenderAttempted:!1,includeInNotification:!1};if(a===mn)return s?(o({selector:s,meta:{...i.getProposition().getNotification(),trackingLabel:i.getTrackingLabel(),scopeType:i.getProposition().getScopeType()}}),{setRenderAttempted:!0,includeInNotification:!1}):(t.warn("Invalid DOM action data: missing selector.",i.getData()),{setRenderAttempted:!1,includeInNotification:!1});if(!e[a])return t.warn("Invalid DOM action data: unknown type.",i.getData()),{setRenderAttempted:!1,includeInNotification:!1};let c=En(n,a,i.getProposition().getId(),i.getId(),i.getTrackingLabel(),i.getProposition().getScopeType(),i.getProposition().getNotification(),r);return{render:()=>e[a](i.getData(),c),setRenderAttempted:!0,includeInNotification:!0}};var $d=({modules:e,logger:t,storeInteractionMeta:r,autoCollectPropositionInteractions:o})=>n=>{let{type:i,selector:a}=n.getData()||{};if(!a||!i)return{setRenderAttempted:!1,includeInNotification:!1};if(!e[i])return t.warn("Invalid HTML content data",n.getData()),{setRenderAttempted:!1,includeInNotification:!1};let s=En(o,i,n.getProposition().getId(),n.getId(),n.getTrackingLabel(),n.getProposition().getScopeType(),n.getProposition().getNotification(),r);return{render:()=>e[i](n.getData(),s),setRenderAttempted:!0,includeInNotification:!0}};var qd="BODY",Fd=({logger:e,executeRedirect:t,collect:r})=>o=>{let{content:n}=o.getData()||{};return n?{render:()=>(un(qd),r({decisionsMeta:[o.getProposition().getNotification()],documentMayUnload:!0}).then(()=>(e.logOnContentRendering({status:"rendering-redirect",detail:{propositionDetails:o.getProposition().getNotification(),redirect:n},message:`Redirect action ${o.toString()} executed.`,logLevel:"info"}),t(n))).catch(a=>{throw Yr(qd),a})),setRenderAttempted:!0,onlyRenderThis:!0}:(e.warn("Invalid Redirect data",o.getData()),{})};var Gd=({schemaProcessors:e,logger:t})=>{let r=(a,s)=>()=>Promise.resolve().then(a).then(()=>(t.enabled&&t.info(`Action ${s.toString()} executed.`),s.toJSON())).catch(c=>{let{message:u,stack:l}=c,d=`Failed to execute action ${s.toString()}. ${u} ${l}`;t.logOnContentRendering({status:"rendering-failed",detail:{propositionDetails:s.getProposition().getNotification(),item:s.toJSON()},error:c,message:d,logLevel:"warn"})}),o=async(a,s)=>{let u=(await Promise.allSettled(a.map(l=>l()))).filter(l=>l.status==="fulfilled").map(l=>l.value);if(s&&F(u))return{...s,items:u}},n=a=>{let s=e[a.getSchema()];return s?s(a):{}},i=({renderers:a,returnedPropositions:s,returnedDecisions:c,items:u,proposition:l})=>{let d=[...a],m=[...s],f=[...c],p=[],b=[],w=[],C=!1,I,_,P,z=!1,H=0,$;for(;u.length>H;){if($=u[H],{render:I,setRenderAttempted:_,includeInNotification:P,onlyRenderThis:z}=n($),z){m=[],f=[],_?(p=[$],b=[]):(p=[],b=[$]),d=[],w=[I],C=P;break}I&&w.push(r(I,$)),P&&(C=!0),_?p.push($):b.push($),H+=1}if(w.length>0){let J=C?l.getNotification():void 0;d.push(()=>o(w,J))}else C&&d.push(()=>Promise.resolve(l.getNotification()));return p.length>0&&l.addToReturnValues(m,f,p,!0),b.length>0&&l.addToReturnValues(m,f,b,!1),{renderers:d,returnedPropositions:m,returnedDecisions:f,onlyRenderThis:z}};return(a,s=[])=>{let c=[],u=[],l=[],d,m=0,f,p;for(;a.length>m&&(f=a[m],p=f.getItems(),{renderers:c,returnedPropositions:u,returnedDecisions:l,onlyRenderThis:d}=i({renderers:c,returnedPropositions:u,returnedDecisions:l,items:p,proposition:f}),!d);)m+=1;return d&&a.forEach((w,C)=>{C!==m&&w.addToReturnValues(u,l,w.getItems(),!1)}),s.forEach(w=>{w.addToReturnValues(u,l,w.getItems(),!1)}),{returnedPropositions:u,returnedDecisions:l,render:()=>Promise.all(c.map(w=>w())).then(w=>{let C=w.filter(_=>_),I=C.map(_=>{let{id:P,scope:z,scopeDetails:H}=_;return{id:P,scope:z,scopeDetails:H}});if(F(C)){let _=Bt(C,P=>P.scope);t.logOnContentRendering({status:"rendering-succeeded",detail:{..._},message:`Scopes: ${JSON.stringify(_)} successfully executed.`,logLevel:"info"})}return I})}}};var Ky=()=>{let e=0;return t=>{let{items:r=[]}=t;return r.some(o=>o.schema===it)?(e+=1,e>1):!1}},Hd=({processPropositions:e,createProposition:t,notificationHandler:r})=>({renderDecisions:o,propositions:n,event:i,personalization:a={}})=>{if(!o)return Promise.resolve();let{sendDisplayEvent:s=!0}=a,c=i?i.getViewName():void 0,u=Ky(),l=n.map(b=>t(b,!0,u(b))),{render:d,returnedPropositions:m}=e(l),f=r(o,s,c),p=l.reduce((b,w)=>(b[w.getId()]=w,b),{});return d().then(b=>{let w=b.filter(I=>!p[I.id].shouldSuppressDisplay()),C=b.filter(I=>p[I.id].shouldSuppressDisplay());f(w,C)}),Promise.resolve({propositions:m})};var Kr="text/html",Wd="application/json";var Jy="defaultContent",zd=["content","contentType"],Yd=["mobileParameters","webParameters","html"],Zy=(e,t)=>{for(let n=0;n<zd.length;n+=1){let i=zd[n];if(!Object.prototype.hasOwnProperty.call(e,i))return t.warn(`Invalid in-app message data: missing property '${i}'.`,e),!1}let{content:r,contentType:o}=e;if(o===Wd)for(let n=0;n<Yd.length;n+=1){let i=Yd[n];if(!Object.prototype.hasOwnProperty.call(r,i))return t.warn(`Invalid in-app message data.content: missing property '${i}'.`,e),!1}return!0},Xd=({modules:e,logger:t})=>r=>{let o=r.getData(),n=r.getProposition(),i={...n.getNotification()},a=n.shouldSuppressDisplay();if(!o)return t.warn("Invalid in-app message data: undefined.",o),{};let{type:s=Jy}=o;return e[s]?Zy(o,t)?i?{render:()=>a?null:e[s]({...o,meta:i}),setRenderAttempted:!0,includeInNotification:!0}:(t.warn("Invalid in-app message meta: undefined.",i),{}):{}:(t.warn("Invalid in-app message data: unknown type.",o),{})};var Qd=e=>{let t=Ee(`#${e}`,document);t&&t.length>0&&Be(t[0])},Kd=e=>{let t={};if(!e||e.tagName.toLowerCase()!=="a")return t;let{href:r}=e;if(!r||!r.startsWith("adbinapp://"))return t;let o=r.split("?"),n=o[0].split("://")[1],i=e.innerText,a=e.getAttribute("data-uuid")||"",s,c;if(F(o)){let u=ot.parse(o[1]);s=u.interaction||"",c=Fr(u.link||"")}return{action:n,interaction:s,link:c,label:i,uuid:a}};var bn=e=>(t,r=!1)=>(r?e.location.href=t:e.location.replace(t),new Promise(()=>{}));var Jr="alloy-messaging-container",Zr="alloy-overlay-container",fa="alloy-content-iframe",Zd=()=>[Jr,Zr].forEach(Qd),eE=(e,t=bn(window))=>r=>{r.preventDefault(),r.stopImmediatePropagation();let{target:o}=r,n=o.tagName.toLowerCase()==="a"?o:o.closest("a");if(!n)return;let{action:i,interaction:a,link:s,label:c,uuid:u}=Kd(n);e(i,{label:c,id:a,uuid:u,link:s}),i==="dismiss"&&Zd(),he(s)&&s.length>0&&t(s,!0)},tE=(e,t)=>{let o=new DOMParser().parseFromString(e,Kr),n=o.querySelector("script");n&&n.setAttribute("nonce",at());let i=ge("iframe",{src:URL.createObjectURL(new Blob([o.documentElement.outerHTML],{type:"text/html"})),id:fa});return i.addEventListener("load",()=>{let{addEventListener:a}=i.contentDocument||i.contentWindow.document;a("click",t)}),i},rE=(e,t,r,o)=>{[{id:Zr,element:o},{id:Jr,element:r},{id:fa,element:e}].forEach(({id:n,element:i})=>{let{style:a={},params:s={}}=t[n];i.style={...i.style,...a};let{parentElement:c="body",insertionMethod:u="appendChild",enabled:l=!0}=s,d=document.querySelector(c);l&&d&&typeof d[u]=="function"&&d[u](i)})},oE=e=>{let{verticalAlign:t,width:r,horizontalAlign:o,backdropColor:n,height:i,cornerRadius:a,horizontalInset:s,verticalInset:c,uiTakeover:u=!1}=e,l={width:r?`${r}%`:"100%",backgroundColor:n||"rgba(0, 0, 0, 0.5)",borderRadius:a?`${a}px`:"0px",border:"none",position:u?"fixed":"relative",overflow:"hidden"};return o==="left"?l.left=s?`${s}%`:"0":o==="right"?l.right=s?`${s}%`:"0":o==="center"&&(l.left="50%",l.transform="translateX(-50%)"),t==="top"?l.top=c?`${c}%`:"0":t==="bottom"?(l.position="fixed",l.bottom=c?`${c}%`:"0"):t==="center"&&(l.top="50%",l.transform=`${o==="center"?`${l.transform} `:""}translateY(-50%)`,l.display="flex",l.alignItems="center",l.justifyContent="center"),i?l.height=`${i}vh`:l.height="100%",l},nE=e=>{let{backdropOpacity:t,backdropColor:r}=e;return{position:"fixed",top:"0",left:"0",width:"100%",height:"100%",background:"transparent",opacity:t||.5,backgroundColor:r||"#FFFFFF"}},Jd=["enabled","parentElement","insertionMethod"],iE=e=>{if(!e)return!1;let t=Object.keys(e);if(!t.includes(Jr)||!t.includes(Zr))return!1;let r=Object.values(e);for(let o=0;o<r.length;o+=1){if(!x(r[o],"style")||!x(r[o],"params"))return!1;for(let n=0;n<Jd.length;n+=1)if(!x(r[o].params,Jd[n]))return!1}return!0},aE=e=>{if(!e)return;let{uiTakeover:t=!1}=e;return{[fa]:{style:{border:"none",width:"100%",height:"100%"},params:{enabled:!0,parentElement:"#alloy-messaging-container",insertionMethod:"appendChild"}},[Jr]:{style:oE(e),params:{enabled:!0,parentElement:"body",insertionMethod:"appendChild"}},[Zr]:{style:nE(e),params:{enabled:t===!0,parentElement:"body",insertionMethod:"appendChild"}}}},sE=(e={},t)=>{Zd();let{content:r,contentType:o,mobileParameters:n}=e,{webParameters:i}=e;if(o!==Kr)return;let a=ge("div",{id:Jr}),s=tE(r,eE(t)),c=ge("div",{id:Zr});iE(i)||(i=aE(n)),i&&rE(s,i,a,c)},em=(e,t)=>new Promise(r=>{let{meta:o}=e;sE(e,(n,i)=>{let a={};a[ae.INTERACT]=1,Object.values(ae).indexOf(n)!==-1&&(a[n]=1),t({decisionsMeta:[o],propositionAction:i,eventType:Xt,propositionEventTypes:Object.keys(a)})}),r({meta:o})});var tm=e=>({defaultContent:t=>em(t,e)});var rm=(e,t)=>(r,o,n)=>{if(!r)return()=>{};if(!o){let i=ct();return t.concat(i.promise),i.resolve}return(i=[],a=[])=>{F(i)&&e({decisionsMeta:i,viewName:n}),F(a)&&e({decisionsMeta:a,eventType:Hr,propositionAction:{reason:"Conflict"},viewName:n})}};var om=({showContainers:e,consent:t})=>()=>{let{state:r,wasSet:o}=t.current();r===ur&&o?e():t.awaitConsent().catch(e)};var cE=e=>{let{documentElement:t}=document,r=e,o=new Set,n,i;for(;r&&r!==t;){let a=Ce(r,hn);a&&o.add(a),n=n||Ce(r,yn),i=i||Ce(r,jd),r=r.parentNode}return{interactIds:[...o],clickLabel:n,clickToken:i}},lE=e=>{let t=e.find(r=>r.scopeType===ht);return t?t.scope:void 0},uE=(e,t,r)=>o=>{let{scopeDetails:n={}}=o,{decisionProvider:i}=n;return e[i]===Mt?!0:e[i]===Qr&&(t||r)},nm=(e,t,r)=>{let{interactIds:o,clickLabel:n="",clickToken:i}=cE(e),a=uE(r,n,i);if(o.length===0)return{};let s=t(o).filter(a);return{decisionsMeta:pn(s),propositionActionLabel:n,propositionActionToken:i,viewName:lE(s)}};var eo="AJO",pa="TGT";var ga=({config:e,logger:t,eventManager:r,consent:o})=>{let{targetMigrationEnabled:n,prehidingStyle:i,autoCollectPropositionInteractions:a}=e,s=fn({eventManager:r,mergeDecisionsMeta:yr}),c=md(t),u=dd(t),{storeInteractionMeta:l,getInteractionMetas:d}=xd(),{storeClickMeta:m,getClickSelectors:f,getClickMetas:p}=Td(),b=_d({window}),w=ua(),C=Pd([Rd,Dd]),I=Md({preprocess:C,isPageWideSurface:Zu}),_=Id({createProposition:I}),P=bn(window),z={[xt]:Vd,[Ht]:Bd({modules:w,logger:t,storeInteractionMeta:l,storeClickMeta:m,autoCollectPropositionInteractions:a}),[Wt]:$d({modules:w,logger:t,storeInteractionMeta:l,autoCollectPropositionInteractions:a}),[rn]:Fd({logger:t,executeRedirect:P,collect:s}),[it]:Xd({modules:tm(s),logger:t})},H=Gd({schemaProcessors:z,logger:t}),$=Ld(),J=rm(s,$),se=hd({prehidingStyle:i,showContainers:c,hideContainers:u,mergeQuery:da,processPropositions:H,createProposition:I,notificationHandler:J,consent:o,logger:t}),re=wd({mergeDecisionsMeta:yr,collectInteractions:nm,collectClicks:Sd,getInteractionMetas:d,getClickMetas:p,getClickSelectors:f,autoCollectPropositionInteractions:a}),Oe=Ad({processPropositions:H,viewCache:_,logger:t}),Ne=Nd({processPropositions:H,createProposition:I,renderedPropositions:$,viewCache:_}),Ae=kd({targetMigrationEnabled:n}),we=Hd({processPropositions:H,createProposition:I,notificationHandler:J}),Se=om({showContainers:c,consent:o});return cd({getPageLocation:b,logger:t,fetchDataHandler:se,viewChangeHandler:Oe,onClickHandler:re,isAuthoringModeEnabled:Cd,mergeQuery:da,viewCache:_,showContainers:c,applyPropositions:Ne,setTargetMigration:Ae,mergeDecisionsMeta:yr,renderedPropositions:$,onDecisionHandler:we,handleConsentFlicker:Se})};ga.namespace="Personalization";var im=Ud.map(e=>bi(e));ga.configValidators=x({prehidingStyle:k().nonEmpty(),targetMigrationEnabled:X().default(!1),autoCollectPropositionInteractions:x({[eo]:At(im).default(Mt),[pa]:At(im).default(gn)}).default({[eo]:Mt,[pa]:gn}).noUnknownFields()});var am=ga;var sm="personalization:decisions";var cm=e=>e!==null&&typeof e=="object"&&Object.getPrototypeOf(e)===Object.prototype,lm=(e,t={},r=[])=>(Object.keys(e).forEach(o=>{cm(e[o])||Array.isArray(e[o])?lm(e[o],t,[...r,o]):t[[...r,o].join(".")]=e[o]}),t),vn=e=>cm(e)?lm(e):e;var um=({renderDecisions:e,decisionProvider:t,applyResponse:r,event:o,personalization:n,decisionContext:i})=>{let a={...vn(o.getContent()),...i};return({response:s})=>{if(t.addPayloads(s.getPayloadsByType(sm)),!o.hasQuery())return{propositions:[]};let c=t.evaluate(a);return r({renderDecisions:e,propositions:c,event:o,personalization:n})}};var ha={MATCHER:"matcher",GROUP:"group",HISTORICAL:"historical"},ye={EQUALS:"eq",NOT_EQUALS:"ne",EXISTS:"ex",NOT_EXISTS:"nx",GREATER_THAN:"gt",GREATER_THAN_OR_EQUAL_TO:"ge",LESS_THAN:"lt",LESS_THAN_OR_EQUAL_TO:"le",CONTAINS:"co",NOT_CONTAINS:"nc",STARTS_WITH:"sw",ENDS_WITH:"ew"},dm={AND:"and",OR:"or"},dE={ORDERED:"ordered"};function Fe(e){return typeof e=="object"||typeof e>"u"}function mE(){return{matches:(e,t,r=[])=>{if(Fe(e[t]))return!1;let o=String(e[t]).toLowerCase();for(let n=0;n<r.length;n+=1)if(!Fe(r[n])&&o===String(r[n]).toLowerCase())return!0;return!1}}}function fE(){return{matches:(e,t,r=[])=>{if(Fe(e[t]))return!1;let o=String(e[t]).toLowerCase();for(let n=0;n<r.length;n+=1)if(!Fe(r[n])&&o===String(r[n]).toLowerCase())return!1;return!0}}}function pE(){return{matches:(e,t)=>typeof e[t]<"u"&&e[t]!==null}}function gE(){return{matches:(e,t)=>typeof e[t]>"u"||e[t]===null}}function Lt(e){return typeof e=="number"}function hE(){return{matches:(e,t,r=[])=>{let o=e[t];if(!Lt(o))return!1;for(let n=0;n<r.length;n+=1)if(Lt(r[n])&&o>r[n])return!0;return!1}}}function yE(){return{matches:(e,t,r=[])=>{let o=e[t];if(!Lt(o))return!1;for(let n=0;n<r.length;n+=1)if(Lt(r[n])&&o>=r[n])return!0;return!1}}}function EE(){return{matches:(e,t,r=[])=>{let o=e[t];if(!Lt(o))return!1;for(let n=0;n<r.length;n+=1)if(Lt(r[n])&&o<r[n])return!0;return!1}}}function bE(){return{matches:(e,t,r=[])=>{let o=e[t];if(!Lt(o))return!1;for(let n=0;n<r.length;n+=1)if(Lt(r[n])&&o<=r[n])return!0;return!1}}}function vE(){return{matches:(e,t,r=[])=>{if(Fe(e[t]))return!1;let o=String(e[t]).toLowerCase();for(let n=0;n<r.length;n+=1)if(!Fe(r[n])&&o.indexOf(String(r[n]).toLowerCase())!==-1)return!0;return!1}}}function SE(){return{matches:(e,t,r=[])=>{if(Fe(e[t]))return!1;let o=String(e[t]).toLowerCase();for(let n=0;n<r.length;n+=1)if(!Fe(r[n])&&o.indexOf(String(r[n]).toLowerCase())!==-1)return!1;return!0}}}function CE(){return{matches:(e,t,r=[])=>{if(Fe(e[t]))return!1;let o=String(e[t]).toLowerCase();for(let n=0;n<r.length;n+=1)if(!Fe(r[n])&&o.startsWith(String(r[n]).toLowerCase()))return!0;return!1}}}function wE(){return{matches:(e,t,r=[])=>{if(Fe(e[t]))return!1;let o=String(e[t]).toLowerCase();for(let n=0;n<r.length;n+=1)if(!Fe(r[n])&&o.endsWith(r[n].toLowerCase()))return!0;return!1}}}var IE={[ye.EQUALS]:mE(),[ye.NOT_EQUALS]:fE(),[ye.EXISTS]:pE(),[ye.NOT_EXISTS]:gE(),[ye.GREATER_THAN]:hE(),[ye.GREATER_THAN_OR_EQUAL_TO]:yE(),[ye.LESS_THAN]:EE(),[ye.LESS_THAN_OR_EQUAL_TO]:bE(),[ye.CONTAINS]:vE(),[ye.NOT_CONTAINS]:SE(),[ye.STARTS_WITH]:CE(),[ye.ENDS_WITH]:wE()};function AE(e){return IE[e]}function Zt(e){return typeof e>"u"}function pm(e){return Object.keys(e)}var TE="iam.id",xE="id",OE="iam.eventType",NE="eventType",_E="type",gm=[OE,NE,_E],hm=[TE,xE];function kE(e,t,r){switch(t){case ye.GREATER_THAN:return e>r;case ye.GREATER_THAN_OR_EQUAL_TO:return e>=r;case ye.LESS_THAN:return e<r;case ye.LESS_THAN_OR_EQUAL_TO:return e<=r;case ye.EQUALS:return e===r;case ye.NOT_EQUALS:return e!==r;default:return!1}}function Sn(e,t){for(let r=0;r<t.length;r+=1)if(!Zt(e[t[r]]))return e[t[r]]}function ym(e,t){let r=pm(e);for(let o=0;o<r.length;o+=1){let n=r[o],{event:i={}}=t;if(i[r[o]]!==e[n])return!1}return!0}function DE(e,t,r,o){return e.reduce((n,i)=>{let a=Sn(i,gm);if(!a)return n;let s=t.events[a];if(!s)return n;let c=Sn(i,hm);if(!c)return n;let u=s[c];if(!u||!ym(i,u))return n;let{count:l=1}=u;return Zt(r)||Zt(o)||u.timestamp>=r&&u.timestamp<=o?n+l:n},0)}function RE(e,t,r,o){let n=r;return e.every(a=>{let s=Sn(a,gm);if(!s)return!1;let c=t.events[s];if(!c)return!1;let u=Sn(a,hm);if(!u)return!1;let l=c[u];if(!ym(a,l)||l===null||Zt(l)||l.count===0)return!1;let d=(Zt(n)||l.timestamp>=n)&&(Zt(o)||l.timestamp<=o);return n=l.timestamp,d})?1:0}function PE(e,t){let r=!0;for(let o=0;o<t.length;o+=1)r=r&&t[o].evaluate(e);return r}function ME(e,t){let r=!1;for(let o=0;o<t.length;o+=1)if(r=r||t[o].evaluate(e),r)return!0;return!1}function LE(e,t,r){return{version:e,rules:t,metadata:r}}function VE(e,t,r){return{key:r,execute:o=>e.evaluate(o)?t:[],toString:()=>`Rule{condition=${e}, consequences=${t}}`}}function ya(e,t){return{evaluate:r=>t.evaluate(r),toString(){return`Condition{type=${e}, definition=${t}}`}}}function UE(e,t,r){return{id:e,type:t,detail:r}}function jE(e,t){return{evaluate:r=>dm.AND===e?PE(r,t):dm.OR===e?ME(r,t):!1}}function BE(e,t,r){return{evaluate:o=>{let n=AE(t);return n?n.matches(o,e,r):!1}}}function $E(e,t,r,o,n,i){return{evaluate:a=>{let s;return dE.ORDERED===i?s=RE(e,a,o,n):s=DE(e,a,o,n),kE(s,t,r)}}}function qE(e,t){return Object.assign(e,t)}function FE(e){let{key:t,matcher:r,values:o}=e;return BE(t,r,o)}function GE(e){let{logic:t,conditions:r}=e;return jE(t,r.map(Em))}function HE(e){let{events:t,from:r,to:o,matcher:n,value:i,searchType:a}=e;return $E(t,n,i,r,o,a)}function Em(e){let{type:t,definition:r}=e;if(ha.MATCHER===t){let o=FE(r);return ya(t,o)}if(ha.GROUP===t){let o=GE(r);return ya(t,o)}if(ha.HISTORICAL===t){let o=HE(r);return ya(t,o)}throw new Error("Can not parse condition")}function WE(e){let{id:t,type:r,detail:o}=e;return UE(t,r,o)}function zE(e){let{condition:t,consequences:r,key:o}=e,n=Em(t),i=r.map(WE);return VE(n,i,o)}function YE(e){return e?{provider:e.provider,providerData:qE({},e.providerData)}:void 0}function XE(e){let{version:t,rules:r,metadata:o}=e,n=r.map(zE),i=YE(o);return LE(t,n,i)}var bm="TGT",QE="DEFAULT";function mm(e){return{provider:QE,execute:t=>e.map(r=>r.execute(t)).filter(r=>r.length>0)}}function KE(e){let{providerData:t}=e;if(!t)throw new Error("Provider data is missing in metadata");let{identityTemplate:r,buckets:o}=t;if(!r)throw new Error("Identity template is missing in provider data");if(!o)throw new Error("Buckets is missing in provider data")}var JE="ECID";function ZE(e){let{xdm:t}=e;if(!t)throw new Error("XDM object is missing in the context");let{identityMap:r}=t;if(!r)throw new Error("Identity map is missing in the XDM object");let o=r[JE];if(!o)throw new Error("ECID identity namespace is missing in the identity map");if(!Array.isArray(o)||o.length===0)throw new Error("ECID identities array is empty or not an array");let n=o[0].id;if(!n)throw new Error("ECID identity is missing in the identities array");return n}var eb="<key>",tb="<identity>";function rb(e,t,r){let{providerData:o}=r,{identityTemplate:n}=o;return n.replace(eb,t).replace(tb,e)}function ob(e){return!Zt(e)}function vm(e,t=r=>r[0]){let r={};return function(...n){let i=t(n);return ob(r[i])||(r[i]=e(...n)),r[i]}}function Er(e,t){let r=t&65535;return((t-r)*e|0)+(r*e|0)|0}function nb(e,t=0){let r,o=e.length,n=3432918353,i=461845907,a=t,s=o&-2;for(let c=0;c<s;c+=2)r=e.charCodeAt(c)|e.charCodeAt(c+1)<<16,r=Er(r,n),r=(r&131071)<<15|r>>>17,r=Er(r,i),a^=r,a=(a&524287)<<13|a>>>19,a=a*5+3864292196|0;return o%2===1&&(r=e.charCodeAt(s),r=Er(r,n),r=(r&131071)<<15|r>>>17,r=Er(r,i),a^=r),a^=o<<1,a^=a>>>16,a=Er(a,2246822507),a^=a>>>13,a=Er(a,3266489909),a^=a>>>16,a}var ib=vm(nb,e=>e.join("-")),Ea=100;function ab(e,t){let r=ib(e),n=Math.abs(r)%t/t*Ea;return Math.round(n*Ea)/Ea}var sb=vm(ab);function cb(e,t,r){return{allocation:sb(e,t),...r}}function lb(e){let t={};for(let r=0;r<e.length;r+=1){let o=e[r];o.key&&(t[o.key]||(t[o.key]=[]),t[o.key].push(o))}return t}function fm(e,t){return t.map(r=>r.execute(e)).filter(r=>r.length>0)}function ub(e,t){KE(t);let r=e.filter(i=>!i.key),o=lb(e),{buckets:n}=t.providerData;return{provider:bm,execute:i=>{let a=ZE(i),s=fm(i,r),c=pm(o),u=[];for(let l=0;l<c.length;l+=1){let d=c[l],m=o[d],f=rb(a,d,t),p=cb(f,n,i),b=fm(p,m);u.push(...b)}return[...s,...u]}}}function db(e,t){if(!t)return mm(e);let{provider:r}=t;return r===bm?ub(e,t):mm(e)}function Sm(e){let{rules:t,metadata:r}=XE(e);return db(t,r)}var Cm=(e,t)=>r=>{let o=e.getItem(t);if(!o)return r;try{return JSON.parse(o)}catch{return r}},wm=(e,t,r=o=>o)=>o=>{e.setItem(t,JSON.stringify(r(o)))},Im=e=>{let t=new Date;return t.setDate(t.getDate()-e),t},br=e=>{let{scopeDetails:t={}}=e,{activity:r={}}=t,{id:o}=r;return o},Am=()=>{let e={};return{getItem:t=>t in e?e[t]:null,setItem:(t,r)=>{e[t]=r}}},ba=e=>{e.clear()},Tm=(e={})=>{let{_experience:t}=e;return!(!t||typeof t!="object")},xm=e=>{let{scopeDetails:t={}}=e,{decisionProvider:r}=t;return r};var Om=(e=[])=>{let t=[];return Array.isArray(e)?(e.forEach(r=>{Array.isArray(r)?t.push(...Om(r)):t.push(r)}),t):e},Nm=Om;var _m=(e,t,r)=>{let{html:o,mobileParameters:n}=r;return{schema:it,data:{mobileParameters:n,webParameters:{},content:o,contentType:Kr},id:e}};var km=(e,t,r)=>{let{schema:o,data:n,id:i}=r;return{schema:o,data:n,id:i||e}};var mb="cjmiam",fb="schema",Dm={[mb]:_m,[fb]:km},Rm=()=>e=>{let{id:t,type:r,detail:o}=e;return typeof Dm[r]=="function"?Dm[r](t,r,o):o};var pb=e=>{let{schema:t,data:r}=e;if(t===Gr)return!0;if(t!==zt)return!1;try{let o=typeof r.content=="string"?JSON.parse(r.content):r.content;return o&&Object.prototype.hasOwnProperty.call(o,"version")&&Object.prototype.hasOwnProperty.call(o,"rules")}catch{return!1}},Pm=(e,t,r)=>{let o=Rm(),n=br(e),i=[],a=c=>{let{data:u={},schema:l}=c,d=l===Gr?u:u.content;d&&i.push(Sm(typeof d=="string"?JSON.parse(d):d))},s=c=>{let u=t.getEvent(Yt,n),l=u?u.firstTimestamp:void 0,d=Nm(i.map(m=>m.execute(c))).map(o).map(m=>{let{firstTimestamp:f}=r.recordQualified(n)||{};return{...m,data:{...m.data,qualifiedDate:f,displayedDate:l}}});return{...e,items:d}};return Array.isArray(e.items)&&e.items.filter(pb).forEach(a),{rank:e?.scopeDetails?.rank||1/0,evaluate:s,isEvaluable:i.length>0}};var Mm=({eventRegistry:e})=>({recordQualified:r=>{if(r)return e.addEvent({},ae.TRIGGER,r)}});var Lm=({eventRegistry:e})=>{let t={},r=Mm({eventRegistry:e}),o=a=>{let s=br(a);if(!s)return;let c=Pm(a,e,r);c.isEvaluable&&(t[s]=c)};return{addPayload:o,addPayloads:a=>{a.forEach(o)},evaluate:(a={})=>Object.values(t).sort(({rank:c},{rank:u})=>c-u).map(c=>c.evaluate(a)).filter(c=>c.items.length>0)}};var Vm=e=>({renderDecisions:t=!1,propositions:r=[],event:o,personalization:n})=>(e&&e.onDecision({renderDecisions:t,propositions:r,event:o,personalization:n}),{propositions:r});var Um="events",jm=1e3,Bm=30,Cn=e=>`iam.${e}`,gb=(e=jm,t=Bm)=>r=>{let o={};return Object.keys(r).forEach(n=>{o[n]={},Object.values(r[n]).filter(i=>new Date(i.firstTimestamp)>=Im(t)).sort((i,a)=>i.firstTimestamp-a.firstTimestamp).slice(-1*e).forEach(i=>{o[n][i.event[Cn("id")]]=i})}),o},$m=({storage:e})=>{let t=e,r,o,n,i=u=>{t=u,r=Cm(t,Um),o=wm(t,Um,gb(jm,Bm)),n=r({})};i(e);let a=(u,l,d,m)=>{if(!l||!d)return;n[l]||(n[l]={});let f=n[l][d],p=f?f.count:0,b=new Date().getTime(),w=f?f.firstTimestamp||f.timestamp:b;return n[l][d]={event:{...u,[Cn("id")]:d,[Cn("eventType")]:l,[Cn("action")]:m},firstTimestamp:w,timestamp:b,count:p+1},o(n),n[l][d]};return{addExperienceEdgeEvent:u=>{let{xdm:l={}}=u.getContent(),{_experience:d}=l;if(!Tm(l))return;let{decisioning:m={}}=d,{propositionEventType:f={},propositionAction:p={},propositions:b=[]}=m,w=Object.keys(f);if(w.length===0)return;let C=_=>f[_]===1,{id:I}=p;w.filter(C).forEach(_=>{b.forEach(P=>{xm(P)===eo&&a({},_,br(P),I)})})},addEvent:a,getEvent:(u,l)=>{if(n[u])return n[u][l]},toJSON:()=>n,setStorage:i}};var qm=({eventRegistry:e,window:t,getBrowser:r})=>{let o=new Date().getTime(),n=()=>({name:r()}),i=()=>({title:t.title,url:t.url,...Po(t.url)}),a=()=>({url:t.referrer,...Po(t.referrer)}),s=()=>{let m=new Date,f=m.getTime();return{pageLoadTimestamp:o,currentTimestamp:f,currentDate:m.getDate(),"~state.com.adobe.module.lifecycle/lifecyclecontextdata.dayofweek":m.getDay()+1,"~state.com.adobe.module.lifecycle/lifecyclecontextdata.hourofday":m.getHours(),currentMinute:m.getMinutes(),currentMonth:m.getMonth(),currentYear:m.getFullYear(),pageVisitDuration:f-o,"~timestampu":f/1e3,"~timestampz":m.toISOString()}},c=()=>{let m=t.height,f=t.width,p=t.scrollY,b=t.scrollX;return{height:m,width:f,scrollY:p,scrollX:b}},u={browser:n(),page:i(),referringPage:a()},l=()=>({...u,...s(),window:c(),"~sdkver":fr});return{getContext:(m={})=>{let f={...l(),...m};return{...vn(f),events:e.toJSON()}}}};var hb=(e,...t)=>t,yb=(e,...t)=>!0,Eb=()=>{let e=hb,t=yb,r=0,o={},n=d=>()=>{delete o[d]};return{add:(d,m=void 0)=>typeof d!="function"?()=>{}:(r+=1,o[r]={callback:d,params:m},{id:r,unsubscribe:n(r)}),emit:(...d)=>{Object.values(o).forEach(({callback:m,params:f})=>{let p=e(f,...d);t(f,...p)&&m(...p)})},emitOne:(d,...m)=>{if(!d||!o[d])return;let{callback:f,params:p}=o[d],b=e(p,...m);t(p,...b)&&f(...b)},hasSubscriptions:()=>Object.keys(o).length>0,setEmissionPreprocessor:d=>{typeof d=="function"&&(e=d)},setEmissionCondition:d=>{typeof d=="function"&&(t=d)}}},Fm=Eb;var bb=({options:e})=>x({surfaces:te(k()).uniqueItems(),schemas:te(k()).uniqueItems(),callback:ze().required()}).noUnknownFields()(e),vb=e=>{let{id:t,scope:r,scopeDetails:o}=e;return{id:t,scope:r,scopeDetails:o}},Gm=({collect:e})=>{let t=()=>{},r=new Set,o=d=>[ae.INTERACT,ae.DISMISS].includes(d),n=(d,m,f)=>{let p=[d,m].join("-"),b=!f.has(p)&&(o(d)||!r.has(p));return f.add(p),r.add(p),b},i=(d,m=[])=>{if(!(m instanceof Array)||!Object.values(ae).includes(d))return Promise.resolve();let f=[],p=new Set;return m.forEach(b=>{let w=vb(b);n(d,w.id,p)&&f.push(w)}),f.length>0?e({decisionsMeta:f,eventType:ad(d),documentMayUnload:!0}):Promise.resolve()},a=Fm(),s=(d,m)=>{let{surfacesFilter:f,schemasFilter:p}=d;return[{propositions:m.filter(w=>f?f.includes(w.scope):!0).map(w=>{let{items:C=[]}=w;return{...w,items:C.filter(I=>p?p.includes(I.schema):!0)}}).filter(w=>w.items.length>0)},i]};return a.setEmissionPreprocessor(s),{refresh:d=>{t=m=>{if(m){a.emitOne(m,d);return}a.emit(d)},t()},command:{optionsValidator:d=>bb({options:d}),run:({surfaces:d,schemas:m,callback:f})=>{let{id:p,unsubscribe:b}=a.add(f,{surfacesFilter:d instanceof Array?d:void 0,schemasFilter:m instanceof Array?m:void 0});return t(p),Promise.resolve({unsubscribe:b})}}}};var to={TYPE:"~type",SOURCE:"~source"},va={LIFECYCLE:"com.adobe.eventType.lifecycle",TRACK:"com.adobe.eventType.generic.track",EDGE:"com.adobe.eventType.edge",RULES_ENGINE:"com.adobe.eventType.rulesEngine"},Sa={LAUNCH:"com.adobe.eventSource.applicationLaunch",REQUEST:"com.adobe.eventSource.requestContent"};var Sb=({options:e})=>x({renderDecisions:X(),personalization:x({decisionContext:x({})})}).noUnknownFields()(e),Hm=({contextProvider:e,decisionProvider:t})=>({optionsValidator:n=>Sb({options:n}),run:({renderDecisions:n,decisionContext:i,applyResponse:a})=>a({renderDecisions:n,propositions:t.evaluate(e.getContext(i))})});var Ca=({config:e,eventManager:t,createNamespacedStorage:r,consent:o,getBrowser:n})=>{let{orgId:i,personalizationStorageEnabled:a}=e,s=fn({eventManager:t,mergeDecisionsMeta:yr}),c=r(`${lt(i)}.decisioning.`);a||ba(c.persistent);let u=$m({storage:Am()}),l=Lm({eventRegistry:u}),d=qm({eventRegistry:u,window,getBrowser:n}),m=Hm({contextProvider:d,decisionProvider:l}),f=Gm({collect:s}),p;return{lifecycle:{onDecision({propositions:b}){f.refresh(b)},onComponentsRegistered(b){p=Vm(b.lifecycle),a&&o.awaitConsent().then(()=>{u.setStorage(c.persistent)}).catch(()=>{c&&ba(c.persistent)})},onBeforeEvent({event:b,renderDecisions:w,personalization:C={},onResponse:I=W}){let{decisionContext:_={}}=C;I(um({renderDecisions:w,decisionProvider:l,applyResponse:p,event:b,personalization:C,decisionContext:d.getContext({[to.TYPE]:va.EDGE,[to.SOURCE]:Sa.REQUEST,..._})}))},onBeforeRequest({request:b}){let w=b.getPayload().toJSON(),{events:C=[]}=w;C.length!==0&&C.forEach(I=>u.addExperienceEdgeEvent(I))}},commands:{evaluateRulesets:{run:({renderDecisions:b,personalization:w={}})=>{let{decisionContext:C={}}=w;return m.run({renderDecisions:b,decisionContext:{[to.TYPE]:va.RULES_ENGINE,[to.SOURCE]:Sa.REQUEST,...C},applyResponse:p})},optionsValidator:m.optionsValidator},subscribeRulesetItems:f.command}}};Ca.namespace="RulesEngine";Ca.configValidators=x({personalizationStorageEnabled:X().default(!1)});var Wm=Ca;var zm=x({streamingMedia:x({channel:k().nonEmpty().required(),playerName:k().nonEmpty().required(),appVersion:k(),mainPingInterval:me().minimum(10).maximum(50).default(10),adPingInterval:me().minimum(1).maximum(10).default(10)}).noUnknownFields()});var Ym=({options:e})=>At([x({playerId:k().required(),getPlayerDetails:ze().required(),xdm:x({mediaCollection:x({sessionDetails:x($e()).required()})}),edgeConfigOverrides:x({})}).required(),x({xdm:x({mediaCollection:x({playhead:me().required(),sessionDetails:x($e()).required()})}),edgeConfigOverrides:x({})}).required()],"Error validating the createMediaSession command options.")(e);var Xm=({options:e})=>At([x({playerId:k().required(),xdm:x({eventType:mt(...Object.values(ie)).required(),mediaCollection:x($e())}).required()}).required(),x({xdm:x({eventType:mt(...Object.values(ie)).required(),mediaCollection:x({playhead:me().integer().required(),sessionID:k().required()}).required()}).required()}).required()],"Error validating the sendMediaEvent command options.")(e);var Qm=({config:e,trackMediaEvent:t,trackMediaSession:r,mediaResponseHandler:o})=>({lifecycle:{onBeforeEvent({mediaOptions:n,onResponse:i=W}){if(!n)return;let{legacy:a,playerId:s,getPlayerDetails:c}=n;a||i(({response:u})=>o({playerId:s,getPlayerDetails:c,response:u}))}},commands:{createMediaSession:{optionsValidator:n=>Ym({options:n}),run:r},sendMediaEvent:{optionsValidator:n=>Xm({options:n}),run:n=>e.streamingMedia?t(n):Promise.reject(new Error("Streaming media is not configured."))}}});var wa=({config:e,logger:t,eventManager:r,sendEdgeNetworkRequest:o,consent:n})=>{let i=Xo({config:e}),a=Yo({config:e,eventManager:r,logger:t,consent:n,sendEdgeNetworkRequest:o,setTimestamp:mr(()=>new Date)}),s=Qo({mediaSessionCacheManager:i,mediaEventManager:a,config:e}),c=Ko({config:e,mediaEventManager:a,mediaSessionCacheManager:i}),u=Zo({mediaSessionCacheManager:i,config:e,trackMediaEvent:s});return Qm({config:e,trackMediaEvent:s,mediaEventManager:a,mediaResponseHandler:u,trackMediaSession:c})};wa.namespace="Streaming media";wa.configValidators=zm;var Km=wa;var{console:Cb}=window,wb=$t(window),Ib=(e={})=>{let t=x({name:k().default("alloy"),monitors:te(x({})).default([]),components:te(ze())}).noUnknownFields(),{name:r,monitors:o,components:n}=t(e),i=()=>(window.__alloyMonitors||[]).concat(o),a=Si({console:Cb,locationSearch:window.location.search,createLogger:Ai,instanceName:r,createNamespacedStorage:wb,getMonitors:i}),s=Fl({instanceName:r,logController:a,components:n});return a.logger.logOnInstanceCreated({instance:s}),s},Jm=(e={})=>{let t=x({name:k().default("alloy"),monitors:te(x({})).default([])}).noUnknownFields(),{name:r,monitors:o}=t(e);return Ib({name:r,monitors:o,components:Object.values(Ia)})};var Zm="custom-awsm-acs-event-listener";import{getCookieConsentValidatorInstance as Ab}from"@amzn/awsmcc";var Aa="custom_awsm_acslibs_on-consent-changed",ef=()=>Ab({onConsentChanged:t=>{let r=new CustomEvent(Aa,{detail:{consent:t}});window.dispatchEvent(r)}}),tf=e=>{let t=e._shortbread.getConsentCookie(),r=o=>{let n={functional:"f",essential:"e",performance:"p",advertising:"a",ccba:"ccba"};return t&&o in n&&o in t?`${n[o]}:${t[o]?"1":"0"}`:""};return t?Object.keys(t).reduce((o,n)=>o.length?`${o}|${r(n)}`:`${r(n)}`,""):""};var wn=(e,t,r,o)=>{let i=e?.querySelector("html")?.getAttribute("lang"),a=e?.title,s=t?.href||t,c=e?.referrer,u,l;return r&&(u=tf(r),l=r._shortbread.getConsentCookie()?.ccba?"1":"0"),{advertisementId:o,cookieConsent:u,ccba:l,pageLocale:i,pageTitle:a,pageUrl:s,pageReferrer:c}},rf=e=>{let t=r=>{let o=r.elements.filter(n=>n.id);return o.length?{[r.namespace]:o.map(({id:n,isAuthenticated:i,primary:a})=>({id:n,authenticatedState:i?"authenticated":"ambiguous",primary:a}))}:null};return e.reduce((r,o)=>{let n=t(o);return n&&(r={...r,...n}),r},{})};var er="Not possible to determine error message",ro=e=>`Error message: ${e.message}; Stacktrace: ${e.stack}`,vr=class extends Error{constructor(t){super(t)}};var tr=class extends Error{};tr.prototype.name="InvalidTokenError";function Tb(e){return decodeURIComponent(atob(e).replace(/(.)/g,(t,r)=>{let o=r.charCodeAt(0).toString(16).toUpperCase();return o.length<2&&(o="0"+o),"%"+o}))}function xb(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return Tb(t)}catch{return atob(t)}}function of(e,t){if(typeof e!="string")throw new tr("Invalid token specified: must be a string");t||(t={});let r=t.header===!0?0:1,o=e.split(".")[r];if(typeof o!="string")throw new tr(`Invalid token specified: missing part #${r+1}`);let n;try{n=xb(o)}catch(i){throw new tr(`Invalid token specified: invalid base64 for part #${r+1} (${i.message})`)}try{return JSON.parse(n)}catch(i){throw new tr(`Invalid token specified: invalid json for part #${r+1} (${i.message})`)}}var Ob="SHA-256",nf=async()=>{let e,t,r,o=document.cookie.split(";");for(let a of o){let s=kb(a);e=e||s;let c=Db(a);t=t||c;let u=Rb(a);r=r||u}let n=e||t||r;return n?await Nb(n):null},Nb=async e=>{let t=new TextEncoder().encode(e),r=await window.crypto.subtle.digest(Ob,t);return Array.from(new Uint8Array(r)).map(i=>i.toString(16).padStart(2,"0")).join("")},_b=e=>{let t=e.split(":");return t[4]&&t[4].match("[0-9]+")?t[4]:null},kb=e=>{let t=/^__Secure-aws-session-id-/,r=e.split("=")[0].trim();if(t.test(r)){let o=r.split("-");return o[o.length-2]}return null},Db=e=>{let t="aws-userInfo-signed",[r,o]=af(e);if(r===t){let n=of(o);return _b(n.arn)}return null},Rb=e=>{let t="aws-reg-aid",[r,o]=af(e);return r===t?o:null},af=e=>{let[t,r]=e.split("=").map(o=>o.trim());return[t,r]};var sf=e=>!!new URLSearchParams(e.search).get("debugACSLibs");var In=e=>({val:e?"y":"n"}),An=(e,t)=>{let r=e(mo),o=e(fo),n=t();return{hasAdobeConsent:r,hasAdvertisementConsent:o,hasCCBAConsent:n}},Tn=(e,t,r)=>({collect:e,share:t&&r,personalize:t});var xn=class{constructor(t,r){this.essentialConsent=!1;this.config=t,this.consentSet=!1,this.isInDebugMode=sf(document.location),this.loggerInstance=uo(bt),this.alloyClient=this.initAlloy(),this.cookieConsentInstance=r,this.configure(),this.listenCustomEvents();try{this.cookieConsentInstance?.hasConsent("aws-token-a")}catch(o){let n="AdvertisementIdCookieAccessError";o instanceof Error?this.loggerInstance.logMetricErrorCount(n,ro(o)):this.loggerInstance.logMetricErrorCount(n,er)}}initAlloy(){try{let{name:t}=this.config,r=Jm({name:t});return this.loggerInstance.logMetricCount(`${le.ALLOY_CLIENT_INIT}${fe.SUCCESS}`),r}catch(t){let r=`${le.ALLOY_CLIENT_INIT}${fe.ERROR}`;throw t instanceof Error?this.loggerInstance.logMetricErrorCount(r,ro(t)):this.loggerInstance.logMetricErrorCount(r,er),new vr("Alloy Client has initialization error")}}get isConsentSet(){return this.consentSet}get visitorId(){return this.visitorIdValue}set visitorId(t){this.visitorIdValue=t}get advertisementId(){return this.advertisementIdValue}set advertisementId(t){this.advertisementIdValue=t}get awsAccountId(){return this.awsAccountIdValue}set awsAccountId(t){this.awsAccountIdValue=t}configure(){let{dataStreamId:t,organizationId:r,defaultConsent:o,edgeBasePath:n,edgeDomain:i}=this.config;this.isInDebugMode&&(window.alloy=this.alloyClient),this.alloyClient("configure",{datastreamId:t,orgId:r,clickCollectionEnabled:!0,clickCollection:{internalLinkEnabled:!0,downloadLinkEnabled:!0,externalLinkEnabled:!0,eventGroupingEnabled:!1,sessionStorageEnabled:!1},context:["web","device","environment","placeContext","highEntropyUserAgentHints"],debugEnabled:this.isInDebugMode,defaultConsent:o,downloadLinkQualifier:".(pdf)$",edgeBasePath:n,edgeDomain:i,idMigrationEnabled:!1,targetMigrationEnabled:!1,thirdPartyCookiesEnabled:!1,onBeforeEventSend:a=>{a?.xdm&&(a.xdm._aws={...wn(document,location,this.cookieConsentInstance,this.advertisementId),...a.xdm._aws||{}}),this.addIdentityMapObject(a)}})}addIdentityMapObject(t){let r=this.visitorId,o=this.awsAccountId,n=!!o,i=[{namespace:"visitorID",elements:[{id:r,isAuthenticated:n,primary:!0}]},{namespace:"awsAccountID",elements:[{id:o||"",isAuthenticated:n,primary:!1}]}];n&&this.loggerInstance.logMetricCount(`${le.AUTHENTICATED_STATE}${fe.SUCCESS}`);let a=rf(i);t.xdm=t.xdm||{},t.xdm.identityMap=t.xdm.identityMap?{...t.xdm.identityMap,...a}:a}async getAwsAccountId(){let t=await nf();t&&(this.awsAccountId=t)}async getD2CVisitorId(){if(!this.visitorId){let{stage:t}=this.config,r=Gn(t),o;try{o=new ms({cookieAllowed:this.essentialConsent,env:r})}catch(n){let i=`${le.D2C_VISITOR_ID_CLIENT_INIT}${fe.ERROR}`;n instanceof Error?this.loggerInstance.logMetricErrorCount(i,n.message):this.loggerInstance.logMetricErrorCount(i,er)}if(o){let n=this.loggerInstance.logPerformanceMetric(`${le.GET_IDENTITY}${fe.LATENCY}`);this.visitorId=await new Promise(i=>{o.getVisitorId({onSuccess:a=>{n.send(),this.loggerInstance.logMetricCount(`${le.GET_IDENTITY}${fe.SUCCESS}`),i(a)},onError:a=>{n.send(),this.loggerInstance.logMetricErrorCount(`${le.GET_IDENTITY}${fe.FAILURE}`,a.message),i(void 0)}})})}}return this.visitorId}async getECIDVisitorId(){return this.visitorId||this.alloyClient("getIdentity").then(t=>{this.visitorId=t?.identity?.ECID}),this.visitorId}async getD2CAdvertisementId(){let t="no AWSADID";if(!this.advertisementId){let{stage:r}=this.config,o=Gn(r),n=!!this.cookieConsentInstance?.hasConsent(fo),i;try{i=new fs({cookieAllowed:n,env:o})}catch(a){let s=`${le.D2C_AD_ID_CLIENT_INIT}${fe.ERROR}`;a instanceof Error?this.loggerInstance.logMetricErrorCount(s,a.message):this.loggerInstance.logMetricErrorCount(s,er)}if(i){let a=this.loggerInstance.logPerformanceMetric(`${le.GET_IDENTITY}${fe.LATENCY}`);this.advertisementId=await new Promise(s=>{i.getAdvertisementToken({onSuccess:c=>{a.send(),this.loggerInstance.logMetricCount(`${le.GET_IDENTITY}${fe.SUCCESS}`),s(c.aid||this.advertisementId||t)},onError:c=>{a.send(),this.loggerInstance.logMetricErrorCount(`${le.GET_IDENTITY}${fe.FAILURE}`,c.message),s(this.advertisementId||t)}})})}}return this.advertisementId}setConsent(t,r,o){let n={collect:In(t)},i=r===void 0?{}:{share:In(r)},a=o===void 0?{}:{personalize:{content:In(o)}},s={consent:[{standard:"Adobe",version:"2.0",value:{...n,...i,...a}}]};this.essentialConsent=t;let c=this.loggerInstance.logPerformanceMetric(`${le.SET_CONSENT}${fe.LATENCY}`);this.alloyClient("setConsent",s).then(()=>{c.send(),this.loggerInstance.logMetricCount(`${le.SET_CONSENT}${fe.SUCCESS}`)}).catch(u=>{c.send(),this.loggerInstance.logMetricErrorCount(`${le.SET_CONSENT}${fe.FAILURE}`,u.message)}),this.consentSet=!0}async sendSingleEvent({eventType:t,data:r,xdm:o,useBeacon:n=!1}){if(this.cookieConsentInstance&&!this.cookieConsentInstance.hasConsent(mo))return;let i={data:r,type:t,xdm:o,documentUnloading:n};this.addIdentityMapObject(i);let a=this.loggerInstance.logPerformanceMetric(`${le.SEND_EVENT}${fe.LATENCY}`);return this.alloyClient("sendEvent",i).then(()=>{a.send(),this.loggerInstance.logMetricCount(`${le.SEND_EVENT}${fe.SUCCESS}`)}).catch(s=>{a.send(),this.loggerInstance.logMetricErrorCount(`${le.SEND_EVENT}${fe.FAILURE}`,s.message)})}async sendDecisionEvent(t,r){if(r)return this.addIdentityMapObject(t),this.alloyClient("sendEvent",t)}listenForConsentChange(t,r,o){window.addEventListener(o,async()=>{let{hasAdobeConsent:n,hasAdvertisementConsent:i,hasCCBAConsent:a}=An(t,r),{collect:s,share:c,personalize:u}=Tn(n,i,a);(this.isConsentSet||s||c||u)&&(this.setConsent(s,c,u),this.essentialConsent=n),this.advertisementId=i?await this.getD2CAdvertisementId():void 0})}listenCustomEvents(){let t=r=>{let{detail:o}=r;this.sendSingleEvent(o)};window.addEventListener(Zm,t)}};var cf=async()=>{let e=gs(location.hostname,document,ps,"pending"),t=ef(),r=new xn(e,t),o=()=>t._shortbread.getConsentCookie()?.ccba||!1,{hasAdobeConsent:n,hasAdvertisementConsent:i,hasCCBAConsent:a}=An(t.hasConsent,o),{collect:s,share:c,personalize:u}=Tn(n,i,a),l;if((s||c||u)&&r.setConsent(s,c,u),r.listenForConsentChange(t.hasConsent,o,Aa),n&&(await r.getD2CVisitorId(),await r.getAwsAccountId()),i&&(l=await r.getD2CAdvertisementId()),r.sendSingleEvent({eventType:"web.webpagedetails.pageViews",xdm:{_aws:wn(document,location,t,l)}}),!Fn(e.stage,location.hostname)){let d=hs(),m=await r.sendDecisionEvent({renderDecisions:!1,decisionScopes:d},s&&u);ys(m)}};var Ta;try{Ta=uo(bt),await cf()}catch(e){let t=e instanceof vr;e instanceof Error&&!t?Ta?.logMetricErrorCount(le.UNKNOWN_ERROR,ro(e)):Ta?.logMetricErrorCount(le.UNKNOWN_ERROR,er)}
